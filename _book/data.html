<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Data | Data Wrangling Basic Guide</title>
  <meta name="description" content="This book is meant to provide a guide to those who have little to no experience in R and R studio to conceptions dealing with data and statistics. R is a powerful tool allowing highly customizable data visualization and offers many different formats and applications to users." />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Data | Data Wrangling Basic Guide" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This book is meant to provide a guide to those who have little to no experience in R and R studio to conceptions dealing with data and statistics. R is a powerful tool allowing highly customizable data visualization and offers many different formats and applications to users." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Data | Data Wrangling Basic Guide" />
  
  <meta name="twitter:description" content="This book is meant to provide a guide to those who have little to no experience in R and R studio to conceptions dealing with data and statistics. R is a powerful tool allowing highly customizable data visualization and offers many different formats and applications to users." />
  

<meta name="author" content="Max Ricciardelli" />


<meta name="date" content="2023-06-17" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="r-and-programming-basics.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="r-and-programming-basics.html"><a href="r-and-programming-basics.html"><i class="fa fa-check"></i><b>2</b> R and Programming Basics</a>
<ul>
<li class="chapter" data-level="2.1" data-path="r-and-programming-basics.html"><a href="r-and-programming-basics.html#packages-functions-file-structure-and-file-paths"><i class="fa fa-check"></i><b>2.1</b> Packages, Functions, File Structure, and File Paths</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="r-and-programming-basics.html"><a href="r-and-programming-basics.html#packages-and-functions"><i class="fa fa-check"></i><b>2.1.1</b> Packages and Functions</a></li>
<li class="chapter" data-level="2.1.2" data-path="r-and-programming-basics.html"><a href="r-and-programming-basics.html#installing-and-referencing-packages"><i class="fa fa-check"></i><b>2.1.2</b> Installing and Referencing Packages</a></li>
<li class="chapter" data-level="2.1.3" data-path="r-and-programming-basics.html"><a href="r-and-programming-basics.html#calling-functions"><i class="fa fa-check"></i><b>2.1.3</b> Calling Functions</a></li>
<li class="chapter" data-level="2.1.4" data-path="r-and-programming-basics.html"><a href="r-and-programming-basics.html#changing-the-working-directory"><i class="fa fa-check"></i><b>2.1.4</b> Changing the Working Directory</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="r-and-programming-basics.html"><a href="r-and-programming-basics.html#objects-data-and-types"><i class="fa fa-check"></i><b>2.2</b> Objects, data, and types</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="r-and-programming-basics.html"><a href="r-and-programming-basics.html#mathematical-operators"><i class="fa fa-check"></i><b>2.2.1</b> Mathematical Operators</a></li>
<li class="chapter" data-level="2.2.2" data-path="r-and-programming-basics.html"><a href="r-and-programming-basics.html#objects"><i class="fa fa-check"></i><b>2.2.2</b> Objects</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="r-and-programming-basics.html"><a href="r-and-programming-basics.html#logical-operators"><i class="fa fa-check"></i><b>2.3</b> Logical Operators</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="r-and-programming-basics.html"><a href="r-and-programming-basics.html#boolean-operators"><i class="fa fa-check"></i><b>2.3.1</b> Boolean Operators</a></li>
<li class="chapter" data-level="2.3.2" data-path="r-and-programming-basics.html"><a href="r-and-programming-basics.html#numeric-operators"><i class="fa fa-check"></i><b>2.3.2</b> Numeric Operators</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="r-and-programming-basics.html"><a href="r-and-programming-basics.html#if-and-else-statements"><i class="fa fa-check"></i><b>2.4</b> If and Else Statements</a></li>
<li class="chapter" data-level="2.5" data-path="r-and-programming-basics.html"><a href="r-and-programming-basics.html#for-and-while-loops"><i class="fa fa-check"></i><b>2.5</b> For and While loops</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="r-and-programming-basics.html"><a href="r-and-programming-basics.html#for-loops"><i class="fa fa-check"></i><b>2.5.1</b> For Loops</a></li>
<li class="chapter" data-level="2.5.2" data-path="r-and-programming-basics.html"><a href="r-and-programming-basics.html#while-loops"><i class="fa fa-check"></i><b>2.5.2</b> While Loops</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="r-and-programming-basics.html"><a href="r-and-programming-basics.html#writing-your-own-functions"><i class="fa fa-check"></i><b>2.6</b> Writing your own functions</a></li>
<li class="chapter" data-level="2.7" data-path="r-and-programming-basics.html"><a href="r-and-programming-basics.html#additional-resources-for-learning-r"><i class="fa fa-check"></i><b>2.7</b> Additional Resources for Learning R</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>3</b> Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data.html"><a href="data.html#data-frames"><i class="fa fa-check"></i><b>3.1</b> Data Frames</a></li>
<li class="chapter" data-level="3.2" data-path="data.html"><a href="data.html#data-types"><i class="fa fa-check"></i><b>3.2</b> Data Types</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="data.html"><a href="data.html#date-time-objects"><i class="fa fa-check"></i><b>3.2.1</b> Date Time Objects</a></li>
<li class="chapter" data-level="3.2.2" data-path="data.html"><a href="data.html#factors"><i class="fa fa-check"></i><b>3.2.2</b> Factors</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="data.html"><a href="data.html#importing-data"><i class="fa fa-check"></i><b>3.3</b> Importing Data</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="data.html"><a href="data.html#csv-files"><i class="fa fa-check"></i><b>3.3.1</b> .csv Files</a></li>
<li class="chapter" data-level="3.3.2" data-path="data.html"><a href="data.html#microsoft-excel-files"><i class="fa fa-check"></i><b>3.3.2</b> Microsoft Excel Files</a></li>
<li class="chapter" data-level="3.3.3" data-path="data.html"><a href="data.html#rds-files"><i class="fa fa-check"></i><b>3.3.3</b> RDS Files</a></li>
<li class="chapter" data-level="3.3.4" data-path="data.html"><a href="data.html#conclusion"><i class="fa fa-check"></i><b>3.3.4</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="data.html"><a href="data.html#cleaning-data-and-the-tidyverse"><i class="fa fa-check"></i><b>3.4</b> Cleaning Data and the Tidyverse</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="data.html"><a href="data.html#pivoting-data"><i class="fa fa-check"></i><b>3.4.1</b> Pivoting Data</a></li>
<li class="chapter" data-level="3.4.2" data-path="data.html"><a href="data.html#creating-new-variables"><i class="fa fa-check"></i><b>3.4.2</b> Creating New Variables</a></li>
<li class="chapter" data-level="3.4.3" data-path="data.html"><a href="data.html#renaming-variables-and-piping"><i class="fa fa-check"></i><b>3.4.3</b> Renaming Variables and Piping</a></li>
<li class="chapter" data-level="3.4.4" data-path="data.html"><a href="data.html#filtering-data"><i class="fa fa-check"></i><b>3.4.4</b> Filtering Data</a></li>
<li class="chapter" data-level="3.4.5" data-path="data.html"><a href="data.html#grouping-and-summarizing-data"><i class="fa fa-check"></i><b>3.4.5</b> Grouping and Summarizing Data</a></li>
<li class="chapter" data-level="3.4.6" data-path="data.html"><a href="data.html#joining-data-sets"><i class="fa fa-check"></i><b>3.4.6</b> Joining Data Sets</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="data.html"><a href="data.html#saving-files"><i class="fa fa-check"></i><b>3.5</b> Saving Files</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="data.html"><a href="data.html#saving-data-frames"><i class="fa fa-check"></i><b>3.5.1</b> Saving Data Frames</a></li>
<li class="chapter" data-level="3.5.2" data-path="data.html"><a href="data.html#saving-images"><i class="fa fa-check"></i><b>3.5.2</b> Saving Images</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="data.html"><a href="data.html#data-sources"><i class="fa fa-check"></i><b>3.6</b> Data Sources</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="data.html"><a href="data.html#ipums"><i class="fa fa-check"></i><b>3.6.1</b> IPUMS</a></li>
<li class="chapter" data-level="3.6.2" data-path="data.html"><a href="data.html#tidycensus"><i class="fa fa-check"></i><b>3.6.2</b> Tidycensus</a></li>
<li class="chapter" data-level="3.6.3" data-path="data.html"><a href="data.html#scraping"><i class="fa fa-check"></i><b>3.6.3</b> Scraping</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="data.html"><a href="data.html#conclusion-1"><i class="fa fa-check"></i><b>3.7</b> Conclusion</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Wrangling Basic Guide</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">3</span> Data<a href="data.html#data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>This chapter deals explains how to deal with different types of data within R, as well as how to manipulate and save that data. When we are dealing with data we will be using the object of a data frame to save the data within the temporary memory of R itself (shown in the environment). For this chapter, the tidyverse contains the set of packages we will use. The installation and calling of this package is shown in the chunk below:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="data.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages(&quot;tidyverse)</span></span>
<span id="cb1-2"><a href="data.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<pre><code>## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
## ✔ dplyr     1.1.1     ✔ readr     2.1.4
## ✔ forcats   1.0.0     ✔ stringr   1.5.0
## ✔ ggplot2   3.4.2     ✔ tibble    3.2.1
## ✔ lubridate 1.9.2     ✔ tidyr     1.3.0
## ✔ purrr     1.0.1     
## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()
## ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
<p>The output from calling the tidyverse shows all of the different packages it loads into R at once. These packages are meant to work together for data analysis, wrangling, and visualization.</p>
<div id="data-frames" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Data Frames<a href="data.html#data-frames" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Within R itself, a data frame can be created in two different ways: using the <code>tibble()</code> or <code>tribble()</code> functions. An example of how to use each is given in the code chunk below:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="data.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># the tibble function joins either manually set or referenced vectors of the same length into a data frame </span></span>
<span id="cb3-2"><a href="data.html#cb3-2" aria-hidden="true" tabindex="-1"></a>(data_frame <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">row =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>,<span class="dv">10</span>), <span class="co"># row_name = vector(length 10)</span></span>
<span id="cb3-3"><a href="data.html#cb3-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">color =</span> <span class="fu">c</span>(<span class="st">&#39;red&#39;</span>, <span class="st">&#39;blue&#39;</span>, <span class="st">&#39;yellow&#39;</span>, <span class="st">&#39;green&#39;</span>, <span class="st">&#39;purple&#39;</span>, <span class="st">&#39;orange&#39;</span>, <span class="st">&#39;magenta&#39;</span>, <span class="st">&#39;red&#39;</span>, <span class="st">&#39;purple&#39;</span>, <span class="st">&#39;orange&#39;</span>), </span>
<span id="cb3-4"><a href="data.html#cb3-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">category =</span> <span class="fu">c</span>(<span class="st">&#39;warm&#39;</span>, <span class="st">&#39;cold&#39;</span>, <span class="st">&#39;warm&#39;</span>, <span class="st">&#39;cold&#39;</span>, <span class="st">&#39;cold&#39;</span>, <span class="st">&#39;warm&#39;</span>, <span class="st">&#39;warm&#39;</span>, <span class="st">&#39;warm&#39;</span>, <span class="st">&#39;cold&#39;</span>, <span class="st">&#39;warm&#39;</span>))) </span></code></pre></div>
<pre><code>## # A tibble: 10 × 3
##      row color   category
##    &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   
##  1     1 red     warm    
##  2     2 blue    cold    
##  3     3 yellow  warm    
##  4     4 green   cold    
##  5     5 purple  cold    
##  6     6 orange  warm    
##  7     7 magenta warm    
##  8     8 red     warm    
##  9     9 purple  cold    
## 10    10 orange  warm</code></pre>
</div>
<div id="data-types" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Data Types<a href="data.html#data-types" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Underneath the row name in the <code>&lt;&gt;</code> is the data type of the column. <code>&lt;dbl&gt;</code> refers to double and <code>&lt;chr&gt;</code> refers to characters. The vectors must be the same length for this to work. Each row here has a length of 10. The function is surrounded in parentheses so the output prints.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="data.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># the tribble identifies the column name on the first line with the ~ symbol</span></span>
<span id="cb5-2"><a href="data.html#cb5-2" aria-hidden="true" tabindex="-1"></a>(data_frame2 <span class="ot">&lt;-</span> <span class="fu">tribble</span>(<span class="sc">~</span>row, <span class="sc">~</span>row2,</span>
<span id="cb5-3"><a href="data.html#cb5-3" aria-hidden="true" tabindex="-1"></a>                       <span class="dv">1</span>,<span class="dv">2</span>, <span class="co">#subsequent rows going across are inputed underneath</span></span>
<span id="cb5-4"><a href="data.html#cb5-4" aria-hidden="true" tabindex="-1"></a>                       <span class="dv">3</span>,<span class="dv">4</span>,</span>
<span id="cb5-5"><a href="data.html#cb5-5" aria-hidden="true" tabindex="-1"></a>                       <span class="dv">5</span>,<span class="dv">6</span>,</span>
<span id="cb5-6"><a href="data.html#cb5-6" aria-hidden="true" tabindex="-1"></a>                       <span class="dv">7</span>,<span class="dv">8</span> )) <span class="co"># this provides an alternative method to hand entering these </span></span></code></pre></div>
<pre><code>## # A tibble: 4 × 2
##     row  row2
##   &lt;dbl&gt; &lt;dbl&gt;
## 1     1     2
## 2     3     4
## 3     5     6
## 4     7     8</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="data.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># most of the time this should not be necessary for entering actual data</span></span>
<span id="cb7-2"><a href="data.html#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co"># this can be useful for making summary tables for output in final work</span></span></code></pre></div>
<p>It is important to make sure each column is the desired data type. If you are trying to use functions that</p>
<div id="date-time-objects" class="section level3 hasAnchor" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> Date Time Objects<a href="data.html#date-time-objects" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There is a special type for times available through the <code>lubridate</code> package. This package is automatically included in the tidyverse. The code chunk below demonstrates how to use the <code>make_datetime()</code> function. Using this data type ensures that graphs over time are produced properly using ggplot2.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="data.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">make_datetime</span>(<span class="at">year =</span> <span class="dv">2020</span>, <span class="at">month =</span> <span class="dv">11</span>, <span class="at">day =</span> <span class="dv">25</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2020-11-25 UTC&quot;</code></pre>
</div>
<div id="factors" class="section level3 hasAnchor" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> Factors<a href="data.html#factors" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Factors are a specialized data type meant to deal with categorical variables. Factors are available through the <code>forecats</code> package which is apart of the tidyverse. This format best applies to a character variable that has a specified order, such as months in a year. To convert a create a factor you must use the <code>factor()</code> function. The code chunk below shows an example of converting a character vector to a factor using months. The difference can be seen when the factor and character vectors are sorted. Factors are most useful within data frames. They give R a roadmap of how to value character variables properly, making graphing, filtering, and general analysis easier.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="data.html#cb10-1" aria-hidden="true" tabindex="-1"></a>mon <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Mar&quot;</span>, <span class="st">&quot;Apr&quot;</span>, <span class="st">&quot;Dec&quot;</span>, <span class="st">&quot;Feb&quot;</span>, <span class="st">&quot;Nov&quot;</span>, <span class="st">&quot;Jun&quot;</span>, <span class="st">&quot;Aug&quot;</span>, <span class="st">&quot;Jan&quot;</span>, <span class="st">&quot;Oct&quot;</span>, <span class="st">&quot;May&quot;</span>, <span class="st">&quot;Jul&quot;</span>, <span class="st">&quot;Sep&quot;</span>)</span>
<span id="cb10-2"><a href="data.html#cb10-2" aria-hidden="true" tabindex="-1"></a>factor <span class="ot">&lt;-</span> <span class="fu">factor</span>(mon, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;Jan&quot;</span>, <span class="st">&quot;Feb&quot;</span>, <span class="st">&quot;Mar&quot;</span>, <span class="st">&quot;Apr&quot;</span>, <span class="st">&quot;May&quot;</span>, <span class="st">&quot;Jun&quot;</span>, </span>
<span id="cb10-3"><a href="data.html#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Jul&quot;</span>, <span class="st">&quot;Aug&quot;</span>, <span class="st">&quot;Sep&quot;</span>, <span class="st">&quot;Oct&quot;</span>, <span class="st">&quot;Nov&quot;</span>, <span class="st">&quot;Dec&quot;</span>))</span>
<span id="cb10-4"><a href="data.html#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(mon)</span></code></pre></div>
<pre><code>##  [1] &quot;Apr&quot; &quot;Aug&quot; &quot;Dec&quot; &quot;Feb&quot; &quot;Jan&quot; &quot;Jul&quot; &quot;Jun&quot; &quot;Mar&quot; &quot;May&quot; &quot;Nov&quot; &quot;Oct&quot; &quot;Sep&quot;</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="data.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(factor)</span></code></pre></div>
<pre><code>##  [1] Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec
## Levels: Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec</code></pre>
</div>
</div>
<div id="importing-data" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Importing Data<a href="data.html#importing-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Importing data is an important skill. Data comes in a variety of formats which you must transfer into the data frame format for use with R. One option is to hand type the data into the <code>tibble</code> or <code>tribble</code> function, but this is very time consuming. It is only easiest to use these functions with small data sets or a data frame you want to make into a table.</p>
<div id="csv-files" class="section level3 hasAnchor" number="3.3.1">
<h3><span class="header-section-number">3.3.1</span> .csv Files<a href="data.html#csv-files" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Most often data you encounter will be available in the .csv format (comma-separated-values). The <code>readr</code> package in the tidyverse provides a very useful function, <code>read_csv()</code> for reading .csv files. An example of how to use the <code>read_csv()</code> function is given in the chunk below:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="data.html#cb14-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">here</span>(<span class="st">&quot;sample.csv&quot;</span>))</span></code></pre></div>
<pre><code>## Rows: 156 Columns: 2
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr (1): Date
## dbl (1): Sales
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="data.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># this reads a csv detailing monthly liquor sales data</span></span></code></pre></div>
<p>If the .csv file has blank lines at the beginning of the file you can use the <code>skip =</code> parameter to skip lines of the save before it starts to read it. This is often necessary to skip white space at the top and ensure the .csv file correctly reads into a data frame.</p>
</div>
<div id="microsoft-excel-files" class="section level3 hasAnchor" number="3.3.2">
<h3><span class="header-section-number">3.3.2</span> Microsoft Excel Files<a href="data.html#microsoft-excel-files" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Excel has changed the way they save their files over time leading to a variety of way that excel files can be read. One important thing to note is excel files can always be saved as .csv files and read that way. If you want to directly read the excel file, the <code>readxl</code> package offers the ability to read an excel file directly into a data frame through the <code>read_excel(file_name)</code> function. The code chunk below shows an example of how to do this. Note: to just use the file name the file must be in the project folder. Otherwise, you need the complete file path or to change the working directory to the folder with the file. If the excel file has multiple sheets, the <code>sheet =</code> parameter allows you to select the sheet by setting it equal to the name of the sheet.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="data.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb17-2"><a href="data.html#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">read_excel</span>(<span class="st">&quot;sample.xlsx&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 156 × 2
##    Date                Sales
##    &lt;dttm&gt;              &lt;dbl&gt;
##  1 1992-01-01 00:00:00  1519
##  2 1992-02-01 00:00:00  1551
##  3 1992-03-01 00:00:00  1606
##  4 1992-04-01 00:00:00  1686
##  5 1992-05-01 00:00:00  1834
##  6 1992-06-01 00:00:00  1786
##  7 1992-07-01 00:00:00  1924
##  8 1992-08-01 00:00:00  1874
##  9 1992-09-01 00:00:00  1781
## 10 1992-10-01 00:00:00  1894
## # ℹ 146 more rows</code></pre>
<p>Excel has a very useful feature where they can read tables from pictures or screenshots of textbooks. This is present in the data tab of the top bar of excel and identified in the screenshot below. Simply select the file of a picture of the table and excel will try to import it. It isn’t perfect but often get most of it right. Always check that it is correct when using this, it still saves a ton of time.</p>
<div class="figure">
<img src="figures/data_ss.png" alt="" />
<p class="caption">Excel Picture to Table Tool</p>
</div>
</div>
<div id="rds-files" class="section level3 hasAnchor" number="3.3.3">
<h3><span class="header-section-number">3.3.3</span> RDS Files<a href="data.html#rds-files" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>.RDS files are meant for use in R and are a good way to save and the read in data frames. They quickly load into R and are often the format I use to save my files when I know I will have to reference them later. The <code>read_rds()</code> function reads existing RDS files into a data frame.</p>
</div>
<div id="conclusion" class="section level3 hasAnchor" number="3.3.4">
<h3><span class="header-section-number">3.3.4</span> Conclusion<a href="data.html#conclusion" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Almost any data you encounter will be in either one of these three formats or able to be converted into one of these formats using methods discussed above. Getting a data file into a data frame is the first step in analyzing data and can sometimes be the most tedious if you are not able to troubleshoot the process effectively. Always check you data!</p>
</div>
</div>
<div id="cleaning-data-and-the-tidyverse" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> Cleaning Data and the Tidyverse<a href="data.html#cleaning-data-and-the-tidyverse" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>What is clean data? For data to be clean there must be a clear pattern of organization to how the data is stored. This concept is also commonly referred to as tidy data. For this subsection make sure to have install and called the <code>tidyverse</code> package, as it contains tidyr tools used to manipulate data frames.</p>
<p>There are three general rules for making a data set tidy:</p>
<ul>
<li>Each variable must have its own column</li>
<li>Each observation must have its own row</li>
<li>Each value must have its own cell</li>
</ul>
<p>Table 1, shown in the code chunk below, is an example of a tidy data set. Each observation (pertaining to a country and a year) has its own row. Additionally, each variable has its own column. This table is included in the tidyverse as an example.<span class="citation"><a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></span></p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="data.html#cb19-1" aria-hidden="true" tabindex="-1"></a>table1</span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
##   country      year  cases population
##   &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt;
## 1 Afghanistan  1999    745   19987071
## 2 Afghanistan  2000   2666   20595360
## 3 Brazil       1999  37737  172006362
## 4 Brazil       2000  80488  174504898
## 5 China        1999 212258 1272915272
## 6 China        2000 213766 1280428583</code></pre>
<p>Often, data when you receive it will not be in this format. The first step after successfully importing data is to clean it. Luckily, the tidyverse offers functions that allow you to rearrange the data into a format better suited for analysis and plotting. I will go through several examples of different common problems with data, and what functions are best to fix them.</p>
<div id="pivoting-data" class="section level3 hasAnchor" number="3.4.1">
<h3><span class="header-section-number">3.4.1</span> Pivoting Data<a href="data.html#pivoting-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>First, we will discuss the two functions used for pivoting data. The code chunk below shows a sample data frame that has multiple issues, which are able to be corrected through pivoting. Instead of having a column for each variable, the variable type indicates the variable. Columns 3 and 4, which are both doubles (numeric data type), pertain to the year of the value. These are examples of common problems with data.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="data.html#cb21-1" aria-hidden="true" tabindex="-1"></a>sample_table</span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
##   type       country         `1999`     `2000`
##   &lt;chr&gt;      &lt;chr&gt;            &lt;dbl&gt;      &lt;dbl&gt;
## 1 population Afghanistan   19987071   20595360
## 2 cases      Afghanistan        745       2666
## 3 population Brazil       172006362  174594898
## 4 cases      Brazil           37737      80488
## 5 population China       1272915272 1280428583
## 6 cases      China           212258     213766</code></pre>
<p>These two functions in dplyr are each geared to solving one of these problems:</p>
<ul>
<li><code>pivot_longer()</code>
<ul>
<li>this adds rows making the data frame longer</li>
<li>this corrects the issue with the columns pertaining to the year of the corresponding value</li>
<li>parameters: <code>pivot_longer(data, cols, names_to = , values_to = )</code>
<ul>
<li>data: data frame to pivot</li>
<li>cols: columns to pivot</li>
<li>names_to: name of new column containing the names of the pivoted columns</li>
<li>values_to: name of new column containing the values of the pivoted columns</li>
</ul></li>
</ul></li>
</ul>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="data.html#cb23-1" aria-hidden="true" tabindex="-1"></a>(longer_table <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(<span class="at">data =</span> sample_table, <span class="at">cols =</span> <span class="fu">c</span>(<span class="st">`</span><span class="at">1999</span><span class="st">`</span>, <span class="st">`</span><span class="at">2000</span><span class="st">`</span>), <span class="at">names_to =</span> <span class="st">&quot;year&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;value&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 12 × 4
##    type       country     year       value
##    &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;      &lt;dbl&gt;
##  1 population Afghanistan 1999    19987071
##  2 population Afghanistan 2000    20595360
##  3 cases      Afghanistan 1999         745
##  4 cases      Afghanistan 2000        2666
##  5 population Brazil      1999   172006362
##  6 population Brazil      2000   174594898
##  7 cases      Brazil      1999       37737
##  8 cases      Brazil      2000       80488
##  9 population China       1999  1272915272
## 10 population China       2000  1280428583
## 11 cases      China       1999      212258
## 12 cases      China       2000      213766</code></pre>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="data.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># the data = and cols = are not necessary as they are required parameters</span></span></code></pre></div>
<ul>
<li><code>pivot_wider()</code>
<ul>
<li>this adds columns making the data frame wider</li>
<li>this corrects the issue that each variable does not have its own column</li>
<li>parameters: <code>pivot_wider(data, names from = , values_from = )</code>
<ul>
<li>data: data frame to pivot</li>
<li>names_from: column whos values are the names of the new columns</li>
<li>values_from: column whos values are the values of the new columns</li>
</ul></li>
</ul></li>
</ul>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="data.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># this pivots the data frame after the longer pivot above</span></span>
<span id="cb26-2"><a href="data.html#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">pivot_wider</span>(longer_table, <span class="at">names_from =</span> type, <span class="at">values_from =</span> value )</span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
##   country     year  population  cases
##   &lt;chr&gt;       &lt;chr&gt;      &lt;dbl&gt;  &lt;dbl&gt;
## 1 Afghanistan 1999    19987071    745
## 2 Afghanistan 2000    20595360   2666
## 3 Brazil      1999   172006362  37737
## 4 Brazil      2000   174594898  80488
## 5 China       1999  1272915272 212258
## 6 China       2000  1280428583 213766</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="data.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># note without an assignment operator this is not saved</span></span></code></pre></div>
</div>
<div id="creating-new-variables" class="section level3 hasAnchor" number="3.4.2">
<h3><span class="header-section-number">3.4.2</span> Creating New Variables<a href="data.html#creating-new-variables" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Often in working with data you will want to create a new variable. These can be numeric variables that combine values already present in the data or categorical variables that differentiate the values in some way.</p>
<p>This first example in the code chunk below demonstrates how to make a new numeric variable using two existing numeric variables. This creates a new row that is the number of cases divided by the total population that year.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="data.html#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(table1, <span class="at">cases_per_cap =</span> cases <span class="sc">/</span> population)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 5
##   country      year  cases population cases_per_cap
##   &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt;         &lt;dbl&gt;
## 1 Afghanistan  1999    745   19987071     0.0000373
## 2 Afghanistan  2000   2666   20595360     0.000129 
## 3 Brazil       1999  37737  172006362     0.000219 
## 4 Brazil       2000  80488  174504898     0.000461 
## 5 China        1999 212258 1272915272     0.000167 
## 6 China        2000 213766 1280428583     0.000167</code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="data.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># on the left side of the equal sign is the name of the new variables</span></span>
<span id="cb31-2"><a href="data.html#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="co"># on the right side is the new variable</span></span></code></pre></div>
<p>You can use vectors, but must be careful when doing so. The vector must have the same length as the data frame has rows. Additionally, it is important to note that the first element will belong to the observation of the first row. It is important to make sure that you are assigning values to the correct observation, otherwise your data will become corrupted invalidating any work past this point. The code chunk below shows an example of using a vector to create a new column in table 1.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="data.html#cb32-1" aria-hidden="true" tabindex="-1"></a>new_var <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="fl">2.1</span>, <span class="fl">3.4</span>, <span class="fl">0.3</span>, <span class="fl">0.78</span>, <span class="fl">1.64</span>) <span class="co"># this does not correspond to anything</span></span>
<span id="cb32-2"><a href="data.html#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(table1, <span class="at">value =</span> new_var) <span class="co"># the new var has a length of 6 so this works</span></span></code></pre></div>
<pre><code>## # A tibble: 6 × 5
##   country      year  cases population value
##   &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt; &lt;dbl&gt;
## 1 Afghanistan  1999    745   19987071  0.5 
## 2 Afghanistan  2000   2666   20595360  2.1 
## 3 Brazil       1999  37737  172006362  3.4 
## 4 Brazil       2000  80488  174504898  0.3 
## 5 China        1999 212258 1272915272  0.78
## 6 China        2000 213766 1280428583  1.64</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="data.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># any other length would cause an error</span></span></code></pre></div>
<p>This next examples demonstrates how to use the <code>case_when()</code> function. The <code>case_when()</code> function is very useful when creating a new categorical variable based on other already existing variables. The code chunk below demonstrates the correct syntax.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="data.html#cb35-1" aria-hidden="true" tabindex="-1"></a>(new_table <span class="ot">&lt;-</span> <span class="fu">mutate</span>(table1, <span class="at">cases_per_cap =</span> <span class="fu">case_when</span>(cases <span class="sc">/</span> population <span class="sc">&lt;</span> <span class="fl">0.0001</span> <span class="sc">~</span> <span class="st">&quot;low&quot;</span>,</span>
<span id="cb35-2"><a href="data.html#cb35-2" aria-hidden="true" tabindex="-1"></a>                                     cases <span class="sc">/</span> population  <span class="sc">&gt;=</span> <span class="fl">0.0001</span> <span class="sc">&amp;</span> cases <span class="sc">/</span> population <span class="sc">&lt;</span> <span class="fl">0.0003</span> <span class="sc">~</span> <span class="st">&quot;medium&quot;</span>,</span>
<span id="cb35-3"><a href="data.html#cb35-3" aria-hidden="true" tabindex="-1"></a>                                     cases <span class="sc">/</span> population <span class="sc">&gt;=</span> <span class="fl">0.0003</span> <span class="sc">~</span> <span class="st">&quot;high&quot;</span>)))</span></code></pre></div>
<pre><code>## # A tibble: 6 × 5
##   country      year  cases population cases_per_cap
##   &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;        
## 1 Afghanistan  1999    745   19987071 low          
## 2 Afghanistan  2000   2666   20595360 medium       
## 3 Brazil       1999  37737  172006362 medium       
## 4 Brazil       2000  80488  174504898 high         
## 5 China        1999 212258 1272915272 medium       
## 6 China        2000 213766 1280428583 medium</code></pre>
<p>This creates a low, medium, or high categorical variable indicated the number of cases per capita. This creates the variable in the character data type. To make this into a factor you can overwrite the variable using mutate with the function to turn it into a factor. This is demonstrated in the code chunk below.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="data.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(new_table, <span class="at">cases_per_cap =</span> <span class="fu">factor</span>(cases_per_cap, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;low&quot;</span>, <span class="st">&quot;medium&quot;</span>, <span class="st">&quot;high&quot;</span>)))</span></code></pre></div>
<pre><code>## # A tibble: 6 × 5
##   country      year  cases population cases_per_cap
##   &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt; &lt;fct&gt;        
## 1 Afghanistan  1999    745   19987071 low          
## 2 Afghanistan  2000   2666   20595360 medium       
## 3 Brazil       1999  37737  172006362 medium       
## 4 Brazil       2000  80488  174504898 high         
## 5 China        1999 212258 1272915272 medium       
## 6 China        2000 213766 1280428583 medium</code></pre>
</div>
<div id="renaming-variables-and-piping" class="section level3 hasAnchor" number="3.4.3">
<h3><span class="header-section-number">3.4.3</span> Renaming Variables and Piping<a href="data.html#renaming-variables-and-piping" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>It is very important to make sure the names of the columns comply with the conventions of coding and clearly indicate what it is. Most data sets have a code book that lists each variable and what it represents, but these names are often not conducive to identifying the variable during analysis. To rename the columns in a data frame use the <code>rename()</code> function available with the tidyverse. The code chunk below demonstrates this using the data frame longer table, saved after the first pivoting exercise above.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="data.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rename</span>(longer_table, <span class="at">numbers =</span> value)</span></code></pre></div>
<pre><code>## # A tibble: 12 × 4
##    type       country     year     numbers
##    &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;      &lt;dbl&gt;
##  1 population Afghanistan 1999    19987071
##  2 population Afghanistan 2000    20595360
##  3 cases      Afghanistan 1999         745
##  4 cases      Afghanistan 2000        2666
##  5 population Brazil      1999   172006362
##  6 population Brazil      2000   174594898
##  7 cases      Brazil      1999       37737
##  8 cases      Brazil      2000       80488
##  9 population China       1999  1272915272
## 10 population China       2000  1280428583
## 11 cases      China       1999      212258
## 12 cases      China       2000      213766</code></pre>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="data.html#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># the name you want to change the column to is on the left of the equal sign</span></span>
<span id="cb41-2"><a href="data.html#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="co"># the current name of the column is on the right of the equal sign</span></span></code></pre></div>
<p>Piping is an operator that exists within R that allows for much quicker workflow while coding. It is a powerful tool that can be used with almost any function in the tidyverse. I am going to use the rename function as an example of how to use it. In the code chunk below, I use the rename function to change the names of two columns.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="data.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co">#this can be done with multiple columns</span></span>
<span id="cb42-2"><a href="data.html#cb42-2" aria-hidden="true" tabindex="-1"></a>longer_table <span class="sc">|&gt;</span>  <span class="co"># the extra line is unnecessary but improves the readability of your code</span></span>
<span id="cb42-3"><a href="data.html#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">numbers =</span> value, <span class="at">time =</span> year)</span></code></pre></div>
<pre><code>## # A tibble: 12 × 4
##    type       country     time     numbers
##    &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;      &lt;dbl&gt;
##  1 population Afghanistan 1999    19987071
##  2 population Afghanistan 2000    20595360
##  3 cases      Afghanistan 1999         745
##  4 cases      Afghanistan 2000        2666
##  5 population Brazil      1999   172006362
##  6 population Brazil      2000   174594898
##  7 cases      Brazil      1999       37737
##  8 cases      Brazil      2000       80488
##  9 population China       1999  1272915272
## 10 population China       2000  1280428583
## 11 cases      China       1999      212258
## 12 cases      China       2000      213766</code></pre>
<p>The piping operator allows me to use the output of <code>longer_table</code> and use it as the data parameter for the next function, in this case the <code>rename()</code> function. The most useful part of the piping operator is that it allows you to chain multiple functions together, each accepting as the data parameter the output from the last code before the last piping operator. The code chunk below demonstrates this by both pivoting and renaming <code>longer_table</code> using the piping operator. From this point forward, I will be using examples of piping when demonstrating new concepts.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="data.html#cb44-1" aria-hidden="true" tabindex="-1"></a>longer_table <span class="sc">|&gt;</span></span>
<span id="cb44-2"><a href="data.html#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>( <span class="at">names_from =</span> type, <span class="at">values_from =</span> value) <span class="sc">|&gt;</span> </span>
<span id="cb44-3"><a href="data.html#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">pop =</span> population, <span class="at">time =</span> year)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
##   country     time         pop  cases
##   &lt;chr&gt;       &lt;chr&gt;      &lt;dbl&gt;  &lt;dbl&gt;
## 1 Afghanistan 1999    19987071    745
## 2 Afghanistan 2000    20595360   2666
## 3 Brazil      1999   172006362  37737
## 4 Brazil      2000   174594898  80488
## 5 China       1999  1272915272 212258
## 6 China       2000  1280428583 213766</code></pre>
</div>
<div id="filtering-data" class="section level3 hasAnchor" number="3.4.4">
<h3><span class="header-section-number">3.4.4</span> Filtering Data<a href="data.html#filtering-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Filtering allows you to look at the subset of a data frame. It keeps rows that match a conditional statement (logical expression covered in Chapter 1). This can be done according to a single or multiple conditions. This is done through the <code>filter(data, conditions)</code> function in the tidyverse. The code chunk below filters Table 1, restricting it to only data pertaining to Afghanistan. This shows how it can be very useful when dealing with categorical variables.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="data.html#cb46-1" aria-hidden="true" tabindex="-1"></a>table1 <span class="sc">|&gt;</span></span>
<span id="cb46-2"><a href="data.html#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">&quot;Afghanistan&quot;</span>) <span class="co"># need to use a double equals sign for conditional expressions</span></span></code></pre></div>
<pre><code>## # A tibble: 2 × 4
##   country      year cases population
##   &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt;
## 1 Afghanistan  1999   745   19987071
## 2 Afghanistan  2000  2666   20595360</code></pre>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="data.html#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># the match on the right side of the equals sign must be the same data type as the column referenced</span></span></code></pre></div>
<p>It is also very useful when dealing with numeric variables as well. The code chunk below demonstrates simple and more complex numeric filters. The conditional statements can be combine using <code>&amp;</code> (and) and <code>|</code> (or) operators. While this simple example restricts the data frame to only one row, this function is much more powerful in large and aggregated data sets.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="data.html#cb49-1" aria-hidden="true" tabindex="-1"></a>table1 <span class="sc">|&gt;</span> <span class="fu">filter</span>(population <span class="sc">&gt;</span> <span class="dv">20000000</span>) </span></code></pre></div>
<pre><code>## # A tibble: 5 × 4
##   country      year  cases population
##   &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt;
## 1 Afghanistan  2000   2666   20595360
## 2 Brazil       1999  37737  172006362
## 3 Brazil       2000  80488  174504898
## 4 China        1999 212258 1272915272
## 5 China        2000 213766 1280428583</code></pre>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="data.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># only keeps rows where population is greater than twenty million</span></span>
<span id="cb51-2"><a href="data.html#cb51-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-3"><a href="data.html#cb51-3" aria-hidden="true" tabindex="-1"></a>table1 <span class="sc">|&gt;</span> <span class="fu">filter</span>(population <span class="sc">&lt;</span> <span class="dv">20000000</span> <span class="sc">|</span> population <span class="sc">&gt;</span> <span class="dv">1000000000</span>)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 4
##   country      year  cases population
##   &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt;
## 1 Afghanistan  1999    745   19987071
## 2 China        1999 212258 1272915272
## 3 China        2000 213766 1280428583</code></pre>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="data.html#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># when using the | operator, if one or both of the conditionals evaluates to true,</span></span>
<span id="cb53-2"><a href="data.html#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="co"># then the whole statement evaluates as true and the row is kept</span></span>
<span id="cb53-3"><a href="data.html#cb53-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-4"><a href="data.html#cb53-4" aria-hidden="true" tabindex="-1"></a>table1 <span class="sc">|&gt;</span> <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">&quot;Afghanistan&quot;</span> <span class="sc">&amp;</span> year <span class="sc">==</span> <span class="dv">2000</span>)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 4
##   country      year cases population
##   &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt;
## 1 Afghanistan  2000  2666   20595360</code></pre>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="data.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># when using the &amp; operator, both conditionals must be true for the whole</span></span>
<span id="cb55-2"><a href="data.html#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="co"># statement to evaluate as true and the row is kept</span></span></code></pre></div>
</div>
<div id="grouping-and-summarizing-data" class="section level3 hasAnchor" number="3.4.5">
<h3><span class="header-section-number">3.4.5</span> Grouping and Summarizing Data<a href="data.html#grouping-and-summarizing-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The summary function allows the creation of summary statistics of the data. These tables are vitally important in analysis and can be crucial elements of analysis that back up claims in written submitted work.</p>
</div>
<div id="joining-data-sets" class="section level3 hasAnchor" number="3.4.6">
<h3><span class="header-section-number">3.4.6</span> Joining Data Sets<a href="data.html#joining-data-sets" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There can be cases when two different data sets contain variables you want to analyze in context with each other. This requires that you merge the data using a key variable, a variable or collection of variables that are the same between both data sets and uniquely identify observations.</p>
</div>
</div>
<div id="saving-files" class="section level2 hasAnchor" number="3.5">
<h2><span class="header-section-number">3.5</span> Saving Files<a href="data.html#saving-files" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Saving data frames allows you to save a snapshot of the data as you are going through your analysis. This can be useful when cleaning data. Often you will not need all the data as given or will have to alter the data to make it work with the tools for analysis. In the previous section, I discussed what clean data is and how to clean your data using the tools of the tidyverse. It is still important to preserve the data as you received it for reference later on and to prevent deletion of data that you are unable to recover. By having the original file saved as is, you are always able to go back and retrace your steps in cleaning the data from the original formatting.</p>
<div id="saving-data-frames" class="section level3 hasAnchor" number="3.5.1">
<h3><span class="header-section-number">3.5.1</span> Saving Data Frames<a href="data.html#saving-data-frames" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Saving data frames can be very useful to reference your dataset in the desired and clean format, as well as for saving summary tables of the data or your own custom tables for later display. For saving these types of files, I recommend saving them as RDS files, as they are the easiest for R to quickly read and then allow you to display the results in whatever format you wish. The code chunk below create a sample data frame called object to save as an RDS file and then uses the <code>saveRDS()</code> function to save the file.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="data.html#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># This creates a sample data frame to save as an RDS file</span></span>
<span id="cb56-2"><a href="data.html#cb56-2" aria-hidden="true" tabindex="-1"></a>object <span class="ot">=</span> <span class="fu">tibble</span>(</span>
<span id="cb56-3"><a href="data.html#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">a =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>),</span>
<span id="cb56-4"><a href="data.html#cb56-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">b =</span> <span class="fu">c</span>(<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;c&#39;</span>, <span class="st">&#39;d&#39;</span>, <span class="st">&#39;e&#39;</span>)</span>
<span id="cb56-5"><a href="data.html#cb56-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb56-6"><a href="data.html#cb56-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-7"><a href="data.html#cb56-7" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(object, <span class="at">file =</span> <span class="st">&quot;file_name.rds&quot;</span>) <span class="co"># the first parameter is the object you want to save</span></span>
<span id="cb56-8"><a href="data.html#cb56-8" aria-hidden="true" tabindex="-1"></a><span class="co"># in the file name it is important to end it with .rds so the computer knows what type of file it is</span></span></code></pre></div>
<p>To reload these files into R, or call them in another document, use the <code>readRDS()</code> as shown below:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="data.html#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">readRDS</span>(<span class="st">&quot;file_name.rds&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 2
##       a b    
##   &lt;dbl&gt; &lt;chr&gt;
## 1     1 a    
## 2     2 b    
## 3     3 c    
## 4     4 d    
## 5     5 e</code></pre>
</div>
<div id="saving-images" class="section level3 hasAnchor" number="3.5.2">
<h3><span class="header-section-number">3.5.2</span> Saving Images<a href="data.html#saving-images" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>THIS SECTION IS HAVING ISSUES: WHAT IS THE BEST WAY TO DO THIS?</p>
<p>Images should be saved in the png format for easy display. This can be done easily using the png package. A png can be referenced in markdown using this format: <code>![alt text](figures/img.png)</code> This line should not be coded within a chunk, it should be part of the actual markdown document itself. The alt text is what you want to caption the image. The code chunk below shows how to save a png. To create something to save, I have graphed the sample tibble from the previous section. The data for this plot does not refer to anything so please don’t use this as an example of how to make graphs This is a demonstration of how to save these for later reference. Subsequent sections will cover how to approach making graphs using the ggplot2 package and extensions.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="data.html#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(png)</span>
<span id="cb59-2"><a href="data.html#cb59-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-3"><a href="data.html#cb59-3" aria-hidden="true" tabindex="-1"></a>(image <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> object) <span class="sc">+</span> </span>
<span id="cb59-4"><a href="data.html#cb59-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> a, <span class="at">y =</span> b)))</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="data.html#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co">#writePNG(image, target = &quot;file_name.png&quot;)</span></span>
<span id="cb60-2"><a href="data.html#cb60-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-3"><a href="data.html#cb60-3" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(image, <span class="at">file =</span> <span class="st">&quot;file_name.png&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="data-sources" class="section level2 hasAnchor" number="3.6">
<h2><span class="header-section-number">3.6</span> Data Sources<a href="data.html#data-sources" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="ipums" class="section level3 hasAnchor" number="3.6.1">
<h3><span class="header-section-number">3.6.1</span> IPUMS<a href="data.html#ipums" class="anchor-section" aria-label="Anchor link to header"></a></h3>
</div>
<div id="tidycensus" class="section level3 hasAnchor" number="3.6.2">
<h3><span class="header-section-number">3.6.2</span> Tidycensus<a href="data.html#tidycensus" class="anchor-section" aria-label="Anchor link to header"></a></h3>
</div>
<div id="scraping" class="section level3 hasAnchor" number="3.6.3">
<h3><span class="header-section-number">3.6.3</span> Scraping<a href="data.html#scraping" class="anchor-section" aria-label="Anchor link to header"></a></h3>
</div>
</div>
<div id="conclusion-1" class="section level2 hasAnchor" number="3.7">
<h2><span class="header-section-number">3.7</span> Conclusion<a href="data.html#conclusion-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Extra? example of how to look up documentation</p>

<div id="refs" class="references csl-bib-body hanging-indent">
<div class="csl-entry">
Wickham, Hadley, Mine Çetinkaya-Rundel, and Garett Grolemund. <em>R for Data Science</em>. 2nd ed., 2023.
</div>
</div>
</div>
</div>






<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-r4ds" class="csl-entry">
Wickham, Hadley, Mine Çetinkaya-Rundel, and Garett Grolemund. <em>R for Data Science</em>. 2nd ed., 2023.
</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p><a href="#ref-r4ds" role="doc-biblioref">Wickham, Çetinkaya-Rundel, and Grolemund, <em>R for Data Science</em></a> this.<a href="data.html#fnref1" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="r-and-programming-basics.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>

<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2 Data | Data Wrangling and Visualization Guide</title>
  <meta name="description" content="This book is meant to provide a guide to those who have little to no experience in R and R studio to conceptions dealing with data and statistics. R is a powerful tool allowing highly customizable data visualization and offers many different formats and applications to users." />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="2 Data | Data Wrangling and Visualization Guide" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This book is meant to provide a guide to those who have little to no experience in R and R studio to conceptions dealing with data and statistics. R is a powerful tool allowing highly customizable data visualization and offers many different formats and applications to users." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2 Data | Data Wrangling and Visualization Guide" />
  
  <meta name="twitter:description" content="This book is meant to provide a guide to those who have little to no experience in R and R studio to conceptions dealing with data and statistics. R is a powerful tool allowing highly customizable data visualization and offers many different formats and applications to users." />
  

<meta name="author" content="Max Ricciardelli" />


<meta name="date" content="2023-07-28" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="programming_basics.html"/>
<link rel="next" href="data_viz.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="programming_basics.html"><a href="programming_basics.html"><i class="fa fa-check"></i><b>1</b> R and Programming Basics</a>
<ul>
<li class="chapter" data-level="1.1" data-path="programming_basics.html"><a href="programming_basics.html#projects"><i class="fa fa-check"></i><b>1.1</b> Projects</a></li>
<li class="chapter" data-level="1.2" data-path="programming_basics.html"><a href="programming_basics.html#code-chunks"><i class="fa fa-check"></i><b>1.2</b> Code Chunks</a></li>
<li class="chapter" data-level="1.3" data-path="programming_basics.html"><a href="programming_basics.html#packages_functions_files"><i class="fa fa-check"></i><b>1.3</b> Packages, Functions, File Structure, and File Paths</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="programming_basics.html"><a href="programming_basics.html#packages_functions"><i class="fa fa-check"></i><b>1.3.1</b> Packages and Functions</a></li>
<li class="chapter" data-level="1.3.2" data-path="programming_basics.html"><a href="programming_basics.html#installing_packages"><i class="fa fa-check"></i><b>1.3.2</b> Installing and Referencing Packages</a></li>
<li class="chapter" data-level="1.3.3" data-path="programming_basics.html"><a href="programming_basics.html#functions"><i class="fa fa-check"></i><b>1.3.3</b> Calling Functions</a></li>
<li class="chapter" data-level="1.3.4" data-path="programming_basics.html"><a href="programming_basics.html#working_directory"><i class="fa fa-check"></i><b>1.3.4</b> Changing the Working Directory</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="programming_basics.html"><a href="programming_basics.html#data_types"><i class="fa fa-check"></i><b>1.4</b> Objects, data, and types</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="programming_basics.html"><a href="programming_basics.html#math"><i class="fa fa-check"></i><b>1.4.1</b> Mathematical Operators</a></li>
<li class="chapter" data-level="1.4.2" data-path="programming_basics.html"><a href="programming_basics.html#objects"><i class="fa fa-check"></i><b>1.4.2</b> Objects</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="programming_basics.html"><a href="programming_basics.html#logical_operators"><i class="fa fa-check"></i><b>1.5</b> Logical Operators</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="programming_basics.html"><a href="programming_basics.html#boolean_operators"><i class="fa fa-check"></i><b>1.5.1</b> Boolean Operators</a></li>
<li class="chapter" data-level="1.5.2" data-path="programming_basics.html"><a href="programming_basics.html#numeric_operators"><i class="fa fa-check"></i><b>1.5.2</b> Numeric Operators</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="programming_basics.html"><a href="programming_basics.html#if_else"><i class="fa fa-check"></i><b>1.6</b> If Else Statements</a></li>
<li class="chapter" data-level="1.7" data-path="programming_basics.html"><a href="programming_basics.html#for_while"><i class="fa fa-check"></i><b>1.7</b> For and While loops</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="programming_basics.html"><a href="programming_basics.html#for_loops"><i class="fa fa-check"></i><b>1.7.1</b> For Loops</a></li>
<li class="chapter" data-level="1.7.2" data-path="programming_basics.html"><a href="programming_basics.html#while_loops"><i class="fa fa-check"></i><b>1.7.2</b> While Loops</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="programming_basics.html"><a href="programming_basics.html#original_functions"><i class="fa fa-check"></i><b>1.8</b> Writing your own functions</a></li>
<li class="chapter" data-level="1.9" data-path="programming_basics.html"><a href="programming_basics.html#learnr"><i class="fa fa-check"></i><b>1.9</b> Tutorials</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>2</b> Data</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data.html"><a href="data.html#data_frames"><i class="fa fa-check"></i><b>2.1</b> Data Frames</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="data.html"><a href="data.html#date_time"><i class="fa fa-check"></i><b>2.1.1</b> Date Time Objects</a></li>
<li class="chapter" data-level="2.1.2" data-path="data.html"><a href="data.html#factors"><i class="fa fa-check"></i><b>2.1.2</b> Factors</a></li>
<li class="chapter" data-level="2.1.3" data-path="data.html"><a href="data.html#subsetting-data-frames"><i class="fa fa-check"></i><b>2.1.3</b> Subsetting Data Frames</a></li>
<li class="chapter" data-level="2.1.4" data-path="data.html"><a href="data.html#displaying-data-frames-in-markdown"><i class="fa fa-check"></i><b>2.1.4</b> Displaying Data Frames in Markdown</a></li>
<li class="chapter" data-level="2.1.5" data-path="data.html"><a href="data.html#reference-saved-values-in-markdown"><i class="fa fa-check"></i><b>2.1.5</b> Reference Saved Values in Markdown</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="data.html"><a href="data.html#importing"><i class="fa fa-check"></i><b>2.2</b> Importing Data</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="data.html"><a href="data.html#csv"><i class="fa fa-check"></i><b>2.2.1</b> .csv Files</a></li>
<li class="chapter" data-level="2.2.2" data-path="data.html"><a href="data.html#excel_import"><i class="fa fa-check"></i><b>2.2.2</b> Microsoft Excel Files</a></li>
<li class="chapter" data-level="2.2.3" data-path="data.html"><a href="data.html#rds"><i class="fa fa-check"></i><b>2.2.3</b> RDS Files</a></li>
<li class="chapter" data-level="2.2.4" data-path="data.html"><a href="data.html#import_conclusion"><i class="fa fa-check"></i><b>2.2.4</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="data.html"><a href="data.html#saving"><i class="fa fa-check"></i><b>2.3</b> Saving Files</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="data.html"><a href="data.html#save_data_frames"><i class="fa fa-check"></i><b>2.3.1</b> Saving Data Frames</a></li>
<li class="chapter" data-level="2.3.2" data-path="data.html"><a href="data.html#save_misc"><i class="fa fa-check"></i><b>2.3.2</b> Saving Other File Types</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="data.html"><a href="data.html#cleaning_data"><i class="fa fa-check"></i><b>2.4</b> Cleaning Data and the Tidyverse</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="data.html"><a href="data.html#pivoting"><i class="fa fa-check"></i><b>2.4.1</b> Pivoting Data</a></li>
<li class="chapter" data-level="2.4.2" data-path="data.html"><a href="data.html#new_vars"><i class="fa fa-check"></i><b>2.4.2</b> Creating New Variables</a></li>
<li class="chapter" data-level="2.4.3" data-path="data.html"><a href="data.html#select"><i class="fa fa-check"></i><b>2.4.3</b> Selecting Columns</a></li>
<li class="chapter" data-level="2.4.4" data-path="data.html"><a href="data.html#rename"><i class="fa fa-check"></i><b>2.4.4</b> Renaming Variables and Piping</a></li>
<li class="chapter" data-level="2.4.5" data-path="data.html"><a href="data.html#filtering"><i class="fa fa-check"></i><b>2.4.5</b> Filtering Data</a></li>
<li class="chapter" data-level="2.4.6" data-path="data.html"><a href="data.html#summarize"><i class="fa fa-check"></i><b>2.4.6</b> Summarizing Data</a></li>
<li class="chapter" data-level="2.4.7" data-path="data.html"><a href="data.html#group_by"><i class="fa fa-check"></i><b>2.4.7</b> Grouping Data</a></li>
<li class="chapter" data-level="2.4.8" data-path="data.html"><a href="data.html#merge"><i class="fa fa-check"></i><b>2.4.8</b> Merging Data</a></li>
<li class="chapter" data-level="2.4.9" data-path="data.html"><a href="data.html#b.22"><i class="fa fa-check"></i><b>2.4.9</b> Working Example</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="data.html"><a href="data.html#data_sources"><i class="fa fa-check"></i><b>2.5</b> Data Sources</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="data.html"><a href="data.html#tidycensus"><i class="fa fa-check"></i><b>2.5.1</b> Tidycensus</a></li>
<li class="chapter" data-level="2.5.2" data-path="data.html"><a href="data.html#ipums"><i class="fa fa-check"></i><b>2.5.2</b> IPUMS</a></li>
<li class="chapter" data-level="2.5.3" data-path="data.html"><a href="data.html#gtrends"><i class="fa fa-check"></i><b>2.5.3</b> Google Trends</a></li>
<li class="chapter" data-level="2.5.4" data-path="data.html"><a href="data.html#scraping"><i class="fa fa-check"></i><b>2.5.4</b> Scraping</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="data.html"><a href="data.html#data_conclusion"><i class="fa fa-check"></i><b>2.6</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data_viz.html"><a href="data_viz.html"><i class="fa fa-check"></i><b>3</b> Data Vizualization</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data_viz.html"><a href="data_viz.html#graphics_grammar"><i class="fa fa-check"></i><b>3.1</b> The Grammar of Graphics</a></li>
<li class="chapter" data-level="3.2" data-path="data_viz.html"><a href="data_viz.html#aes"><i class="fa fa-check"></i><b>3.2</b> Aesthetics</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="data.html"><a href="data.html#color"><i class="fa fa-check"></i><b>3.2.1</b> Color</a></li>
<li class="chapter" data-level="3.2.2" data-path="data_viz.html"><a href="data_viz.html#shape"><i class="fa fa-check"></i><b>3.2.2</b> Shape</a></li>
<li class="chapter" data-level="3.2.3" data-path="data_viz.html"><a href="data_viz.html#size"><i class="fa fa-check"></i><b>3.2.3</b> Size</a></li>
<li class="chapter" data-level="3.2.4" data-path="data_viz.html"><a href="data_viz.html#shade"><i class="fa fa-check"></i><b>3.2.4</b> Shading</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="data_viz.html"><a href="data_viz.html#faceting"><i class="fa fa-check"></i><b>3.3</b> Faceting</a></li>
<li class="chapter" data-level="3.4" data-path="data_viz.html"><a href="data_viz.html#geoms"><i class="fa fa-check"></i><b>3.4</b> Geoms: Types of Plots</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="data_viz.html"><a href="data_viz.html#scatter"><i class="fa fa-check"></i><b>3.4.1</b> Scatter Plots</a></li>
<li class="chapter" data-level="3.4.2" data-path="data_viz.html"><a href="data_viz.html#line"><i class="fa fa-check"></i><b>3.4.2</b> Line Graphs</a></li>
<li class="chapter" data-level="3.4.3" data-path="data_viz.html"><a href="data_viz.html#histograms"><i class="fa fa-check"></i><b>3.4.3</b> Histograms and Frequency Polygons</a></li>
<li class="chapter" data-level="3.4.4" data-path="data_viz.html"><a href="data_viz.html#box_plots"><i class="fa fa-check"></i><b>3.4.4</b> Box Plots</a></li>
<li class="chapter" data-level="3.4.5" data-path="data_viz.html"><a href="data_viz.html#bar_charts"><i class="fa fa-check"></i><b>3.4.5</b> Bar Charts</a></li>
<li class="chapter" data-level="3.4.6" data-path="data_viz.html"><a href="data_viz.html#other_layers"><i class="fa fa-check"></i><b>3.4.6</b> Additional Geom Layers</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="data_viz.html"><a href="data_viz.html#custom_axes"><i class="fa fa-check"></i><b>3.5</b> Modifying Data and Axes</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="data_viz.html"><a href="data_viz.html#filter_plot"><i class="fa fa-check"></i><b>3.5.1</b> Filtering</a></li>
<li class="chapter" data-level="3.5.2" data-path="data_viz.html"><a href="data_viz.html#x_and_y_lim"><i class="fa fa-check"></i><b>3.5.2</b> <code>xlim()</code> and <code>ylim()</code></a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="data_viz.html"><a href="data_viz.html#titles"><i class="fa fa-check"></i><b>3.6</b> Titles</a></li>
<li class="chapter" data-level="3.7" data-path="data_viz.html"><a href="data_viz.html#time_series_plot"><i class="fa fa-check"></i><b>3.7</b> Plotting Time Series</a></li>
<li class="chapter" data-level="3.8" data-path="data_viz.html"><a href="data_viz.html#save_viz"><i class="fa fa-check"></i><b>3.8</b> Saving and Showing Graphics</a></li>
<li class="chapter" data-level="3.9" data-path="data_viz.html"><a href="data_viz.html#data_viz_conclusion"><i class="fa fa-check"></i><b>3.9</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="overview-of-additional-resources.html"><a href="overview-of-additional-resources.html"><i class="fa fa-check"></i>Overview of Additional Resources</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Wrangling and Visualization Guide</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">2</span> Data<a href="data.html#data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>This chapter explains how to deal with different types of data within R, as well as how to clean, manipulate, and save data. When we are dealing with data we will be using the object of a data frame to save the data within the temporary memory of R itself (shown in the environment). This chapter uses the packages <code>dplyr</code>, <code>forcats</code>, <code>tibble</code>, <code>readr</code>, and <code>lubridate</code>, which are all contained within the tidyverse. Additional packages outside of the tidyverse and mentioned as they are used. The installation and calling of the <code>tidyverse</code> is demonstrated in the code chunk below:</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="data.html#cb89-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<pre><code>## ── Attaching core tidyverse packages ──────────────────────────────────────────────────────── tidyverse 2.0.0 ──
## ✔ dplyr     1.1.1     ✔ readr     2.1.4
## ✔ forcats   1.0.0     ✔ stringr   1.5.0
## ✔ ggplot2   3.4.2     ✔ tibble    3.2.1
## ✔ lubridate 1.9.2     ✔ tidyr     1.3.0
## ✔ purrr     1.0.1     
## ── Conflicts ────────────────────────────────────────────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()
## ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
<p>The output from calling the tidyverse shows all of the different packages it loads into R at once and their most recent version. The core packages comprise a powerful suite of tools for importing, wrangling, and visualizing data.</p>
<div id="data_frames" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> Data Frames<a href="data.html#data_frames" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Within R itself, a typed data frame can be created in two different ways: using the <code>tibble()</code> or <code>tribble()</code> functions. Both functions do exactly the same thing using different syntax. The <code>tibble()</code> function uses the format <code>row = c(), row2 = c()</code>. The <code>tribble()</code> function uses a vertical format, with <code>~</code> denoting the row names. An example of how to the <code>tibble()</code> function is given in the code chunk below:</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="data.html#cb91-1" tabindex="-1"></a><span class="co"># the tibble function joins either manually set or referenced vectors of the same length into a data frame </span></span>
<span id="cb91-2"><a href="data.html#cb91-2" tabindex="-1"></a>(data_frame <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">row =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>,<span class="dv">10</span>), <span class="co"># row_name = vector(length 10)</span></span>
<span id="cb91-3"><a href="data.html#cb91-3" tabindex="-1"></a>                     <span class="at">color =</span> <span class="fu">c</span>(<span class="st">&#39;red&#39;</span>, <span class="st">&#39;blue&#39;</span>, <span class="st">&#39;yellow&#39;</span>, <span class="st">&#39;green&#39;</span>, <span class="st">&#39;purple&#39;</span>, <span class="st">&#39;orange&#39;</span>, <span class="st">&#39;magenta&#39;</span>, <span class="st">&#39;red&#39;</span>, <span class="st">&#39;purple&#39;</span>, <span class="st">&#39;orange&#39;</span>), </span>
<span id="cb91-4"><a href="data.html#cb91-4" tabindex="-1"></a>                     <span class="at">category =</span> <span class="fu">c</span>(<span class="st">&#39;warm&#39;</span>, <span class="st">&#39;cold&#39;</span>, <span class="st">&#39;warm&#39;</span>, <span class="st">&#39;cold&#39;</span>, <span class="st">&#39;cold&#39;</span>, <span class="st">&#39;warm&#39;</span>, <span class="st">&#39;warm&#39;</span>, <span class="st">&#39;warm&#39;</span>, <span class="st">&#39;cold&#39;</span>, <span class="st">&#39;warm&#39;</span>),</span>
<span id="cb91-5"><a href="data.html#cb91-5" tabindex="-1"></a>                     <span class="at">boolean =</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>))) </span></code></pre></div>
<pre><code>## # A tibble: 10 × 4
##      row color   category boolean
##    &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;    &lt;lgl&gt;  
##  1     1 red     warm     TRUE   
##  2     2 blue    cold     TRUE   
##  3     3 yellow  warm     FALSE  
##  4     4 green   cold     TRUE   
##  5     5 purple  cold     FALSE  
##  6     6 orange  warm     TRUE   
##  7     7 magenta warm     FALSE  
##  8     8 red     warm     FALSE  
##  9     9 purple  cold     TRUE   
## 10    10 orange  warm     TRUE</code></pre>
<p>Underneath the row name in <code>&lt;&gt;</code> is the data type of the column. <code>&lt;dbl&gt;</code> refers to double, <code>&lt;chr&gt;</code> refers to character, and <code>&lt;lgl&gt;</code> refers to logical. <code>&lt;dbl&gt;</code> is the standard data type for numbers and <code>&lt;chr&gt;</code> is the standard data type for text in R. <code>&lt;lgl&gt;</code> refers to a TRUE or FALSE value, usually called a Boolean in computer science. <code>&lt;int&gt;</code>, referring to integers, is another common data type. The rows must be the same length for the <code>tibble()</code> or <code>tribble()</code> function to run. Each row here has a length of 10. The function is surrounded in parentheses so the output prints. The code chunk below demonstrates how to use the <code>tribble()</code> function:</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="data.html#cb93-1" tabindex="-1"></a><span class="co"># the tribble identifies the column name on the first line with the ~ symbol</span></span>
<span id="cb93-2"><a href="data.html#cb93-2" tabindex="-1"></a>(data_frame2 <span class="ot">&lt;-</span> <span class="fu">tribble</span>(<span class="sc">~</span>row, <span class="sc">~</span>row2,</span>
<span id="cb93-3"><a href="data.html#cb93-3" tabindex="-1"></a>                       <span class="dv">1</span>,<span class="dv">2</span>, <span class="co">#subsequent rows going across are inputted underneath</span></span>
<span id="cb93-4"><a href="data.html#cb93-4" tabindex="-1"></a>                       <span class="dv">3</span>,<span class="dv">4</span>,</span>
<span id="cb93-5"><a href="data.html#cb93-5" tabindex="-1"></a>                       <span class="dv">5</span>,<span class="dv">6</span>,</span>
<span id="cb93-6"><a href="data.html#cb93-6" tabindex="-1"></a>                       <span class="dv">7</span>,<span class="dv">8</span> )) <span class="co"># this provides an alternative method to hand entering these </span></span></code></pre></div>
<pre><code>## # A tibble: 4 × 2
##     row  row2
##   &lt;dbl&gt; &lt;dbl&gt;
## 1     1     2
## 2     3     4
## 3     5     6
## 4     7     8</code></pre>
<p>It is important to make sure each column is the intended data type. Functions (especially mathematical ones) often require a certain data type as an input.</p>
<div id="date_time" class="section level3 hasAnchor" number="2.1.1">
<h3><span class="header-section-number">2.1.1</span> Date Time Objects<a href="data.html#date_time" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There is a special data type for dates and times available through the <code>lubridate</code> package. This package is automatically included in the tidyverse. There are three different data types associated with dates/times: a date data type signifying the day, month, and year (<code>&lt;date&gt;</code>); a time data type signifying the time within a day (<code>&lt;time&gt;</code>); and a date time which includes both (<code>&lt;dttm&gt;</code>). The code chunk below demonstrates how to use the <code>make_datetime()</code> function to create date time objects. Using this data type ensures that graphs over time are produced properly using ggplot2.</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="data.html#cb95-1" tabindex="-1"></a><span class="fu">make_datetime</span>(<span class="at">year =</span> <span class="dv">2020</span>, <span class="at">month =</span> <span class="dv">11</span>, <span class="at">day =</span> <span class="dv">25</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2020-11-25 UTC&quot;</code></pre>
<p>Often, one of the hardest parts of working with a new data set is correctly changing however they keep the date/time into a date time object. The lubridate package is able to create these objects with a variety of input formats, making this process much easier. The code chunk below demonstrates different methods of creating <code>&lt;dttm&gt;</code> objects. This is done through the <code>parse_date_time(x, orders)</code> function. The <code>orders</code> argument tells the function what format your date is in. A full list of different possible <code>orders</code> is available in the documentation for the function.</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="data.html#cb97-1" tabindex="-1"></a><span class="fu">parse_date_time</span>(<span class="st">&#39;2017-01-02&#39;</span>, <span class="at">orders =</span> <span class="st">&quot;ymd&quot;</span>) <span class="co">#year month day orders</span></span></code></pre></div>
<pre><code>## [1] &quot;2017-01-02 UTC&quot;</code></pre>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="data.html#cb99-1" tabindex="-1"></a><span class="fu">parse_date_time</span>(<span class="st">&quot;01/02/2017&quot;</span>, <span class="at">orders =</span> <span class="st">&quot;mdy&quot;</span>, <span class="at">tz =</span> <span class="st">&quot;UTC&quot;</span>) <span class="co"># month day year orders</span></span></code></pre></div>
<pre><code>## [1] &quot;2017-01-02 UTC&quot;</code></pre>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="data.html#cb101-1" tabindex="-1"></a><span class="co"># can specify a time zone as well</span></span>
<span id="cb101-2"><a href="data.html#cb101-2" tabindex="-1"></a><span class="fu">parse_date_time</span>(<span class="st">&quot;2 Jan 2017 10:00:00 PM&quot;</span>, <span class="at">orders =</span> <span class="st">&quot;dmy_HMS&quot;</span>) <span class="co">#year month day_hour minute second</span></span></code></pre></div>
<pre><code>## [1] &quot;2017-01-02 10:00:00 UTC&quot;</code></pre>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="data.html#cb103-1" tabindex="-1"></a><span class="co"># this function can also read full text and abbreviations</span></span></code></pre></div>
<p>One of the other really useful parts of lubridate date/time objects is the ability to refer to different components of a date time object. If you have a complete date time object, <code>year(date_time)</code> returns the year, <code>month(date_time)</code> returns the month, <code>mday(date_time)</code> returns the day of the month, <code>wday(date_time)</code> returns the day of the week, and the same for <code>hour(date_time)</code>, <code>minute(date_time)</code>, and <code>second(date_time)</code>. This will be used further in <a href="data_viz.html#data_viz">Chapter 3</a> in conjunction with visualizing time series.</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="data.html#cb104-1" tabindex="-1"></a>(today <span class="ot">&lt;-</span> <span class="fu">now</span>())</span></code></pre></div>
<pre><code>## [1] &quot;2023-07-28 12:10:51 EDT&quot;</code></pre>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="data.html#cb106-1" tabindex="-1"></a><span class="fu">year</span>(today)</span></code></pre></div>
<pre><code>## [1] 2023</code></pre>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="data.html#cb108-1" tabindex="-1"></a><span class="fu">month</span>(today)</span></code></pre></div>
<pre><code>## [1] 7</code></pre>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="data.html#cb110-1" tabindex="-1"></a><span class="fu">mday</span>(today)</span></code></pre></div>
<pre><code>## [1] 28</code></pre>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="data.html#cb112-1" tabindex="-1"></a><span class="fu">wday</span>(today)</span></code></pre></div>
<pre><code>## [1] 6</code></pre>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="data.html#cb114-1" tabindex="-1"></a><span class="fu">wday</span>(today, <span class="at">label=</span><span class="cn">TRUE</span>) <span class="co"># this returns a factor ordering the days of the week properly</span></span></code></pre></div>
<pre><code>## [1] Fri
## Levels: Sun &lt; Mon &lt; Tue &lt; Wed &lt; Thu &lt; Fri &lt; Sat</code></pre>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="data.html#cb116-1" tabindex="-1"></a><span class="fu">hour</span>(today)</span></code></pre></div>
<pre><code>## [1] 12</code></pre>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="data.html#cb118-1" tabindex="-1"></a><span class="fu">minute</span>(today)</span></code></pre></div>
<pre><code>## [1] 10</code></pre>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="data.html#cb120-1" tabindex="-1"></a><span class="fu">second</span>(today)</span></code></pre></div>
<pre><code>## [1] 51.14917</code></pre>
<p>For more in-depth information and examples concerning lubridate refer to the <a href="https://r4ds.had.co.nz/dates-and-times.html">Dates and Times chapter</a> of <em>R for Data Science</em>.<span class="citation"><a href="#fn24" class="footnote-ref" id="fnref24"><sup>24</sup></a></span> Additionally, looking at the documentation of the package is always helpful.</p>
</div>
<div id="factors" class="section level3 hasAnchor" number="2.1.2">
<h3><span class="header-section-number">2.1.2</span> Factors<a href="data.html#factors" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Factors are a specialized data type meant to deal with ordered categorical variables. Factors are available as part of the <code>forcats</code> package. This data type best applies to a character variable that has a specified order, such as months in a year.<span class="citation"><a href="#fn25" class="footnote-ref" id="fnref25"><sup>25</sup></a></span> To convert a simple string variable into a factor you must use the <code>factor()</code> function. The code chunk below shows an example of converting a character vector to a factor. The difference can be seen when the factor and character vectors are sorted. Factors are most useful within data frames. They give R a roadmap of how to value categorical variables properly, making graphing, filtering, and general analysis easier.</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="data.html#cb122-1" tabindex="-1"></a>mon <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Mar&quot;</span>, <span class="st">&quot;Apr&quot;</span>, <span class="st">&quot;Dec&quot;</span>, <span class="st">&quot;Feb&quot;</span>, <span class="st">&quot;Nov&quot;</span>, <span class="st">&quot;Jun&quot;</span>, <span class="st">&quot;Aug&quot;</span>, <span class="st">&quot;Jan&quot;</span>, <span class="st">&quot;Oct&quot;</span>, <span class="st">&quot;May&quot;</span>, <span class="st">&quot;Jul&quot;</span>, <span class="st">&quot;Sep&quot;</span>)</span>
<span id="cb122-2"><a href="data.html#cb122-2" tabindex="-1"></a>factor <span class="ot">&lt;-</span> <span class="fu">factor</span>(mon, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;Jan&quot;</span>, <span class="st">&quot;Feb&quot;</span>, <span class="st">&quot;Mar&quot;</span>, <span class="st">&quot;Apr&quot;</span>, <span class="st">&quot;May&quot;</span>, <span class="st">&quot;Jun&quot;</span>, </span>
<span id="cb122-3"><a href="data.html#cb122-3" tabindex="-1"></a>  <span class="st">&quot;Jul&quot;</span>, <span class="st">&quot;Aug&quot;</span>, <span class="st">&quot;Sep&quot;</span>, <span class="st">&quot;Oct&quot;</span>, <span class="st">&quot;Nov&quot;</span>, <span class="st">&quot;Dec&quot;</span>))</span>
<span id="cb122-4"><a href="data.html#cb122-4" tabindex="-1"></a><span class="fu">sort</span>(mon) <span class="co"># this output does not have any ordering so it does not sort properly</span></span></code></pre></div>
<pre><code>##  [1] &quot;Apr&quot; &quot;Aug&quot; &quot;Dec&quot; &quot;Feb&quot; &quot;Jan&quot; &quot;Jul&quot; &quot;Jun&quot; &quot;Mar&quot; &quot;May&quot; &quot;Nov&quot; &quot;Oct&quot; &quot;Sep&quot;</code></pre>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="data.html#cb124-1" tabindex="-1"></a><span class="fu">sort</span>(factor) <span class="co"># this output has the ordering for the months saved in the levels parameter</span></span></code></pre></div>
<pre><code>##  [1] Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec
## Levels: Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec</code></pre>
<p>For a more in-depth explanation of factors, refer to <a href="https://r4ds.had.co.nz/factors.html">Chapter 15: Factors</a> of <em>R for Data Science</em>.<span class="citation"><a href="#fn26" class="footnote-ref" id="fnref26"><sup>26</sup></a></span></p>
</div>
<div id="subsetting-data-frames" class="section level3 hasAnchor" number="2.1.3">
<h3><span class="header-section-number">2.1.3</span> Subsetting Data Frames<a href="data.html#subsetting-data-frames" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When working with data frames, such as <code>data_frame2</code> above, you may not want to reference the entire data frame. Often it is useful to just reference a column or element from a data frame. There are two main ways to do this. A column can be referenced by the name of the column using the following format: <code>data_frame$col_name</code>. The result is a vector containing the elements in the specified column. This is demonstrated in the code chunk below using <code>data_frame2</code>.</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="data.html#cb126-1" tabindex="-1"></a>data_frame2</span></code></pre></div>
<pre><code>## # A tibble: 4 × 2
##     row  row2
##   &lt;dbl&gt; &lt;dbl&gt;
## 1     1     2
## 2     3     4
## 3     5     6
## 4     7     8</code></pre>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="data.html#cb128-1" tabindex="-1"></a>data_frame2<span class="sc">$</span>row</span></code></pre></div>
<pre><code>## [1] 1 3 5 7</code></pre>
<p>While that is the simplest way to reference a column, it is also possible to reference a column or element within a column through its position. This can be done through the following general syntax: <code>data_frame[[col_index]][[row_index]]</code> or <code>data_frame[col_index, row_index]</code>. The syntax with the double brackets returns the element in its own data type, stripping it of its status as a data frame. Using the second syntax keeps its format as a tibble. The code chunk below demonstrates how to use both with <code>data_frame2</code>.</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="data.html#cb130-1" tabindex="-1"></a>data_frame2</span></code></pre></div>
<pre><code>## # A tibble: 4 × 2
##     row  row2
##   &lt;dbl&gt; &lt;dbl&gt;
## 1     1     2
## 2     3     4
## 3     5     6
## 4     7     8</code></pre>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="data.html#cb132-1" tabindex="-1"></a>data_frame2[[<span class="dv">1</span>]]</span></code></pre></div>
<pre><code>## [1] 1 3 5 7</code></pre>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="data.html#cb134-1" tabindex="-1"></a>data_frame2[[<span class="dv">1</span>]][[<span class="dv">1</span>]]</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="data.html#cb136-1" tabindex="-1"></a>data_frame2[<span class="dv">1</span>]</span></code></pre></div>
<pre><code>## # A tibble: 4 × 1
##     row
##   &lt;dbl&gt;
## 1     1
## 2     3
## 3     5
## 4     7</code></pre>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="data.html#cb138-1" tabindex="-1"></a>data_frame2[<span class="dv">1</span>,<span class="dv">1</span>]</span></code></pre></div>
<pre><code>## # A tibble: 1 × 1
##     row
##   &lt;dbl&gt;
## 1     1</code></pre>
</div>
<div id="displaying-data-frames-in-markdown" class="section level3 hasAnchor" number="2.1.4">
<h3><span class="header-section-number">2.1.4</span> Displaying Data Frames in Markdown<a href="data.html#displaying-data-frames-in-markdown" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The default format for displaying data frames in a final output is very limited. As seen in the example below, it prints it in machine output and does not display all rows if the data frame is too big.</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="data.html#cb140-1" tabindex="-1"></a>data_frame</span></code></pre></div>
<pre><code>## # A tibble: 10 × 4
##      row color   category boolean
##    &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;    &lt;lgl&gt;  
##  1     1 red     warm     TRUE   
##  2     2 blue    cold     TRUE   
##  3     3 yellow  warm     FALSE  
##  4     4 green   cold     TRUE   
##  5     5 purple  cold     FALSE  
##  6     6 orange  warm     TRUE   
##  7     7 magenta warm     FALSE  
##  8     8 red     warm     FALSE  
##  9     9 purple  cold     TRUE   
## 10    10 orange  warm     TRUE</code></pre>
<p>To create a more professional output for data frames, we use the <code>gt()</code> function from the <code>gt</code> package.</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="data.html#cb142-1" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb142-2"><a href="data.html#cb142-2" tabindex="-1"></a><span class="fu">gt</span>(data_frame)</span></code></pre></div>
<div id="ttnmruxvok" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#ttnmruxvok table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ttnmruxvok thead, #ttnmruxvok tbody, #ttnmruxvok tfoot, #ttnmruxvok tr, #ttnmruxvok td, #ttnmruxvok th {
  border-style: none;
}

#ttnmruxvok p {
  margin: 0;
  padding: 0;
}

#ttnmruxvok .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ttnmruxvok .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ttnmruxvok .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ttnmruxvok .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ttnmruxvok .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ttnmruxvok .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ttnmruxvok .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ttnmruxvok .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ttnmruxvok .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ttnmruxvok .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ttnmruxvok .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ttnmruxvok .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ttnmruxvok .gt_spanner_row {
  border-bottom-style: hidden;
}

#ttnmruxvok .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ttnmruxvok .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ttnmruxvok .gt_from_md > :first-child {
  margin-top: 0;
}

#ttnmruxvok .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ttnmruxvok .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ttnmruxvok .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ttnmruxvok .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ttnmruxvok .gt_row_group_first td {
  border-top-width: 2px;
}

#ttnmruxvok .gt_row_group_first th {
  border-top-width: 2px;
}

#ttnmruxvok .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ttnmruxvok .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ttnmruxvok .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ttnmruxvok .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ttnmruxvok .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ttnmruxvok .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ttnmruxvok .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#ttnmruxvok .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ttnmruxvok .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ttnmruxvok .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ttnmruxvok .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ttnmruxvok .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ttnmruxvok .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ttnmruxvok .gt_left {
  text-align: left;
}

#ttnmruxvok .gt_center {
  text-align: center;
}

#ttnmruxvok .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ttnmruxvok .gt_font_normal {
  font-weight: normal;
}

#ttnmruxvok .gt_font_bold {
  font-weight: bold;
}

#ttnmruxvok .gt_font_italic {
  font-style: italic;
}

#ttnmruxvok .gt_super {
  font-size: 65%;
}

#ttnmruxvok .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ttnmruxvok .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ttnmruxvok .gt_indent_1 {
  text-indent: 5px;
}

#ttnmruxvok .gt_indent_2 {
  text-indent: 10px;
}

#ttnmruxvok .gt_indent_3 {
  text-indent: 15px;
}

#ttnmruxvok .gt_indent_4 {
  text-indent: 20px;
}

#ttnmruxvok .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="row">row</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="color">color</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="category">category</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="boolean">boolean</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="row" class="gt_row gt_right">1</td>
<td headers="color" class="gt_row gt_left">red</td>
<td headers="category" class="gt_row gt_left">warm</td>
<td headers="boolean" class="gt_row gt_center">TRUE</td></tr>
    <tr><td headers="row" class="gt_row gt_right">2</td>
<td headers="color" class="gt_row gt_left">blue</td>
<td headers="category" class="gt_row gt_left">cold</td>
<td headers="boolean" class="gt_row gt_center">TRUE</td></tr>
    <tr><td headers="row" class="gt_row gt_right">3</td>
<td headers="color" class="gt_row gt_left">yellow</td>
<td headers="category" class="gt_row gt_left">warm</td>
<td headers="boolean" class="gt_row gt_center">FALSE</td></tr>
    <tr><td headers="row" class="gt_row gt_right">4</td>
<td headers="color" class="gt_row gt_left">green</td>
<td headers="category" class="gt_row gt_left">cold</td>
<td headers="boolean" class="gt_row gt_center">TRUE</td></tr>
    <tr><td headers="row" class="gt_row gt_right">5</td>
<td headers="color" class="gt_row gt_left">purple</td>
<td headers="category" class="gt_row gt_left">cold</td>
<td headers="boolean" class="gt_row gt_center">FALSE</td></tr>
    <tr><td headers="row" class="gt_row gt_right">6</td>
<td headers="color" class="gt_row gt_left">orange</td>
<td headers="category" class="gt_row gt_left">warm</td>
<td headers="boolean" class="gt_row gt_center">TRUE</td></tr>
    <tr><td headers="row" class="gt_row gt_right">7</td>
<td headers="color" class="gt_row gt_left">magenta</td>
<td headers="category" class="gt_row gt_left">warm</td>
<td headers="boolean" class="gt_row gt_center">FALSE</td></tr>
    <tr><td headers="row" class="gt_row gt_right">8</td>
<td headers="color" class="gt_row gt_left">red</td>
<td headers="category" class="gt_row gt_left">warm</td>
<td headers="boolean" class="gt_row gt_center">FALSE</td></tr>
    <tr><td headers="row" class="gt_row gt_right">9</td>
<td headers="color" class="gt_row gt_left">purple</td>
<td headers="category" class="gt_row gt_left">cold</td>
<td headers="boolean" class="gt_row gt_center">TRUE</td></tr>
    <tr><td headers="row" class="gt_row gt_right">10</td>
<td headers="color" class="gt_row gt_left">orange</td>
<td headers="category" class="gt_row gt_left">warm</td>
<td headers="boolean" class="gt_row gt_center">TRUE</td></tr>
  </tbody>
  
  
</table>
</div>
<p>The output is much more visually appealing and highly customizable. For example, the <code>tab_header()</code> function allows you to add a title and subtitle, as demonstrated below.</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="data.html#cb143-1" tabindex="-1"></a><span class="fu">gt</span>(data_frame) <span class="sc">|&gt;</span> <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">&quot;Data Title&quot;</span>, <span class="at">subtitle =</span> <span class="st">&quot;More Information&quot;</span>) <span class="co"># refer to piping operators</span></span></code></pre></div>
<div id="gjzhbcqsuw" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#gjzhbcqsuw table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#gjzhbcqsuw thead, #gjzhbcqsuw tbody, #gjzhbcqsuw tfoot, #gjzhbcqsuw tr, #gjzhbcqsuw td, #gjzhbcqsuw th {
  border-style: none;
}

#gjzhbcqsuw p {
  margin: 0;
  padding: 0;
}

#gjzhbcqsuw .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#gjzhbcqsuw .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#gjzhbcqsuw .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#gjzhbcqsuw .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#gjzhbcqsuw .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gjzhbcqsuw .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gjzhbcqsuw .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#gjzhbcqsuw .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#gjzhbcqsuw .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#gjzhbcqsuw .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#gjzhbcqsuw .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#gjzhbcqsuw .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#gjzhbcqsuw .gt_spanner_row {
  border-bottom-style: hidden;
}

#gjzhbcqsuw .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#gjzhbcqsuw .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#gjzhbcqsuw .gt_from_md > :first-child {
  margin-top: 0;
}

#gjzhbcqsuw .gt_from_md > :last-child {
  margin-bottom: 0;
}

#gjzhbcqsuw .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#gjzhbcqsuw .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#gjzhbcqsuw .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#gjzhbcqsuw .gt_row_group_first td {
  border-top-width: 2px;
}

#gjzhbcqsuw .gt_row_group_first th {
  border-top-width: 2px;
}

#gjzhbcqsuw .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gjzhbcqsuw .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#gjzhbcqsuw .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#gjzhbcqsuw .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gjzhbcqsuw .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#gjzhbcqsuw .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#gjzhbcqsuw .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#gjzhbcqsuw .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#gjzhbcqsuw .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#gjzhbcqsuw .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gjzhbcqsuw .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#gjzhbcqsuw .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#gjzhbcqsuw .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#gjzhbcqsuw .gt_left {
  text-align: left;
}

#gjzhbcqsuw .gt_center {
  text-align: center;
}

#gjzhbcqsuw .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#gjzhbcqsuw .gt_font_normal {
  font-weight: normal;
}

#gjzhbcqsuw .gt_font_bold {
  font-weight: bold;
}

#gjzhbcqsuw .gt_font_italic {
  font-style: italic;
}

#gjzhbcqsuw .gt_super {
  font-size: 65%;
}

#gjzhbcqsuw .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#gjzhbcqsuw .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#gjzhbcqsuw .gt_indent_1 {
  text-indent: 5px;
}

#gjzhbcqsuw .gt_indent_2 {
  text-indent: 10px;
}

#gjzhbcqsuw .gt_indent_3 {
  text-indent: 15px;
}

#gjzhbcqsuw .gt_indent_4 {
  text-indent: 20px;
}

#gjzhbcqsuw .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
  <thead>
    <tr class="gt_heading">
      <td colspan="4" class="gt_heading gt_title gt_font_normal" style>Data Title</td>
    </tr>
    <tr class="gt_heading">
      <td colspan="4" class="gt_heading gt_subtitle gt_font_normal gt_bottom_border" style>More Information</td>
    </tr>
    <tr class="gt_col_headings">
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1" scope="col" id="row">row</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="color">color</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col" id="category">category</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1" scope="col" id="boolean">boolean</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td headers="row" class="gt_row gt_right">1</td>
<td headers="color" class="gt_row gt_left">red</td>
<td headers="category" class="gt_row gt_left">warm</td>
<td headers="boolean" class="gt_row gt_center">TRUE</td></tr>
    <tr><td headers="row" class="gt_row gt_right">2</td>
<td headers="color" class="gt_row gt_left">blue</td>
<td headers="category" class="gt_row gt_left">cold</td>
<td headers="boolean" class="gt_row gt_center">TRUE</td></tr>
    <tr><td headers="row" class="gt_row gt_right">3</td>
<td headers="color" class="gt_row gt_left">yellow</td>
<td headers="category" class="gt_row gt_left">warm</td>
<td headers="boolean" class="gt_row gt_center">FALSE</td></tr>
    <tr><td headers="row" class="gt_row gt_right">4</td>
<td headers="color" class="gt_row gt_left">green</td>
<td headers="category" class="gt_row gt_left">cold</td>
<td headers="boolean" class="gt_row gt_center">TRUE</td></tr>
    <tr><td headers="row" class="gt_row gt_right">5</td>
<td headers="color" class="gt_row gt_left">purple</td>
<td headers="category" class="gt_row gt_left">cold</td>
<td headers="boolean" class="gt_row gt_center">FALSE</td></tr>
    <tr><td headers="row" class="gt_row gt_right">6</td>
<td headers="color" class="gt_row gt_left">orange</td>
<td headers="category" class="gt_row gt_left">warm</td>
<td headers="boolean" class="gt_row gt_center">TRUE</td></tr>
    <tr><td headers="row" class="gt_row gt_right">7</td>
<td headers="color" class="gt_row gt_left">magenta</td>
<td headers="category" class="gt_row gt_left">warm</td>
<td headers="boolean" class="gt_row gt_center">FALSE</td></tr>
    <tr><td headers="row" class="gt_row gt_right">8</td>
<td headers="color" class="gt_row gt_left">red</td>
<td headers="category" class="gt_row gt_left">warm</td>
<td headers="boolean" class="gt_row gt_center">FALSE</td></tr>
    <tr><td headers="row" class="gt_row gt_right">9</td>
<td headers="color" class="gt_row gt_left">purple</td>
<td headers="category" class="gt_row gt_left">cold</td>
<td headers="boolean" class="gt_row gt_center">TRUE</td></tr>
    <tr><td headers="row" class="gt_row gt_right">10</td>
<td headers="color" class="gt_row gt_left">orange</td>
<td headers="category" class="gt_row gt_left">warm</td>
<td headers="boolean" class="gt_row gt_center">TRUE</td></tr>
  </tbody>
  
  
</table>
</div>
<p>For more information on how to further customize tables using the functions available in <code>gt</code>, refer to the documentation <a href="https://gt.rstudio.com">here</a>. This package is structured similarly to <code>ggplot2</code>, so I recommend reading <a href="data_viz.html#data_viz">Chapter 3</a> and then exploring the customization options this package has to offer.</p>
</div>
<div id="reference-saved-values-in-markdown" class="section level3 hasAnchor" number="2.1.5">
<h3><span class="header-section-number">2.1.5</span> Reference Saved Values in Markdown<a href="data.html#reference-saved-values-in-markdown" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When creating a markdown document for final submission, you will have to submit statistics you generated through your analysis from saved data frames and discuss them within the text of your R markdown document. To avoid errors with copying numbers, I recommend referencing the saved values directly so R markdown exactly replicates them without error. This can be done through the syntax “r value_name” surrounded by backwards apostrophes. It is also possible to run functions within inline code:
“r round(value_name, digits = 5)”. Refer to the bottom left of the first page of the R markdown cheat sheet for further explanation and examples.</p>
</div>
</div>
<div id="importing" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> Importing Data<a href="data.html#importing" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Importing data is an important skill. Data comes in a variety of formats which you must transfer into a data frame format to use with R. One option is to hand-type the data into the <code>tibble</code> or <code>tribble</code> function, but this is very time consuming. It is only easiest to use these functions with small data sets or a data frame you want to display as a table.</p>
<div id="csv" class="section level3 hasAnchor" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> .csv Files<a href="data.html#csv" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Most often, data you encounter will be available in the .csv format (comma-separated-values). The <code>readr</code> package in the tidyverse provides the function, <code>read_csv()</code> for reading .csv files into a data frame. An example of how to use the <code>read_csv()</code> function is given in the chunk below:</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="data.html#cb144-1" tabindex="-1"></a>(data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">here</span>(<span class="st">&quot;sample.csv&quot;</span>)))</span></code></pre></div>
<pre><code>## Rows: 156 Columns: 2
## ── Column specification ────────────────────────────────────────────────────────────────────────────────────────
## Delimiter: &quot;,&quot;
## chr (1): Date
## dbl (1): Sales
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
<pre><code>## # A tibble: 156 × 2
##    Date   Sales
##    &lt;chr&gt;  &lt;dbl&gt;
##  1 Jan-92  1519
##  2 Feb-92  1551
##  3 Mar-92  1606
##  4 Apr-92  1686
##  5 May-92  1834
##  6 Jun-92  1786
##  7 Jul-92  1924
##  8 Aug-92  1874
##  9 Sep-92  1781
## 10 Oct-92  1894
## # ℹ 146 more rows</code></pre>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="data.html#cb147-1" tabindex="-1"></a><span class="co"># this reads a csv detailing monthly liquor sales data</span></span></code></pre></div>
<p>The sample.csv file is from <em>Introduction to Time Series Analysis and Forecasting</em>.<span class="citation"><a href="#fn27" class="footnote-ref" id="fnref27"><sup>27</sup></a></span></p>
</div>
<div id="excel_import" class="section level3 hasAnchor" number="2.2.2">
<h3><span class="header-section-number">2.2.2</span> Microsoft Excel Files<a href="data.html#excel_import" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Excel has changed the way they save their files over time, leading to a variety of formats for excel files (e.g. .xls, .xlsx). Excel files can always be saved as .csv files within excel and then read as a .csv file into R. If you want to directly read the excel file, the <code>readxl</code> package offers the ability to read an excel file directly into a data frame through the <code>read_excel(file_name)</code> function. This function can read almost any form of excel file, regardless of what generation the file type is. The code chunk below shows an example of how to do this. Note: to just use the file name the file must be in the current working directory (by default this is the project folder).</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="data.html#cb148-1" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb148-2"><a href="data.html#cb148-2" tabindex="-1"></a><span class="fu">read_excel</span>(<span class="st">&quot;sample.xlsx&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 156 × 2
##    Date                Sales
##    &lt;dttm&gt;              &lt;dbl&gt;
##  1 1992-01-01 00:00:00  1519
##  2 1992-02-01 00:00:00  1551
##  3 1992-03-01 00:00:00  1606
##  4 1992-04-01 00:00:00  1686
##  5 1992-05-01 00:00:00  1834
##  6 1992-06-01 00:00:00  1786
##  7 1992-07-01 00:00:00  1924
##  8 1992-08-01 00:00:00  1874
##  9 1992-09-01 00:00:00  1781
## 10 1992-10-01 00:00:00  1894
## # ℹ 146 more rows</code></pre>
<p>If the excel file has multiple sheets, the <code>sheet =</code> parameter allows you to select the sheet by setting it equal to the name of the sheet (make sure to put the name in quotes so it is a string). If the excel file has blank lines at the beginning of the file you can use the <code>skip =</code> parameter to skip lines before it starts to read it. This is often necessary to ensure the .csv file correctly reads into a data frame.</p>
<p>Excel has a very useful feature where it can read tables from pictures or screenshots of textbooks. This feature is found in the data tab of the top bar of excel and identified in the screenshot below. Simply select the file of a picture of the table and excel will try to import it. It isn’t perfect but often get most of it right. Always check the data for errors when using this, it still saves a ton of time.</p>
<p><img src="figures/data_ss.png" /></p>
</div>
<div id="rds" class="section level3 hasAnchor" number="2.2.3">
<h3><span class="header-section-number">2.2.3</span> RDS Files<a href="data.html#rds" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>.RDS files are meant for use in R and are a good way to save and read data frames. They quickly load into R and are the format I use to save my files when I call them in a separate R markdown document. The <code>read_rds()</code> function reads existing RDS files into a data frame.</p>
</div>
<div id="import_conclusion" class="section level3 hasAnchor" number="2.2.4">
<h3><span class="header-section-number">2.2.4</span> Conclusion<a href="data.html#import_conclusion" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Almost any data you encounter will be in either one of these three formats or able to be converted into one of these formats using methods discussed above. Getting a data file into a data frame is the first step in analyzing data and can sometimes be the most tedious if you are not able to troubleshoot the process effectively. Always check you data!</p>
</div>
</div>
<div id="saving" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> Saving Files<a href="data.html#saving" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Saving data frames allows you to save a snapshot of the data as you are going through your analysis. This can be useful after cleaning data. Often you will not need all the data in a data set or will have to alter the data. In <a href="data.html#cleaning_data">the next section</a>, I discuss what clean data is and how to clean your data using the tools of the tidyverse. It is still important to preserve the original data as you received it for reference later on and to prevent deletion of data that you are unable to recover. By having the original file saved, you are always able to go back and retrace your steps from the original formatting to the clean data.</p>
<div id="save_data_frames" class="section level3 hasAnchor" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> Saving Data Frames<a href="data.html#save_data_frames" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Saving data frames can be very useful to reference your data set in the desired format, as well as for saving tables for display in your final document. I recommend saving data frames as RDS files, as they are the easiest for R to quickly read and allow you to display the results in whatever format you wish. In the code chunk below, I create a sample data frame called <code>object</code> and then use the <code>saveRDS()</code> function to save the file.</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="data.html#cb150-1" tabindex="-1"></a><span class="co"># This creates a sample data frame to save as an RDS file</span></span>
<span id="cb150-2"><a href="data.html#cb150-2" tabindex="-1"></a>object <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb150-3"><a href="data.html#cb150-3" tabindex="-1"></a>  <span class="at">a =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>),</span>
<span id="cb150-4"><a href="data.html#cb150-4" tabindex="-1"></a>  <span class="at">b =</span> <span class="fu">c</span>(<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;c&#39;</span>, <span class="st">&#39;d&#39;</span>, <span class="st">&#39;e&#39;</span>)</span>
<span id="cb150-5"><a href="data.html#cb150-5" tabindex="-1"></a>)</span>
<span id="cb150-6"><a href="data.html#cb150-6" tabindex="-1"></a></span>
<span id="cb150-7"><a href="data.html#cb150-7" tabindex="-1"></a><span class="fu">saveRDS</span>(object, <span class="at">file =</span> <span class="st">&quot;file_name.rds&quot;</span>) <span class="co"># the first parameter is the object you want to save</span></span>
<span id="cb150-8"><a href="data.html#cb150-8" tabindex="-1"></a><span class="co"># in the file name it is important to end it with .rds so the computer knows what type of file it is</span></span></code></pre></div>
<p>To reload these files into R, or call them in another document, use the <code>readRDS()</code> as shown below:</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="data.html#cb151-1" tabindex="-1"></a><span class="fu">readRDS</span>(<span class="st">&quot;file_name.rds&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 2
##       a b    
##   &lt;dbl&gt; &lt;chr&gt;
## 1     1 a    
## 2     2 b    
## 3     3 c    
## 4     4 d    
## 5     5 e</code></pre>
</div>
<div id="save_misc" class="section level3 hasAnchor" number="2.3.2">
<h3><span class="header-section-number">2.3.2</span> Saving Other File Types<a href="data.html#save_misc" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There are a variety of objects you may want to save in your code for later reference, either in a written work or another document. Saving visualizations as .png files will be covered in <a href="data_viz.html#save_viz">Chapter 3</a>. For other types of objects that you may want to save, look on the internet for the best file type and function to use to save them. Always check that the saved file is as you intended it to be and that it can be read into the format you desire.</p>
</div>
</div>
<div id="cleaning_data" class="section level2 hasAnchor" number="2.4">
<h2><span class="header-section-number">2.4</span> Cleaning Data and the Tidyverse<a href="data.html#cleaning_data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>What is clean data? For data to be clean there must be a clear pattern of organization to how the data is stored. This concept is also commonly referred to as tidy data. There are three general rules for making a data set tidy:<span class="citation"><a href="#fn28" class="footnote-ref" id="fnref28"><sup>28</sup></a></span></p>
<ul>
<li>Each variable must have its own column</li>
<li>Each observation must have its own row</li>
<li>Each value must have its own cell</li>
</ul>
<p>Table 1, shown below, is an example of a tidy data set. Each observation (pertaining to a country and a year) has its own row. Additionally, each variable has its own column. This table is included in the tidyverse as an example and used in <em>R for Data Science</em>.<span class="citation"><a href="#fn29" class="footnote-ref" id="fnref29"><sup>29</sup></a></span></p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="data.html#cb153-1" tabindex="-1"></a>table1</span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
##   country      year  cases population
##   &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt;
## 1 Afghanistan  1999    745   19987071
## 2 Afghanistan  2000   2666   20595360
## 3 Brazil       1999  37737  172006362
## 4 Brazil       2000  80488  174504898
## 5 China        1999 212258 1272915272
## 6 China        2000 213766 1280428583</code></pre>
<p>Often, data when you receive it will not be in this format. The first step after successfully importing data is to clean it. The tidyverse offers functions that allow you to rearrange data frames into a format better suited for analysis and plotting. I will go through several examples of different common problems with data, and what functions are best to fix them.</p>
<div id="pivoting" class="section level3 hasAnchor" number="2.4.1">
<h3><span class="header-section-number">2.4.1</span> Pivoting Data<a href="data.html#pivoting" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>First, we will discuss the two functions used for pivoting data. The code chunk below shows a sample data frame that has multiple issues. Instead of having a column for each variable, the variable “type” indicates the kind of value in that row. Columns 3 and 4, which both contain doubles, indicate the year of the values in those columns. These are examples of common problems with data organization.</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="data.html#cb155-1" tabindex="-1"></a>sample_table</span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
##   type       country         `1999`     `2000`
##   &lt;chr&gt;      &lt;chr&gt;            &lt;dbl&gt;      &lt;dbl&gt;
## 1 population Afghanistan   19987071   20595360
## 2 cases      Afghanistan        745       2666
## 3 population Brazil       172006362  174594898
## 4 cases      Brazil           37737      80488
## 5 population China       1272915272 1280428583
## 6 cases      China           212258     213766</code></pre>
<p>These two functions in dplyr each solve different problems:</p>
<ul>
<li><code>pivot_longer()</code>
<ul>
<li>this adds rows making the data frame longer</li>
<li>this corrects the issue with the columns pertaining to the year of the corresponding value</li>
<li>parameters: <code>pivot_longer(data, cols, names_to = "", values_to = "")</code>
<ul>
<li>data: data frame to pivot</li>
<li>cols: columns to pivot</li>
<li>names_to: name of new column containing the column names of the pivoted columns</li>
<li>values_to: name of new column containing the values of the pivoted columns</li>
</ul></li>
</ul></li>
</ul>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="data.html#cb157-1" tabindex="-1"></a>(longer_table <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(<span class="at">data =</span> sample_table, <span class="at">cols =</span> <span class="fu">c</span>(<span class="st">`</span><span class="at">1999</span><span class="st">`</span>, <span class="st">`</span><span class="at">2000</span><span class="st">`</span>), <span class="at">names_to =</span> <span class="st">&quot;year&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;value&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 12 × 4
##    type       country     year       value
##    &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;      &lt;dbl&gt;
##  1 population Afghanistan 1999    19987071
##  2 population Afghanistan 2000    20595360
##  3 cases      Afghanistan 1999         745
##  4 cases      Afghanistan 2000        2666
##  5 population Brazil      1999   172006362
##  6 population Brazil      2000   174594898
##  7 cases      Brazil      1999       37737
##  8 cases      Brazil      2000       80488
##  9 population China       1999  1272915272
## 10 population China       2000  1280428583
## 11 cases      China       1999      212258
## 12 cases      China       2000      213766</code></pre>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="data.html#cb159-1" tabindex="-1"></a><span class="co"># the data = and cols = are not necessary as they are required parameters</span></span></code></pre></div>
<ul>
<li><code>pivot_wider()</code>
<ul>
<li>this adds columns making the data frame wider</li>
<li>this corrects the issue that each variable does not have its own column</li>
<li>parameters: <code>pivot_wider(data, names from = "", values_from = "")</code>
<ul>
<li>data: data frame to pivot</li>
<li>names_from: column whose values are the names of the new columns</li>
<li>values_from: column whose values are the values of the new columns</li>
</ul></li>
</ul></li>
</ul>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="data.html#cb160-1" tabindex="-1"></a><span class="co"># this pivots the data frame after the longer pivot above</span></span>
<span id="cb160-2"><a href="data.html#cb160-2" tabindex="-1"></a><span class="fu">pivot_wider</span>(longer_table, <span class="at">names_from =</span> type, <span class="at">values_from =</span> value )</span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
##   country     year  population  cases
##   &lt;chr&gt;       &lt;chr&gt;      &lt;dbl&gt;  &lt;dbl&gt;
## 1 Afghanistan 1999    19987071    745
## 2 Afghanistan 2000    20595360   2666
## 3 Brazil      1999   172006362  37737
## 4 Brazil      2000   174594898  80488
## 5 China       1999  1272915272 212258
## 6 China       2000  1280428583 213766</code></pre>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="data.html#cb162-1" tabindex="-1"></a><span class="co"># note without an assignment operator (&lt;-) this is not saved</span></span></code></pre></div>
<p>For more information and examples about pivoting refer to the <em>Stanford Data Wrangling</em> chapter on <a href="https://dcl-wrangle.stanford.edu/pivot-basic.html">basic pivoting</a> and the <em>R for Data Science</em> Chapter on <a href="https://r4ds.had.co.nz/tidy-data.html">tidy data</a>.<span class="citation"><a href="#fn30" class="footnote-ref" id="fnref30"><sup>30</sup></a></span> <span class="citation"><a href="#fn31" class="footnote-ref" id="fnref31"><sup>31</sup></a></span></p>
</div>
<div id="new_vars" class="section level3 hasAnchor" number="2.4.2">
<h3><span class="header-section-number">2.4.2</span> Creating New Variables<a href="data.html#new_vars" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When working with data you will want to create new variables. These can be numeric variables that combine values already present in the data or categorical variables that differentiate the values in some way. The <code>mutate()</code> function is used to create a new variable using the following syntax: <code>mutate(data, new_var = formula)</code>.</p>
<p>This first example, in the code chunk below, demonstrates how to make a new numeric variable using a formula consisting of two existing numeric variables. This creates a new column, <code>cases_per_cap</code>, that is the number of cases divided by the total population that year. The second new variable, <code>ln_pop</code>, demonstrates how to apply a function to an existing numeric variable to create a new variable. In this case the function is the natural log.</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="data.html#cb163-1" tabindex="-1"></a><span class="fu">mutate</span>(table1, <span class="at">cases_per_cap =</span> cases <span class="sc">/</span> population, <span class="at">ln_pop =</span> <span class="fu">log</span>(population))</span></code></pre></div>
<pre><code>## # A tibble: 6 × 6
##   country      year  cases population cases_per_cap ln_pop
##   &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt;         &lt;dbl&gt;  &lt;dbl&gt;
## 1 Afghanistan  1999    745   19987071     0.0000373   16.8
## 2 Afghanistan  2000   2666   20595360     0.000129    16.8
## 3 Brazil       1999  37737  172006362     0.000219    19.0
## 4 Brazil       2000  80488  174504898     0.000461    19.0
## 5 China        1999 212258 1272915272     0.000167    21.0
## 6 China        2000 213766 1280428583     0.000167    21.0</code></pre>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="data.html#cb165-1" tabindex="-1"></a><span class="co"># on the left side of the equal sign is the name of the new variables</span></span>
<span id="cb165-2"><a href="data.html#cb165-2" tabindex="-1"></a><span class="co"># on the right side is the new variable</span></span></code></pre></div>
<p>You can use vectors outside of the data frame to create new variables, but must be careful when doing so. The vector must be the same length as the data frame. It is important to note that the first element will belong to the observation in the first row. You must make sure that you are assigning values to the correct observation, otherwise your data will become corrupted. The code chunk below shows an example of using a vector to create a new variable in table 1.</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="data.html#cb166-1" tabindex="-1"></a>new_var <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="fl">2.1</span>, <span class="fl">3.4</span>, <span class="fl">0.3</span>, <span class="fl">0.78</span>, <span class="fl">1.64</span>) <span class="co"># these values do not correspond to anything</span></span>
<span id="cb166-2"><a href="data.html#cb166-2" tabindex="-1"></a><span class="fu">mutate</span>(table1, <span class="at">value =</span> new_var) <span class="co"># the new var has a length of 6 so this works</span></span></code></pre></div>
<pre><code>## # A tibble: 6 × 5
##   country      year  cases population value
##   &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt; &lt;dbl&gt;
## 1 Afghanistan  1999    745   19987071  0.5 
## 2 Afghanistan  2000   2666   20595360  2.1 
## 3 Brazil       1999  37737  172006362  3.4 
## 4 Brazil       2000  80488  174504898  0.3 
## 5 China        1999 212258 1272915272  0.78
## 6 China        2000 213766 1280428583  1.64</code></pre>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="data.html#cb168-1" tabindex="-1"></a><span class="co"># any other length would cause an error</span></span></code></pre></div>
<p>This next example demonstrates how to use the <code>case_when()</code> function. <code>case_when()</code> is very useful when creating a new categorical variable based on already existing numeric variables. This function does not have any explicit parameters. Instead, there can be any number of logical statements (e.g. cases / population &lt; 0.0001) with a corresponding <code>~</code>. <code>~</code> creates a formula in R. On the other side of the <code>~</code> is the value of the variable if the logical statement evaluates to <code>TRUE</code>. Make sure only one formula evaluates as <code>TRUE</code> for each observation. The code chunk below demonstrates the syntax for <code>case_when()</code>.</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="data.html#cb169-1" tabindex="-1"></a>(new_table <span class="ot">&lt;-</span> <span class="fu">mutate</span>(table1, <span class="at">cases_per_cap =</span> <span class="fu">case_when</span>(cases <span class="sc">/</span> population <span class="sc">&lt;</span> <span class="fl">0.0001</span> <span class="sc">~</span> <span class="st">&quot;low&quot;</span>,</span>
<span id="cb169-2"><a href="data.html#cb169-2" tabindex="-1"></a>                                     cases <span class="sc">/</span> population  <span class="sc">&gt;=</span> <span class="fl">0.0001</span> <span class="sc">&amp;</span> cases <span class="sc">/</span> population <span class="sc">&lt;</span> <span class="fl">0.0003</span> <span class="sc">~</span> <span class="st">&quot;medium&quot;</span>,</span>
<span id="cb169-3"><a href="data.html#cb169-3" tabindex="-1"></a>                                     cases <span class="sc">/</span> population <span class="sc">&gt;=</span> <span class="fl">0.0003</span> <span class="sc">~</span> <span class="st">&quot;high&quot;</span>)))</span></code></pre></div>
<pre><code>## # A tibble: 6 × 5
##   country      year  cases population cases_per_cap
##   &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;        
## 1 Afghanistan  1999    745   19987071 low          
## 2 Afghanistan  2000   2666   20595360 medium       
## 3 Brazil       1999  37737  172006362 medium       
## 4 Brazil       2000  80488  174504898 high         
## 5 China        1999 212258 1272915272 medium       
## 6 China        2000 213766 1280428583 medium</code></pre>
<p>This example creates a new variable that designates the level of cases per capita as low, medium, or high. The new variable is a string instead of numeric. This variable is perfect for using the factor data type, as it has inherent ordered levels. The code chunk below demonstrates how to turn this variable into a factor. When using mutate, if you set something equal to a variable name already in use, it will overwrite that variable.</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="data.html#cb171-1" tabindex="-1"></a><span class="fu">mutate</span>(new_table, <span class="at">cases_per_cap =</span> <span class="fu">factor</span>(cases_per_cap, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;low&quot;</span>, <span class="st">&quot;medium&quot;</span>, <span class="st">&quot;high&quot;</span>)))</span></code></pre></div>
<pre><code>## # A tibble: 6 × 5
##   country      year  cases population cases_per_cap
##   &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt; &lt;fct&gt;        
## 1 Afghanistan  1999    745   19987071 low          
## 2 Afghanistan  2000   2666   20595360 medium       
## 3 Brazil       1999  37737  172006362 medium       
## 4 Brazil       2000  80488  174504898 high         
## 5 China        1999 212258 1272915272 medium       
## 6 China        2000 213766 1280428583 medium</code></pre>
</div>
<div id="select" class="section level3 hasAnchor" number="2.4.3">
<h3><span class="header-section-number">2.4.3</span> Selecting Columns<a href="data.html#select" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In some cases, an imported data frame will have more variables than you need for your analysis. The <code>select(data, cols)</code> function allows you to choose columns to keep in a new data frame. The data parameter is the data frame to select columns from, and <code>cols</code> is the name of the columns to select. The code chunk below demonstrates how to use the select function using <code>table1</code> as an example. <code>select()</code> is very useful when cleaning data as it allows you to easily discard data you do not need. You should always keep an original copy of the data as you received it in case you need to re-do your work. Save a modified data frame with a different name containing only the variables you need for analysis.</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="data.html#cb173-1" tabindex="-1"></a><span class="fu">select</span>(table1, country, year) <span class="co"># this returns only the country and year columns</span></span></code></pre></div>
<pre><code>## # A tibble: 6 × 2
##   country      year
##   &lt;chr&gt;       &lt;dbl&gt;
## 1 Afghanistan  1999
## 2 Afghanistan  2000
## 3 Brazil       1999
## 4 Brazil       2000
## 5 China        1999
## 6 China        2000</code></pre>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="data.html#cb175-1" tabindex="-1"></a><span class="co"># the everything function allows you to move the selected columns to the front </span></span>
<span id="cb175-2"><a href="data.html#cb175-2" tabindex="-1"></a><span class="co"># of the data frame, keeping all columns</span></span>
<span id="cb175-3"><a href="data.html#cb175-3" tabindex="-1"></a><span class="fu">select</span>(table1, year, population, <span class="fu">everything</span>())</span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
##    year population country      cases
##   &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;        &lt;dbl&gt;
## 1  1999   19987071 Afghanistan    745
## 2  2000   20595360 Afghanistan   2666
## 3  1999  172006362 Brazil       37737
## 4  2000  174504898 Brazil       80488
## 5  1999 1272915272 China       212258
## 6  2000 1280428583 China       213766</code></pre>
</div>
<div id="rename" class="section level3 hasAnchor" number="2.4.4">
<h3><span class="header-section-number">2.4.4</span> Renaming Variables and Piping<a href="data.html#rename" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>It is very important to make sure the names of the columns comply with the naming conventions of coding discussed in <a href="programming_basics.html#projects">Section 2.1</a> and clearly indicate the variable to someone else. Most data sets have a code book that lists each variable and what it represents, but these names sometimes do not effectively identify the variable without having to refer to the code book. To rename the columns in a data frame use the <code>rename()</code> function available with the tidyverse. The code chunk below demonstrates this using <code>table1</code>.</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="data.html#cb177-1" tabindex="-1"></a><span class="fu">rename</span>(table1, <span class="at">nation =</span> country)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
##   nation       year  cases population
##   &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt;
## 1 Afghanistan  1999    745   19987071
## 2 Afghanistan  2000   2666   20595360
## 3 Brazil       1999  37737  172006362
## 4 Brazil       2000  80488  174504898
## 5 China        1999 212258 1272915272
## 6 China        2000 213766 1280428583</code></pre>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="data.html#cb179-1" tabindex="-1"></a><span class="co"># the name you want to change the column to is on the left of the equal sign</span></span>
<span id="cb179-2"><a href="data.html#cb179-2" tabindex="-1"></a><span class="co"># the current name of the column is on the right of the equal sign</span></span></code></pre></div>
<p>Piping is an operator within R that allows the chaining of functions. It is a powerful tool that can be used with almost any function in the tidyverse. The output from the code before the pipe is inputted into the function immediately after it. I use the rename function as an example of how to use it. In the code chunk below, I use the rename function to change the names of two columns.</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="data.html#cb180-1" tabindex="-1"></a><span class="co">#this can be done with multiple columns</span></span>
<span id="cb180-2"><a href="data.html#cb180-2" tabindex="-1"></a>table1 <span class="sc">|&gt;</span>  <span class="co"># the extra line is unnecessary but improves the readability of your code</span></span>
<span id="cb180-3"><a href="data.html#cb180-3" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">nation =</span> country, <span class="at">pos_test =</span> cases)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
##   nation       year pos_test population
##   &lt;chr&gt;       &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt;
## 1 Afghanistan  1999      745   19987071
## 2 Afghanistan  2000     2666   20595360
## 3 Brazil       1999    37737  172006362
## 4 Brazil       2000    80488  174504898
## 5 China        1999   212258 1272915272
## 6 China        2000   213766 1280428583</code></pre>
<p>The piping operator allows me to use the output of <code>table1</code> as the data parameter for the next function, in this case the <code>rename()</code> function. The code chunk below demonstrates this by both pivoting and renaming <code>longer_table</code> using the piping operator. From this point forward, I will be using piping when demonstrating new concepts.</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="data.html#cb182-1" tabindex="-1"></a>longer_table <span class="sc">|&gt;</span></span>
<span id="cb182-2"><a href="data.html#cb182-2" tabindex="-1"></a>  <span class="fu">pivot_wider</span>( <span class="at">names_from =</span> type, <span class="at">values_from =</span> value) <span class="sc">|&gt;</span> </span>
<span id="cb182-3"><a href="data.html#cb182-3" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">pop =</span> population, <span class="at">time =</span> year)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
##   country     time         pop  cases
##   &lt;chr&gt;       &lt;chr&gt;      &lt;dbl&gt;  &lt;dbl&gt;
## 1 Afghanistan 1999    19987071    745
## 2 Afghanistan 2000    20595360   2666
## 3 Brazil      1999   172006362  37737
## 4 Brazil      2000   174594898  80488
## 5 China       1999  1272915272 212258
## 6 China       2000  1280428583 213766</code></pre>
</div>
<div id="filtering" class="section level3 hasAnchor" number="2.4.5">
<h3><span class="header-section-number">2.4.5</span> Filtering Data<a href="data.html#filtering" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Filtering allows you to look at the subset of a data frame. It keeps rows that match a conditional statement (covered in <a href="programming_basics.html#logical_operators">Chapter 1</a>). The syntax is as follows: <code>filter(data, condition)</code>. The code chunk below filters Table 1, restricting it to only data pertaining to Afghanistan. This demonstrates how it can be very useful when dealing with categorical variables.</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="data.html#cb184-1" tabindex="-1"></a>table1 <span class="sc">|&gt;</span></span>
<span id="cb184-2"><a href="data.html#cb184-2" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">&quot;Afghanistan&quot;</span>) <span class="co"># need to use a double equals sign for conditional expressions</span></span></code></pre></div>
<pre><code>## # A tibble: 2 × 4
##   country      year cases population
##   &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt;
## 1 Afghanistan  1999   745   19987071
## 2 Afghanistan  2000  2666   20595360</code></pre>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="data.html#cb186-1" tabindex="-1"></a><span class="co"># the match on the right side of the equals sign must be the same data type as the column referenced</span></span></code></pre></div>
<p>It is also very useful when dealing with numeric variables as well. The code chunk below demonstrates simple and more complex numeric filters. Simple conditional statements can be combined using <code>&amp;</code> (and) and <code>|</code> (or) operators.</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="data.html#cb187-1" tabindex="-1"></a>table1 <span class="sc">|&gt;</span> <span class="fu">filter</span>(population <span class="sc">&gt;</span> <span class="dv">20000000</span>) </span></code></pre></div>
<pre><code>## # A tibble: 5 × 4
##   country      year  cases population
##   &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt;
## 1 Afghanistan  2000   2666   20595360
## 2 Brazil       1999  37737  172006362
## 3 Brazil       2000  80488  174504898
## 4 China        1999 212258 1272915272
## 5 China        2000 213766 1280428583</code></pre>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="data.html#cb189-1" tabindex="-1"></a><span class="co"># only keeps rows where population is greater than twenty million</span></span>
<span id="cb189-2"><a href="data.html#cb189-2" tabindex="-1"></a>table1 <span class="sc">|&gt;</span> <span class="fu">filter</span>(population <span class="sc">&lt;</span> <span class="dv">20000000</span> <span class="sc">|</span> population <span class="sc">&gt;</span> <span class="dv">1000000000</span>)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 4
##   country      year  cases population
##   &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt;
## 1 Afghanistan  1999    745   19987071
## 2 China        1999 212258 1272915272
## 3 China        2000 213766 1280428583</code></pre>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="data.html#cb191-1" tabindex="-1"></a><span class="co"># when using the | operator, if one or both of the conditionals evaluates to true,</span></span>
<span id="cb191-2"><a href="data.html#cb191-2" tabindex="-1"></a><span class="co"># then the whole statement evaluates as true and the row is kept</span></span>
<span id="cb191-3"><a href="data.html#cb191-3" tabindex="-1"></a>table1 <span class="sc">|&gt;</span> <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">&quot;Afghanistan&quot;</span> <span class="sc">&amp;</span> year <span class="sc">==</span> <span class="dv">2000</span>)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 4
##   country      year cases population
##   &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt;
## 1 Afghanistan  2000  2666   20595360</code></pre>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="data.html#cb193-1" tabindex="-1"></a><span class="co"># when using the &amp; operator, both conditionals must be true for the whole</span></span>
<span id="cb193-2"><a href="data.html#cb193-2" tabindex="-1"></a><span class="co"># statement to evaluate as true and the row is kept</span></span></code></pre></div>
<p>The <code>filter()</code> function is wonderful for selecting subsets of data, but it does not allow you to reorder the rows according to a variable. For this we use the <code>arrange()</code> function. The basic syntax for <code>arrange()</code> is shown in the code chunk below. The first example shows the default ascending order the <code>arrange()</code> function uses. The second example shows how to instead use descending order by wrapping the column in the <code>desc()</code> function. The third example demonstrates what happens when multiple variables are included in the <code>arrange()</code> function. The function arranges according to the first variable and then without violating the arrangement of the first variable arranges according to the second, and so on. The final two examples show how arrange deals with characters. The most important difference between <code>filter()</code> and <code>arrange()</code> is that <code>filter()</code> loses observations when <code>arrange()</code> keeps all observations but just reorders them.</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="data.html#cb194-1" tabindex="-1"></a>table1 <span class="sc">|&gt;</span> <span class="fu">arrange</span>(year) <span class="co"># by default it arranges year in ascending order</span></span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
##   country      year  cases population
##   &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt;
## 1 Afghanistan  1999    745   19987071
## 2 Brazil       1999  37737  172006362
## 3 China        1999 212258 1272915272
## 4 Afghanistan  2000   2666   20595360
## 5 Brazil       2000  80488  174504898
## 6 China        2000 213766 1280428583</code></pre>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="data.html#cb196-1" tabindex="-1"></a>table1 <span class="sc">|&gt;</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(year)) <span class="co"># arranges year in descending order</span></span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
##   country      year  cases population
##   &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt;
## 1 Afghanistan  2000   2666   20595360
## 2 Brazil       2000  80488  174504898
## 3 China        2000 213766 1280428583
## 4 Afghanistan  1999    745   19987071
## 5 Brazil       1999  37737  172006362
## 6 China        1999 212258 1272915272</code></pre>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="data.html#cb198-1" tabindex="-1"></a>table1 <span class="sc">|&gt;</span> <span class="fu">arrange</span>(year, <span class="fu">desc</span>(population)) </span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
##   country      year  cases population
##   &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt;
## 1 China        1999 212258 1272915272
## 2 Brazil       1999  37737  172006362
## 3 Afghanistan  1999    745   19987071
## 4 China        2000 213766 1280428583
## 5 Brazil       2000  80488  174504898
## 6 Afghanistan  2000   2666   20595360</code></pre>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="data.html#cb200-1" tabindex="-1"></a><span class="co"># first arranges by year (ascending) and then by population (descending)</span></span>
<span id="cb200-2"><a href="data.html#cb200-2" tabindex="-1"></a>table1 <span class="sc">|&gt;</span> <span class="fu">arrange</span>(country) <span class="co"># arranges in alphabetical order</span></span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
##   country      year  cases population
##   &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt;
## 1 Afghanistan  1999    745   19987071
## 2 Afghanistan  2000   2666   20595360
## 3 Brazil       1999  37737  172006362
## 4 Brazil       2000  80488  174504898
## 5 China        1999 212258 1272915272
## 6 China        2000 213766 1280428583</code></pre>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="data.html#cb202-1" tabindex="-1"></a>table1 <span class="sc">|&gt;</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(country)) <span class="co"># arranges in reverse alphabetical order</span></span></code></pre></div>
<pre><code>## # A tibble: 6 × 4
##   country      year  cases population
##   &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt;
## 1 China        1999 212258 1272915272
## 2 China        2000 213766 1280428583
## 3 Brazil       1999  37737  172006362
## 4 Brazil       2000  80488  174504898
## 5 Afghanistan  1999    745   19987071
## 6 Afghanistan  2000   2666   20595360</code></pre>
</div>
<div id="summarize" class="section level3 hasAnchor" number="2.4.6">
<h3><span class="header-section-number">2.4.6</span> Summarizing Data<a href="data.html#summarize" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>summarize()</code> function allows the creation of summary tables of the data. These tables are a crucial element of analysis. The function can be called either through <code>summarize()</code> or <code>summarise()</code>. Both do the exact same thing. The code chunk below shows an example displaying the mean of population, the mean the number of cases, and a count of the number of observations that go into each statistic.</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="data.html#cb204-1" tabindex="-1"></a>table1 <span class="sc">|&gt;</span> <span class="fu">summarize</span>(<span class="at">pop_mean =</span> <span class="fu">mean</span>(population), <span class="fu">mean</span>(cases), <span class="at">count =</span> <span class="fu">n</span>())</span></code></pre></div>
<pre><code>## # A tibble: 1 × 3
##     pop_mean `mean(cases)` count
##        &lt;dbl&gt;         &lt;dbl&gt; &lt;int&gt;
## 1 490072924.        91277.     6</code></pre>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="data.html#cb206-1" tabindex="-1"></a><span class="co"># count shows the number of rows using the n() function</span></span></code></pre></div>
<p>A common problem is determining the unique values of a categorical variable. The code chunk below demonstrates how to do this using the <code>reframe()</code> and <code>unique()</code> functions. This method only works with categorical variables. An alternative way to do this is shown in the next section using the <code>group_by()</code> and <code>summarize()</code> functions.</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="data.html#cb207-1" tabindex="-1"></a>table1 <span class="sc">|&gt;</span> <span class="fu">reframe</span>(<span class="fu">unique</span>(country))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 1
##   `unique(country)`
##   &lt;chr&gt;            
## 1 Afghanistan      
## 2 Brazil           
## 3 China</code></pre>
</div>
<div id="group_by" class="section level3 hasAnchor" number="2.4.7">
<h3><span class="header-section-number">2.4.7</span> Grouping Data<a href="data.html#group_by" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When dealing with data that has categorical variables, it makes sense to analyze the data in context of each group within the categorical variable. This can be done through the <code>group_by()</code> function. <code>group_by()</code> on its own does not have any affect. It must be combined with another function and only works on categorical variables. The code chunk below demonstrates how it can be applied to countries in table1. When used in conjunction, it groups all observations with the same country and gives stats for each country instead of the data in totality as shown above. This function has the additional benefit of showing all possible values for the country categorical variable when used in conjunction with <code>summarize()</code>.</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="data.html#cb209-1" tabindex="-1"></a>table1 <span class="sc">|&gt;</span></span>
<span id="cb209-2"><a href="data.html#cb209-2" tabindex="-1"></a>  <span class="fu">group_by</span>(country) <span class="sc">|&gt;</span></span>
<span id="cb209-3"><a href="data.html#cb209-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">mean</span>(cases))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
##   country     `mean(cases)`
##   &lt;chr&gt;               &lt;dbl&gt;
## 1 Afghanistan         1706.
## 2 Brazil             59112.
## 3 China             213012</code></pre>
</div>
<div id="merge" class="section level3 hasAnchor" number="2.4.8">
<h3><span class="header-section-number">2.4.8</span> Merging Data<a href="data.html#merge" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Often, for analysis it will make sense to combine data from different sources to allow for a greater scope of analysis. This process is called merging data. To merge a data set with another one they must be relational. This is done through matching keys: variables that uniquely identify observations.<span class="citation"><a href="#fn32" class="footnote-ref" id="fnref32"><sup>32</sup></a></span> There are two types of keys:<span class="citation"><a href="#fn33" class="footnote-ref" id="fnref33"><sup>33</sup></a></span></p>
<ul>
<li>primary key: uniquely identifies an observation in the original own data frame</li>
<li>foreign key: uniquely identifies an observation in the data frame to merge</li>
</ul>
<p>Keys are not mutually exclusive; a variable can be a primary and foreign key. If a data frame lacks a primary key, you may need to make one. This can be done using <code>mutate()</code> and <code>row_number()</code>: <code>mutate(data, unique_key = row_number())</code>.<span class="citation"><a href="#fn34" class="footnote-ref" id="fnref34"><sup>34</sup></a></span> This makes the row number into a variable uniquely identifying each observation. This is called a surrogate key.<span class="citation"><a href="#fn35" class="footnote-ref" id="fnref35"><sup>35</sup></a></span></p>
<p>There are two common types of merges:<span class="citation"><a href="#fn36" class="footnote-ref" id="fnref36"><sup>36</sup></a></span></p>
<ul>
<li>mutating joins: matches observations according to their keys and then adds new variables from the new data frame to the original one</li>
<li>filtering joins: filter observations from a data frame based on if they have a match in the second data frame</li>
</ul>
<p>There are other more advanced ways of merging data with complex filters that are not covered here. For information on those methods and a more complete explanation of this essential data science topic, refer to the <em>R for Data Science</em> chapter on <a href="https://r4ds.had.co.nz/relational-data.html#mutating-joins">relational data</a>.<span class="citation"><a href="#fn37" class="footnote-ref" id="fnref37"><sup>37</sup></a></span></p>
<p>There are two types of mutating joins:<span class="citation"><a href="#fn38" class="footnote-ref" id="fnref38"><sup>38</sup></a></span></p>
<ul>
<li>inner join - <code>inner_join(x, y, by = "key")</code>
<ul>
<li>matches pairs of observations whenever their keys are equal</li>
<li>unmatched observations are not included in the result</li>
</ul></li>
<li>outer join
<ul>
<li>keeps all observations that appear in either one or both data sets</li>
<li><code>left_join(x, y, by = "key")</code> keeps all of the observations in the original data (x)</li>
<li><code>right_join(x, y, by = "key")</code> keeps all of the observations in the new data (y)</li>
<li><code>full_join(x, y, by = "key")</code> keeps all observation in both tables</li>
</ul></li>
</ul>
<p>Below, I use four fictional data sets to demonstrate the mutating join functions discussed above.</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="data.html#cb211-1" tabindex="-1"></a>original <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">key =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>),</span>
<span id="cb211-2"><a href="data.html#cb211-2" tabindex="-1"></a>                   <span class="at">data =</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;e&quot;</span>),</span>
<span id="cb211-3"><a href="data.html#cb211-3" tabindex="-1"></a>                   <span class="at">nums =</span> <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">110</span>, <span class="dv">120</span>, <span class="dv">130</span>, <span class="dv">140</span>))</span>
<span id="cb211-4"><a href="data.html#cb211-4" tabindex="-1"></a>  </span>
<span id="cb211-5"><a href="data.html#cb211-5" tabindex="-1"></a>new <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">new_key =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">6</span>,<span class="dv">7</span>),</span>
<span id="cb211-6"><a href="data.html#cb211-6" tabindex="-1"></a>              <span class="at">new_data =</span> <span class="fu">c</span>(<span class="dv">10</span>,<span class="dv">30</span>,<span class="dv">24</span>,<span class="dv">53</span>,<span class="dv">67</span>))</span>
<span id="cb211-7"><a href="data.html#cb211-7" tabindex="-1"></a></span>
<span id="cb211-8"><a href="data.html#cb211-8" tabindex="-1"></a>duplicate <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">key =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>),</span>
<span id="cb211-9"><a href="data.html#cb211-9" tabindex="-1"></a>                    <span class="at">data =</span> <span class="fu">c</span>(<span class="st">&quot;May&quot;</span>, <span class="st">&quot;Jul&quot;</span>, <span class="st">&quot;Nov&quot;</span>, <span class="st">&quot;Aug&quot;</span>, <span class="st">&quot;Jun&quot;</span>, <span class="st">&quot;Feb&quot;</span>, <span class="st">&quot;Dec&quot;</span>))</span>
<span id="cb211-10"><a href="data.html#cb211-10" tabindex="-1"></a></span>
<span id="cb211-11"><a href="data.html#cb211-11" tabindex="-1"></a>multiple <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">key =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>),</span>
<span id="cb211-12"><a href="data.html#cb211-12" tabindex="-1"></a>                   <span class="at">data =</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="st">&quot;d&quot;</span>, <span class="st">&quot;e&quot;</span>),</span>
<span id="cb211-13"><a href="data.html#cb211-13" tabindex="-1"></a>                   <span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;Mon&quot;</span>, <span class="st">&quot;Tues&quot;</span>, <span class="st">&quot;Wed&quot;</span>, <span class="st">&quot;Thurs&quot;</span>, <span class="st">&quot;Fri&quot;</span>))</span></code></pre></div>
<p>The first thing you may notice is that in <code>original</code> and <code>new</code>, the column that contains the key does not have the same name or values. To join these you can either first rename the key columns so they have the same name or use the syntax of the first example below. The subsequent examples demonstrate how to use the other types of join function.</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="data.html#cb212-1" tabindex="-1"></a><span class="co"># the piping operator fills in the x data parameter</span></span>
<span id="cb212-2"><a href="data.html#cb212-2" tabindex="-1"></a>original <span class="sc">|&gt;</span> <span class="fu">inner_join</span>(new, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;key&quot;</span> <span class="ot">=</span> <span class="st">&quot;new_key&quot;</span>)) <span class="co"># syntax without renaming</span></span></code></pre></div>
<pre><code>## # A tibble: 3 × 4
##     key data   nums new_data
##   &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt;    &lt;dbl&gt;
## 1     2 b       110       10
## 2     3 c       120       30
## 3     4 d       130       24</code></pre>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="data.html#cb214-1" tabindex="-1"></a><span class="co"># keeps only matching observations</span></span>
<span id="cb214-2"><a href="data.html#cb214-2" tabindex="-1"></a>new <span class="ot">&lt;-</span> new <span class="sc">|&gt;</span> <span class="fu">rename</span>(<span class="at">key =</span> new_key)</span>
<span id="cb214-3"><a href="data.html#cb214-3" tabindex="-1"></a>original <span class="sc">|&gt;</span> <span class="fu">left_join</span>(new, <span class="at">by =</span> <span class="st">&quot;key&quot;</span>) </span></code></pre></div>
<pre><code>## # A tibble: 5 × 4
##     key data   nums new_data
##   &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt;    &lt;dbl&gt;
## 1     1 a       100       NA
## 2     2 b       110       10
## 3     3 c       120       30
## 4     4 d       130       24
## 5     5 e       140       NA</code></pre>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="data.html#cb216-1" tabindex="-1"></a><span class="co"># keeps all observations in original (x) data frame</span></span>
<span id="cb216-2"><a href="data.html#cb216-2" tabindex="-1"></a>original <span class="sc">|&gt;</span> <span class="fu">right_join</span>(new, <span class="at">by =</span> <span class="st">&quot;key&quot;</span>) </span></code></pre></div>
<pre><code>## # A tibble: 5 × 4
##     key data   nums new_data
##   &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt;    &lt;dbl&gt;
## 1     2 b       110       10
## 2     3 c       120       30
## 3     4 d       130       24
## 4     6 &lt;NA&gt;     NA       53
## 5     7 &lt;NA&gt;     NA       67</code></pre>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="data.html#cb218-1" tabindex="-1"></a><span class="co"># keeps all observations in new (y) data frame</span></span>
<span id="cb218-2"><a href="data.html#cb218-2" tabindex="-1"></a>original <span class="sc">|&gt;</span> <span class="fu">full_join</span>(new, <span class="at">by =</span> <span class="st">&quot;key&quot;</span>) <span class="co"># keeps all observations in both</span></span></code></pre></div>
<pre><code>## # A tibble: 7 × 4
##     key data   nums new_data
##   &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt;    &lt;dbl&gt;
## 1     1 a       100       NA
## 2     2 b       110       10
## 3     3 c       120       30
## 4     4 d       130       24
## 5     5 e       140       NA
## 6     6 &lt;NA&gt;     NA       53
## 7     7 &lt;NA&gt;     NA       67</code></pre>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="data.html#cb220-1" tabindex="-1"></a><span class="co"># when there is not a corresponding observation in the match and the observation is kept, NA is used to fill it in as missing</span></span></code></pre></div>
<p>If the <code>by =</code> parameter is not specified, <code>by = NULL</code>. This means that the key will be all variables that the two data frames share in common. This is called a natural join. Most of the time it is good practice to specify the key or keys you want to use to prevent errors. You must always check the data after joining to make sure it is correct.</p>
<p>The <code>duplicate</code> data frame and the code chunk below demonstrate what happens when there are multiple observations that correspond to the same key. Usually, only one of the data frames will contain observations with duplicate matching observations. If this is not the case, then it there most likely is an error in one of the data frames.</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="data.html#cb221-1" tabindex="-1"></a>original <span class="sc">|&gt;</span> <span class="fu">inner_join</span>(duplicate, <span class="at">by =</span> <span class="st">&quot;key&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 7 × 4
##     key data.x  nums data.y
##   &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt; 
## 1     1 a        100 May   
## 2     2 b        110 Jul   
## 3     2 b        110 Nov   
## 4     2 b        110 Aug   
## 5     3 c        120 Jun   
## 6     4 d        130 Feb   
## 7     5 e        140 Dec</code></pre>
<p>When a variable is mutated in from the new (y) data frame that has the same name as one in the original (x) data frame, the variables are denoted <code>data.x</code> and <code>data.y</code>. This is demonstrated in the code chunk above.</p>
<p>Sometimes, one variable will not be able to uniquely identify observations as discussed previously. The <code>multiple</code> data frame and the example in the code chunk below demonstrate the syntax of using multiple variables to identify observations.</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="data.html#cb223-1" tabindex="-1"></a>original <span class="sc">|&gt;</span> <span class="fu">inner_join</span>(multiple, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;key&quot;</span>, <span class="st">&quot;data&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 5 × 4
##     key data   nums values
##   &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; 
## 1     1 a       100 Mon   
## 2     2 b       110 Tues  
## 3     3 c       120 Wed   
## 4     4 d       130 Thurs 
## 5     5 e       140 Fri</code></pre>
</div>
<div id="b.22" class="section level3 hasAnchor" number="2.4.9">
<h3><span class="header-section-number">2.4.9</span> Working Example<a href="data.html#b.22" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This section’s example is from Appendix B.22 of <em>Introduction to Time Series Analysis and Forecasting</em>.<span class="citation"><a href="#fn39" class="footnote-ref" id="fnref39"><sup>39</sup></a></span> In the code chunk below, I read in the data from an excel file and printed it. It is a univariate time series of Denmark’s crude oil production (in thousands of tons).<span class="citation"><a href="#fn40" class="footnote-ref" id="fnref40"><sup>40</sup></a></span> I will use methods discussed across this section to clean this data set.</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="data.html#cb225-1" tabindex="-1"></a>(oil_production <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;oil_prod.xlsx&quot;</span>, <span class="at">skip =</span> <span class="dv">2</span>))</span></code></pre></div>
<pre><code>## # A tibble: 14 × 13
##     Year   Jan   Feb   Mar   Apr May   Jun   Jul   Aug   Sep   Oct   Nov   Dec  
##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
##  1  2001  1372  1439  1499  1399 1340  1018  1121  1411  1560  1492  1578  1709 
##  2  2002  1627  1457  1536  1560 1575  1431  1567  1267  1421  1619  1531  1592 
##  3  2003  1617  1445  1598  1464 1482  1514  1406  1520  1560  1578  1574  1550 
##  4  2004  1560  1335  1626  1645 1685  1617  1715  1471  1607  1726  1543  1731 
##  5  2005  1577  1536  1632  1605 1568  1541  1518  1591  1459  1536  1485  1470 
##  6  2006  1459  1351  1471  1330 1518  1377  1547  1364  1086  1456  1429  1450 
##  7  2007  1266  1194  1290  1256 1290  1258  1240  1340  1159  1382  1264  1231 
##  8  2008  1255  1024  1242  1101 1275  1138  1268  1141  1085  1196  1155  1156 
##  9  2009  1201  1067  1140  1110 1081  1066  1112  1061  1129  1051  925   959  
## 10  2010  1095   937  1014  1116 1061  906   1110  710   1014  1080  1009  1106 
## 11  2011   987   791   964   925 1090  872   937   906   861   859   930   818  
## 12  2012   826   830   854   867 866   860   853   820   724   824   819   838  
## 13  2013   787   752   808   764 756   682   741   679   635   720   687   671  
## 14  2014   675   637   691   659 --    --    --    --    --    --    --    --</code></pre>
<p>The main issue with the data is that the columns indicate the month and each row contains many observations and represents a year. The indication of time must always be contained to one column and each row must only contain a single observation. Additionally, the textbook uses <code>--</code> instead of <code>NA</code> to indicate missing observations and the columns are different data types despite containing observations of the same numeric variable. When this data is cleaned it will be a data frame with two columns, one containing the time and the other containing the oil production.</p>
<p>The first step is to change the data type of the columns that are not doubles (May to Dec). I use the <code>mutate_if(data, .predicate, .funs)</code> function for this. <code>mutate_if()</code> allows me to change all columns that are characters (<code>.predicate</code>) to doubles (<code>.funs</code>). Look up the documentation for the function for more information on conditional mutates and further examples. This process introduces missing values to the data, seen through the warning produced.</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="data.html#cb227-1" tabindex="-1"></a>(clean_oil_production <span class="ot">&lt;-</span> <span class="fu">mutate_if</span>(oil_production, is.character, as.double))</span></code></pre></div>
<pre><code>## Warning: There were 8 warnings in `mutate()`.
## The first warning was:
## ℹ In argument: `May = .Primitive(&quot;as.double&quot;)(May)`.
## Caused by warning:
## ! NAs introduced by coercion
## ℹ Run `dplyr::last_dplyr_warnings()` to see the 7 remaining warnings.</code></pre>
<pre><code>## # A tibble: 14 × 13
##     Year   Jan   Feb   Mar   Apr   May   Jun   Jul   Aug   Sep   Oct   Nov   Dec
##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1  2001  1372  1439  1499  1399  1340  1018  1121  1411  1560  1492  1578  1709
##  2  2002  1627  1457  1536  1560  1575  1431  1567  1267  1421  1619  1531  1592
##  3  2003  1617  1445  1598  1464  1482  1514  1406  1520  1560  1578  1574  1550
##  4  2004  1560  1335  1626  1645  1685  1617  1715  1471  1607  1726  1543  1731
##  5  2005  1577  1536  1632  1605  1568  1541  1518  1591  1459  1536  1485  1470
##  6  2006  1459  1351  1471  1330  1518  1377  1547  1364  1086  1456  1429  1450
##  7  2007  1266  1194  1290  1256  1290  1258  1240  1340  1159  1382  1264  1231
##  8  2008  1255  1024  1242  1101  1275  1138  1268  1141  1085  1196  1155  1156
##  9  2009  1201  1067  1140  1110  1081  1066  1112  1061  1129  1051   925   959
## 10  2010  1095   937  1014  1116  1061   906  1110   710  1014  1080  1009  1106
## 11  2011   987   791   964   925  1090   872   937   906   861   859   930   818
## 12  2012   826   830   854   867   866   860   853   820   724   824   819   838
## 13  2013   787   752   808   764   756   682   741   679   635   720   687   671
## 14  2014   675   637   691   659    NA    NA    NA    NA    NA    NA    NA    NA</code></pre>
<p>Next, the data must be pivoted. In the code chunk below, I use <code>pivot_longer()</code> function to create a single column for all the oil production values and a new column indicating the month.</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="data.html#cb230-1" tabindex="-1"></a>(clean_oil_production <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(clean_oil_production, <span class="sc">-</span>(Year), <span class="at">names_to =</span> <span class="st">&quot;month&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;oil_prod&quot;</span>)) <span class="co"># -(Year) selects all columns except year</span></span></code></pre></div>
<pre><code>## # A tibble: 168 × 3
##     Year month oil_prod
##    &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt;
##  1  2001 Jan       1372
##  2  2001 Feb       1439
##  3  2001 Mar       1499
##  4  2001 Apr       1399
##  5  2001 May       1340
##  6  2001 Jun       1018
##  7  2001 Jul       1121
##  8  2001 Aug       1411
##  9  2001 Sep       1560
## 10  2001 Oct       1492
## # ℹ 158 more rows</code></pre>
<p>Next, I need to join the month and year into a single string variable that can be read by <code>parse_date_time()</code>. In the code chunk below, I use the <code>str_c()</code> function (from <code>stringr</code>) within <code>mutate()</code> to join the two separate <code>Year</code> and <code>month</code> variables. <code>stringr</code> is a package included in the tidyverse for manipulating strings. Below, I have included the cheat sheets for manipulating strings with <code>stringr</code> for reference.<span class="citation"><a href="#fn41" class="footnote-ref" id="fnref41"><sup>41</sup></a></span> For more information about working with strings, refer to the <a href="https://r4ds.had.co.nz/strings.html">strings chapter</a> of <em>R for Data Science</em>.<span class="citation"><a href="#fn42" class="footnote-ref" id="fnref42"><sup>42</sup></a></span></p>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="data.html#cb232-1" tabindex="-1"></a>(clean_oil_production <span class="ot">&lt;-</span> clean_oil_production <span class="sc">|&gt;</span> </span>
<span id="cb232-2"><a href="data.html#cb232-2" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">time =</span> <span class="fu">str_c</span>(Year, month, <span class="at">sep =</span> <span class="st">&quot; &quot;</span>))) </span></code></pre></div>
<pre><code>## # A tibble: 168 × 4
##     Year month oil_prod time    
##    &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;chr&gt;   
##  1  2001 Jan       1372 2001 Jan
##  2  2001 Feb       1439 2001 Feb
##  3  2001 Mar       1499 2001 Mar
##  4  2001 Apr       1399 2001 Apr
##  5  2001 May       1340 2001 May
##  6  2001 Jun       1018 2001 Jun
##  7  2001 Jul       1121 2001 Jul
##  8  2001 Aug       1411 2001 Aug
##  9  2001 Sep       1560 2001 Sep
## 10  2001 Oct       1492 2001 Oct
## # ℹ 158 more rows</code></pre>
<p><img src="figures/strings-1.png" /></p>
<p><img src="figures/strings-2.png" /></p>
<p>Now that I have a unified time variable in the form a string, I need to replace it with a date time object using <code>parse_date_time()</code>.</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="data.html#cb234-1" tabindex="-1"></a>(clean_oil_production <span class="ot">&lt;-</span> clean_oil_production <span class="sc">|&gt;</span></span>
<span id="cb234-2"><a href="data.html#cb234-2" tabindex="-1"></a>   <span class="fu">mutate</span>(<span class="at">time =</span> <span class="fu">parse_date_time</span>(time, <span class="at">orders =</span> <span class="st">&quot;ym&quot;</span>)))</span></code></pre></div>
<pre><code>## # A tibble: 168 × 4
##     Year month oil_prod time               
##    &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;dttm&gt;             
##  1  2001 Jan       1372 2001-01-01 00:00:00
##  2  2001 Feb       1439 2001-02-01 00:00:00
##  3  2001 Mar       1499 2001-03-01 00:00:00
##  4  2001 Apr       1399 2001-04-01 00:00:00
##  5  2001 May       1340 2001-05-01 00:00:00
##  6  2001 Jun       1018 2001-06-01 00:00:00
##  7  2001 Jul       1121 2001-07-01 00:00:00
##  8  2001 Aug       1411 2001-08-01 00:00:00
##  9  2001 Sep       1560 2001-09-01 00:00:00
## 10  2001 Oct       1492 2001-10-01 00:00:00
## # ℹ 158 more rows</code></pre>
<p>Finally, I need to drop all missing values using the <code>drop_na()</code> function and select only the corrected <code>time</code> variable and the newly created <code>oil_prod</code> variable to create the final clean data set.</p>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="data.html#cb236-1" tabindex="-1"></a>(clean_oil_production <span class="ot">&lt;-</span> clean_oil_production <span class="sc">|&gt;</span></span>
<span id="cb236-2"><a href="data.html#cb236-2" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="sc">|&gt;</span></span>
<span id="cb236-3"><a href="data.html#cb236-3" tabindex="-1"></a>  <span class="fu">select</span>(time, oil_prod))</span></code></pre></div>
<pre><code>## # A tibble: 160 × 2
##    time                oil_prod
##    &lt;dttm&gt;                 &lt;dbl&gt;
##  1 2001-01-01 00:00:00     1372
##  2 2001-02-01 00:00:00     1439
##  3 2001-03-01 00:00:00     1499
##  4 2001-04-01 00:00:00     1399
##  5 2001-05-01 00:00:00     1340
##  6 2001-06-01 00:00:00     1018
##  7 2001-07-01 00:00:00     1121
##  8 2001-08-01 00:00:00     1411
##  9 2001-09-01 00:00:00     1560
## 10 2001-10-01 00:00:00     1492
## # ℹ 150 more rows</code></pre>
<p>I separated these steps into different stages for clarity. These steps can be completed continuously using piping as demonstrated below:</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="data.html#cb238-1" tabindex="-1"></a><span class="fu">read_excel</span>(<span class="st">&quot;oil_prod.xlsx&quot;</span>, <span class="at">skip =</span> <span class="dv">2</span>) <span class="sc">|&gt;</span></span>
<span id="cb238-2"><a href="data.html#cb238-2" tabindex="-1"></a>  <span class="fu">mutate_if</span>(is.character, as.double) <span class="sc">|&gt;</span></span>
<span id="cb238-3"><a href="data.html#cb238-3" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="sc">-</span>(Year), <span class="at">names_to =</span> <span class="st">&quot;month&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;oil_prod&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="cb238-4"><a href="data.html#cb238-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">time =</span> <span class="fu">parse_date_time</span>(<span class="fu">str_c</span>(Year, month, <span class="at">sep =</span> <span class="st">&quot; &quot;</span>), <span class="at">orders =</span> <span class="st">&quot;ym&quot;</span>)) <span class="sc">|&gt;</span></span>
<span id="cb238-5"><a href="data.html#cb238-5" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="sc">|&gt;</span></span>
<span id="cb238-6"><a href="data.html#cb238-6" tabindex="-1"></a>  <span class="fu">select</span>(time, oil_prod)</span></code></pre></div>
<pre><code>## Warning: There were 8 warnings in `mutate()`.
## The first warning was:
## ℹ In argument: `May = .Primitive(&quot;as.double&quot;)(May)`.
## Caused by warning:
## ! NAs introduced by coercion
## ℹ Run `dplyr::last_dplyr_warnings()` to see the 7 remaining warnings.</code></pre>
<pre><code>## # A tibble: 160 × 2
##    time                oil_prod
##    &lt;dttm&gt;                 &lt;dbl&gt;
##  1 2001-01-01 00:00:00     1372
##  2 2001-02-01 00:00:00     1439
##  3 2001-03-01 00:00:00     1499
##  4 2001-04-01 00:00:00     1399
##  5 2001-05-01 00:00:00     1340
##  6 2001-06-01 00:00:00     1018
##  7 2001-07-01 00:00:00     1121
##  8 2001-08-01 00:00:00     1411
##  9 2001-09-01 00:00:00     1560
## 10 2001-10-01 00:00:00     1492
## # ℹ 150 more rows</code></pre>
</div>
</div>
<div id="data_sources" class="section level2 hasAnchor" number="2.5">
<h2><span class="header-section-number">2.5</span> Data Sources<a href="data.html#data_sources" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This section outlines refutable data sources that have a robust collection of variables. This makes them ideal for exploring your own interests in data analysis or for creating a project of your own. This is not a comprehensive list, but will allow you to access most data available on the internet and access a variety of refutable and significant economic variables.</p>
<div id="tidycensus" class="section level3 hasAnchor" number="2.5.1">
<h3><span class="header-section-number">2.5.1</span> Tidycensus<a href="data.html#tidycensus" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Tidycensus is an R package that allows users to easily access US census data. A complete explanation of Census data and how to use <code>tidycensus</code> is given in Kyle Walker’s <a href="https://walker-data.com/census-r/index.html"><em>Analyzing US Census Data: Methods, Maps, and Models in R</em></a>.<span class="citation"><a href="#fn43" class="footnote-ref" id="fnref43"><sup>43</sup></a></span> Walker provides a comprehensive and updated review of how to use Census data with R. <code>tidycensus</code> is an example of a package that interacts with an API (Application Programming Interface). APIs are amazing tools for getting access to underlying data on the internet from a wide variety of sources. For more information on APIs refer <a href="https://dcl-wrangle.stanford.edu/api-basics.html">this chapter</a> from Stanford’s <em>Data Wrangling</em>.<span class="citation"><a href="#fn44" class="footnote-ref" id="fnref44"><sup>44</sup></a></span></p>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="data.html#cb241-1" tabindex="-1"></a><span class="fu">library</span>(tidycensus)</span></code></pre></div>
<p>Tidycensus is an example of a R package that is a wrapper for an API, making the process of obtaining data easier.<span class="citation"><a href="#fn45" class="footnote-ref" id="fnref45"><sup>45</sup></a></span> The census has a variety of APIs available, but the ones most applicable to your work are:</p>
<ul>
<li>Decennial Census
<ul>
<li>Consists of the data from the survey sent to each U.S. household every 10 years, beginning in 1790<span class="citation"><a href="#fn46" class="footnote-ref" id="fnref46"><sup>46</sup></a></span></li>
<li>Until the 2000, the decennial census consisted of a short form, which every household filled out, and a long form, a long form version with additional questions received by 1 in 6 Americans<span class="citation"><a href="#fn47" class="footnote-ref" id="fnref47"><sup>47</sup></a></span></li>
<li>Most accurate population data, but only available every 10 years
<ul>
<li>useful if a census year lines up with the time frame of your data</li>
<li>occurs in years ending in 0 (e.g 1990, 2000)</li>
</ul></li>
</ul></li>
<li>the American Community Survey (ACS)
<ul>
<li>After 2000, the long form census became the ACS and was administered every year to a sample of 3.5 million households<span class="citation"><a href="#fn48" class="footnote-ref" id="fnref48"><sup>48</sup></a></span></li>
<li>Consists of samples every year or every five years
<ul>
<li>One year estimates are more current but have a larger margin of error, making five year estimates more useful<span class="citation"><a href="#fn49" class="footnote-ref" id="fnref49"><sup>49</sup></a></span></li>
</ul></li>
<li>includes a wide variety of variables on social, economic, housing, and demographic aspects
<ul>
<li>very good data on racial breakdown</li>
</ul></li>
</ul></li>
<li>the Population Estimates Program (PEP)
<ul>
<li>Population estimates for non-decennial census years using decennial census data as well as birth, death, and migration rates<span class="citation"><a href="#fn50" class="footnote-ref" id="fnref50"><sup>50</sup></a></span></li>
<li>Also allows access to indicator variables used in estimation</li>
<li>Uses more accurate techniques for population estimation than ACS population estimates<span class="citation"><a href="#fn51" class="footnote-ref" id="fnref51"><sup>51</sup></a></span></li>
</ul></li>
</ul>
<p>Before using Tidycensus you need to get a Census Bureau API key and activate it. This can be done by completing these steps:<span class="citation"><a href="#fn52" class="footnote-ref" id="fnref52"><sup>52</sup></a></span></p>
<ol style="list-style-type: decimal">
<li>Request a key <a href="https://api.census.gov/data/key_signup.html">here</a></li>
</ol>
<ul>
<li>You will receive an email with they key</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>Run <code>census_api_key("YOUR KEY GOES HERE", install = TRUE)</code></li>
</ol>
<ul>
<li>replace <code>YOUR_KEY_GOES_HERE</code> with your Census key from step 1</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li>Restart R (<em>Ctrl/Cmd + Shift +F10</em>)</li>
</ol>
<p>These steps only need to be completed once.</p>
<p>The first step to retrieving data is to select the variables you want using the <code>load_variables(year, dataset = )</code> function. The options for the <code>year</code> and <code>dataset</code> parameters are outlined below:<span class="citation"><a href="#fn53" class="footnote-ref" id="fnref53"><sup>53</sup></a></span></p>
<ul>
<li>Decennial Census
<ul>
<li><code>dataset =</code>
<ul>
<li><code>"sf1"</code>: short form census
<ul>
<li>available for 2000 and 2010</li>
</ul></li>
<li><code>"sf2"</code>: range of population and housing unit characteristics
<ul>
<li>available for 2000 and 2010</li>
</ul></li>
<li><code>"sf3"</code> and <code>"sf4"</code>: long form census data on detailed demographic information such as income and occupation
<ul>
<li>available for 1790 to 2000, every 10 years</li>
</ul></li>
<li>note portions of the 2020 census data are available
<ul>
<li>this is only available through <code>load_variables(year = 2020, dataset = "pl")</code></li>
</ul></li>
</ul></li>
</ul></li>
<li>ACS
<ul>
<li><code>dataset =</code>
<ul>
<li><code>"acs5"</code>: 5 year ACS
<ul>
<li><code>year</code> refers to the end-year of the sample period
<ul>
<li>e.g. <code>year = 2019</code> refers to the 2015 through 2019 sample</li>
</ul></li>
<li>ACS end-years 2009 to 2019 supported</li>
</ul></li>
<li><code>"acs1"</code>: 1 year ACS
<ul>
<li>ACS end-years 2005 to 2021 supported</li>
</ul></li>
</ul></li>
</ul></li>
<li>PEP
<ul>
<li>the PEP estimates are not available through the <code>load_variables()</code> function</li>
<li>instead you use the <code>get_estimates()</code> function
<ul>
<li>the entire data set is far too large to download, so you must use parameters to download smaller subsets</li>
<li>the use of this function is covered in the section below covering retrieving variables</li>
</ul></li>
</ul></li>
</ul>
<p>The <code>load_variables()</code> function returns a tibble with three variables:</p>
<ul>
<li><code>name</code>: the variable code</li>
<li><code>label</code>: a description of the variable</li>
<li><code>concpet</code>: a broader categorization</li>
</ul>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb242-1"><a href="data.html#cb242-1" tabindex="-1"></a>(vars <span class="ot">&lt;-</span> <span class="fu">load_variables</span>(<span class="at">year =</span> <span class="dv">2021</span>, <span class="at">dataset =</span> <span class="st">&quot;acs1&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 36,400 × 3
##    name        label                                    concept                 
##    &lt;chr&gt;       &lt;chr&gt;                                    &lt;chr&gt;                   
##  1 B01001A_001 Estimate!!Total:                         SEX BY AGE (WHITE ALONE)
##  2 B01001A_002 Estimate!!Total:!!Male:                  SEX BY AGE (WHITE ALONE)
##  3 B01001A_003 Estimate!!Total:!!Male:!!Under 5 years   SEX BY AGE (WHITE ALONE)
##  4 B01001A_004 Estimate!!Total:!!Male:!!5 to 9 years    SEX BY AGE (WHITE ALONE)
##  5 B01001A_005 Estimate!!Total:!!Male:!!10 to 14 years  SEX BY AGE (WHITE ALONE)
##  6 B01001A_006 Estimate!!Total:!!Male:!!15 to 17 years  SEX BY AGE (WHITE ALONE)
##  7 B01001A_007 Estimate!!Total:!!Male:!!18 and 19 years SEX BY AGE (WHITE ALONE)
##  8 B01001A_008 Estimate!!Total:!!Male:!!20 to 24 years  SEX BY AGE (WHITE ALONE)
##  9 B01001A_009 Estimate!!Total:!!Male:!!25 to 29 years  SEX BY AGE (WHITE ALONE)
## 10 B01001A_010 Estimate!!Total:!!Male:!!30 to 34 years  SEX BY AGE (WHITE ALONE)
## # ℹ 36,390 more rows</code></pre>
<p>This tibble allows you to select the desired variables from the selected data set. These variables are coded so it is important to make a list of the desired variables codes for retrieving the actual data. The sheer number of variables is overwhelming, so it is important to be able to narrow down to what you want through filtering. I have found the most success by first filtering by concept and then looking at the individual label. It is easiest to view the data frame from the R environment and filter through the button in the top left of the window. The picture below shows the results of filtering for aggregate family income from the 1-year ACS data set from 2021.</p>
<p><img src="figures/census_filter.png" /></p>
<p>After selecting the desired variables, copy down the variable codes shown in the name column. The best way to do this is to save them into a vector, as demonstrated below. This allows you to just reference that vector in the variables argument of the retrieval function. The function used to get the data depends on the type of data you want:<span class="citation"><a href="#fn54" class="footnote-ref" id="fnref54"><sup>54</sup></a></span></p>
<ul>
<li>decennial census
<ul>
<li>use <code>get_decennial(geography, variables = , year = )</code></li>
<li><code>geography =</code> refers to the geographical unit of each observation
<ul>
<li>lowest level is <code>"tract"</code>, largest level is <code>"us"</code></li>
<li>a full list of the options is available <a href="https://walker-data.com/census-r/an-introduction-to-tidycensus.html#geography-and-variables-in-tidycensus">here</a><span class="citation"><a href="#fn55" class="footnote-ref" id="fnref55"><sup>55</sup></a></span></li>
</ul></li>
<li><code>variables =</code> refers to the variables to get
<ul>
<li>set this equal to the vector containing the names of desired variables</li>
</ul></li>
<li><code>year =</code> refers to the sample end-year</li>
</ul></li>
<li>ACS
<ul>
<li>use <code>get_acs(geography, variables = , year = , survey =)</code>
<ul>
<li>identical parameters are the same as above</li>
<li><code>survey =</code> refers to the acs survey you want
<ul>
<li>the default is <code>"acs5"</code></li>
<li>other option is <code>"acs1"</code></li>
</ul></li>
</ul></li>
</ul></li>
<li>PEP
<ul>
<li>use <code>get_estimates(geography = , product = , year = , breakdown = , breakdown_labels = )</code>
<ul>
<li>identical parameters are the same as above</li>
<li><code>product =</code> refers to the set of variables to get
<ul>
<li>the options are <code>"population"</code>, <code>"components"</code>, <code>"housing"</code>, <code>"characteristics"</code></li>
</ul></li>
<li><code>breakdown =</code> allows you to break down the variables by different categories
<ul>
<li>the options are <code>"AGEGROUP"</code>, <code>"RACE"</code>, <code>"SEX"</code>, or <code>"HISP"</code></li>
<li>when using <code>breakdown =</code> it is best to set <code>breakdown_labels = TRUE</code> so the breakdown differences are included</li>
</ul></li>
</ul></li>
</ul></li>
</ul>
<p>In the code chunk below I demonstrate how to create a variable vector and retrieve the variables with the <code>get_acs()</code> function.</p>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb244-1"><a href="data.html#cb244-1" tabindex="-1"></a>variables <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;B01001_026&quot;</span>, <span class="st">&quot;B01001_002&quot;</span>) <span class="co"># can put any number of variables in this vector</span></span>
<span id="cb244-2"><a href="data.html#cb244-2" tabindex="-1"></a>(acs_data <span class="ot">&lt;-</span> <span class="fu">get_acs</span>(<span class="at">geography =</span> <span class="st">&quot;state&quot;</span>, <span class="at">variables =</span> variables, <span class="at">year =</span> <span class="dv">2021</span>, <span class="at">survey =</span> <span class="st">&quot;acs1&quot;</span>))</span></code></pre></div>
<pre><code>## Getting data from the 2021 1-year ACS</code></pre>
<pre><code>## The 1-year ACS provides data for geographies with populations of 65,000 and greater.</code></pre>
<pre><code>## # A tibble: 104 × 5
##    GEOID NAME       variable   estimate   moe
##    &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt;         &lt;dbl&gt; &lt;dbl&gt;
##  1 01    Alabama    B01001_002  2445896  5868
##  2 01    Alabama    B01001_026  2593981  5868
##  3 02    Alaska     B01001_002   383121  2429
##  4 02    Alaska     B01001_026   349552  2429
##  5 04    Arizona    B01001_002  3629620  2852
##  6 04    Arizona    B01001_026  3646696  2852
##  7 05    Arkansas   B01001_002  1493681  4590
##  8 05    Arkansas   B01001_026  1532210  4590
##  9 06    California B01001_002 19618934  6432
## 10 06    California B01001_026 19618902  6432
## # ℹ 94 more rows</code></pre>
<p>One thing to note about the census data is that it often comes in a form where it needs to be pivoted. Below, I demonstrate how to pivot this data into a clean form better suited for analysis and visualization:</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb248-1"><a href="data.html#cb248-1" tabindex="-1"></a>acs_data <span class="sc">|&gt;</span></span>
<span id="cb248-2"><a href="data.html#cb248-2" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> <span class="fu">c</span>(variable), <span class="at">values_from =</span> <span class="fu">c</span>(estimate, moe)) <span class="sc">|&gt;</span></span>
<span id="cb248-3"><a href="data.html#cb248-3" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">male_pop =</span> estimate_B01001_002, <span class="at">female_pop =</span> estimate_B01001_026, <span class="at">male_pop_moe =</span> moe_B01001_002, <span class="at">female_pop_moe =</span> moe_B01001_026)</span></code></pre></div>
<pre><code>## # A tibble: 52 × 6
##    GEOID NAME                 male_pop female_pop male_pop_moe female_pop_moe
##    &lt;chr&gt; &lt;chr&gt;                   &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;          &lt;dbl&gt;
##  1 01    Alabama               2445896    2593981         5868           5868
##  2 02    Alaska                 383121     349552         2429           2429
##  3 04    Arizona               3629620    3646696         2852           2852
##  4 05    Arkansas              1493681    1532210         4590           4590
##  5 06    California           19618934   19618902         6432           6432
##  6 08    Colorado              2943037    2869032         3980           3980
##  7 09    Connecticut           1768045    1837552         2237           2237
##  8 10    Delaware               485908     517476         1201           1201
##  9 11    District of Columbia   319025     351025          601            601
## 10 12    Florida              10714520   11066608         8241           8241
## # ℹ 42 more rows</code></pre>
</div>
<div id="ipums" class="section level3 hasAnchor" number="2.5.2">
<h3><span class="header-section-number">2.5.2</span> IPUMS<a href="data.html#ipums" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>IPUMS is a collection of social and economic data readily available on the internet. Their data sets aggregate data across different US government agencies and international data sources, including census data, the National Science Foundation, the Bureau of Labor Statistics, the Center for Disease Control, and the Food and Drug Administration. They also offer international, health, and higher education focused data sets. This allows access to census data for years that are not available in the tidycensus package. To get data you select the variable and the sample (source and time) into a cart and download the data as a .csv file on their <a href="https://www.ipums.org">website</a>.</p>
</div>
<div id="gtrends" class="section level3 hasAnchor" number="2.5.3">
<h3><span class="header-section-number">2.5.3</span> Google Trends<a href="data.html#gtrends" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Google Trends is a website that allows you to access data on the number of times a term was searched on Google by region and time period. This data can be incredibly useful in regressions and can be indicative of what is on people’s mind at a given time. <a href="https://dgarcia-eu.github.io/SocialDataScience/1_Introduction/017_gtrendsR/gtrendsR.html">This link</a> provides a guide on how to access this data either in the format of a CSV or directly within R through the <code>gtrendsR</code> package.<span class="citation"><a href="#fn56" class="footnote-ref" id="fnref56"><sup>56</sup></a></span></p>
</div>
<div id="scraping" class="section level3 hasAnchor" number="2.5.4">
<h3><span class="header-section-number">2.5.4</span> Scraping<a href="data.html#scraping" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sometimes you are able to look at data on the internet, but it is not available for download. Scraping is the process by which you are able to access the data you can see through the html code of the website. Not all websites are able to be scraped easily, but many are. Scraping is a very useful skill in the world of data science.</p>
<p>In R, scraping can be done through the <code>rvest</code> package. This is covered extensively <a href="https://dcl-wrangle.stanford.edu/rvest.html">here</a> in the Stanford Data Wrangling book.<span class="citation"><a href="#fn57" class="footnote-ref" id="fnref57"><sup>57</sup></a></span> This is a very useful tool and is considered to be an entire branch of data science.</p>
</div>
</div>
<div id="data_conclusion" class="section level2 hasAnchor" number="2.6">
<h2><span class="header-section-number">2.6</span> Conclusion<a href="data.html#data_conclusion" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This chapter provides a comprehensive overview of data. By this point, using the skills above, you should be able to read almost any form of data into a data frame within R, manipulate and clean data, and get data from the variety of recommended data sources or through scraping. These skills will give you a concrete foundation for data wrangling. This book is meant to give a functional overview of these topics while referencing resources that provide more information. Do not hesitate to look into <a href="https://r4ds.had.co.nz/index.html"><em>R for Data Science</em></a>, <a href="https://dcl-wrangle.stanford.edu"><em>Stanford’s Data Wrangling</em></a>, and <a href="https://walker-data.com/census-r/index.html"><em>Analyzing US Census Data</em></a>. These resources provide more in-depth explanations into these topics.</p>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-stanford" class="csl-entry">
Altman, Sara, Bill Behrman, and Hadley Wickham. <em>Data Wrangling</em>. Stanford, 2021.
</div>
<div id="ref-R-gtrendsR" class="csl-entry">
Massicotte, Philippe, and Dirk Eddelbuettel. <em>gtrendsR: Perform and Display Google Trends Queries</em>, 2022. <a href="https://github.com/PMassicotte/gtrendsR">https://github.com/PMassicotte/gtrendsR</a>.
</div>
<div id="ref-forecasting" class="csl-entry">
Montgomery, Douglas C, Cheryl L. Jennings, and Murat Kulahci. <em>Introduction to Time Series Analysis and Forecasting</em>. Edited by Second. Hoboken, New Jersey: John Wiley &amp; Sons, 2016.
</div>
<div id="ref-census" class="csl-entry">
Walker, Kyle. <em>Analyzing US Census Data: Methods, Maps, and Models in r</em>. CRC Press, 2023.
</div>
<div id="ref-R-stringr" class="csl-entry">
———. <em>Stringr: Simple, Consistent Wrappers for Common String Operations</em>, 2022. <a href="https://CRAN.R-project.org/package=stringr">https://CRAN.R-project.org/package=stringr</a>.
</div>
<div id="ref-r4ds" class="csl-entry">
Wickham, Hadley, Mine Çetinkaya-Rundel, and Garett Grolemund. <em>R for Data Science</em>. 2nd ed., 2023.
</div>
</div>
<div class="footnotes">
<hr />
<ol start="24">
<li id="fn24"><p><a href="#ref-r4ds">Wickham, Çetinkaya-Rundel, and Grolemund, <em>R for Data Science</em></a>.<a href="data.html#fnref24" class="footnote-back">↩︎</a></p></li>
<li id="fn25"><p><a href="#ref-r4ds">Wickham, Çetinkaya-Rundel, and Grolemund</a>.<a href="data.html#fnref25" class="footnote-back">↩︎</a></p></li>
<li id="fn26"><p><a href="#ref-r4ds">Wickham, Çetinkaya-Rundel, and Grolemund</a>.<a href="data.html#fnref26" class="footnote-back">↩︎</a></p></li>
<li id="fn27"><p><a href="#ref-forecasting">Montgomery, Jennings, and Kulahci, <em>Introduction to Time Series Analysis and Forecasting</em></a>.<a href="data.html#fnref27" class="footnote-back">↩︎</a></p></li>
<li id="fn28"><p><a href="#ref-r4ds">Wickham, Çetinkaya-Rundel, and Grolemund, <em>R for Data Science</em></a>.<a href="data.html#fnref28" class="footnote-back">↩︎</a></p></li>
<li id="fn29"><p><a href="#ref-r4ds">Wickham, Çetinkaya-Rundel, and Grolemund</a>.<a href="data.html#fnref29" class="footnote-back">↩︎</a></p></li>
<li id="fn30"><p><a href="#ref-stanford">Altman, Behrman, and Wickham, <em>Data Wrangling</em></a>.<a href="data.html#fnref30" class="footnote-back">↩︎</a></p></li>
<li id="fn31"><p><a href="#ref-r4ds">Wickham, Çetinkaya-Rundel, and Grolemund, <em>R for Data Science</em></a>.<a href="data.html#fnref31" class="footnote-back">↩︎</a></p></li>
<li id="fn32"><p><a href="#ref-r4ds">Wickham, Çetinkaya-Rundel, and Grolemund</a>.<a href="data.html#fnref32" class="footnote-back">↩︎</a></p></li>
<li id="fn33"><p><a href="#ref-r4ds">Wickham, Çetinkaya-Rundel, and Grolemund</a>.<a href="data.html#fnref33" class="footnote-back">↩︎</a></p></li>
<li id="fn34"><p><a href="#ref-r4ds">Wickham, Çetinkaya-Rundel, and Grolemund</a>.<a href="data.html#fnref34" class="footnote-back">↩︎</a></p></li>
<li id="fn35"><p><a href="#ref-r4ds">Wickham, Çetinkaya-Rundel, and Grolemund</a>.<a href="data.html#fnref35" class="footnote-back">↩︎</a></p></li>
<li id="fn36"><p><a href="#ref-r4ds">Wickham, Çetinkaya-Rundel, and Grolemund</a>.<a href="data.html#fnref36" class="footnote-back">↩︎</a></p></li>
<li id="fn37"><p><a href="#ref-r4ds">Wickham, Çetinkaya-Rundel, and Grolemund</a>.<a href="data.html#fnref37" class="footnote-back">↩︎</a></p></li>
<li id="fn38"><p><a href="#ref-r4ds">Wickham, Çetinkaya-Rundel, and Grolemund</a>.<a href="data.html#fnref38" class="footnote-back">↩︎</a></p></li>
<li id="fn39"><p><a href="#ref-forecasting">Montgomery, Jennings, and Kulahci, <em>Introduction to Time Series Analysis and Forecasting</em></a>.<a href="data.html#fnref39" class="footnote-back">↩︎</a></p></li>
<li id="fn40"><p><a href="#ref-forecasting">Montgomery, Jennings, and Kulahci</a>.<a href="data.html#fnref40" class="footnote-back">↩︎</a></p></li>
<li id="fn41"><p><a href="#ref-R-stringr">Wickham, <em>Stringr</em></a>.<a href="data.html#fnref41" class="footnote-back">↩︎</a></p></li>
<li id="fn42"><p><a href="#ref-r4ds">Wickham, Çetinkaya-Rundel, and Grolemund, <em>R for Data Science</em></a>.<a href="data.html#fnref42" class="footnote-back">↩︎</a></p></li>
<li id="fn43"><p><a href="#ref-census">Walker, <em>Analyzing US Census Data</em></a>.<a href="data.html#fnref43" class="footnote-back">↩︎</a></p></li>
<li id="fn44"><p><a href="#ref-stanford">Altman, Behrman, and Wickham, <em>Data Wrangling</em></a>.<a href="data.html#fnref44" class="footnote-back">↩︎</a></p></li>
<li id="fn45"><p><a href="#ref-stanford">Altman, Behrman, and Wickham</a>.<a href="data.html#fnref45" class="footnote-back">↩︎</a></p></li>
<li id="fn46"><p><a href="#ref-stanford">Altman, Behrman, and Wickham</a>.<a href="data.html#fnref46" class="footnote-back">↩︎</a></p></li>
<li id="fn47"><p><a href="#ref-census">Walker, <em>Analyzing US Census Data</em></a>.<a href="data.html#fnref47" class="footnote-back">↩︎</a></p></li>
<li id="fn48"><p><a href="#ref-stanford">Altman, Behrman, and Wickham, <em>Data Wrangling</em></a>.<a href="data.html#fnref48" class="footnote-back">↩︎</a></p></li>
<li id="fn49"><p><a href="#ref-stanford">Altman, Behrman, and Wickham</a>.<a href="data.html#fnref49" class="footnote-back">↩︎</a></p></li>
<li id="fn50"><p><a href="#ref-census">Walker, <em>Analyzing US Census Data</em></a>.<a href="data.html#fnref50" class="footnote-back">↩︎</a></p></li>
<li id="fn51"><p><a href="#ref-stanford">Altman, Behrman, and Wickham, <em>Data Wrangling</em></a>.<a href="data.html#fnref51" class="footnote-back">↩︎</a></p></li>
<li id="fn52"><p><a href="#ref-census">Walker, <em>Analyzing US Census Data</em></a>.<a href="data.html#fnref52" class="footnote-back">↩︎</a></p></li>
<li id="fn53"><p><a href="#ref-census">Walker</a>.<a href="data.html#fnref53" class="footnote-back">↩︎</a></p></li>
<li id="fn54"><p><a href="#ref-census">Walker</a>.<a href="data.html#fnref54" class="footnote-back">↩︎</a></p></li>
<li id="fn55"><p><a href="#ref-census">Walker</a>.<a href="data.html#fnref55" class="footnote-back">↩︎</a></p></li>
<li id="fn56"><p><a href="#ref-R-gtrendsR">Massicotte and Eddelbuettel, <em>gtrendsR</em></a>.<a href="data.html#fnref56" class="footnote-back">↩︎</a></p></li>
<li id="fn57"><p><a href="#ref-stanford">Altman, Behrman, and Wickham, <em>Data Wrangling</em></a>.<a href="data.html#fnref57" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="programming_basics.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data_viz.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>

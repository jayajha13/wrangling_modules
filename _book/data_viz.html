<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Data Vizualization | Data Wrangling and Visualization Guide</title>
  <meta name="description" content="This book is meant to provide a guide to those who have little to no experience in R and R studio to conceptions dealing with data and statistics. R is a powerful tool allowing highly customizable data visualization and offers many different formats and applications to users." />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Data Vizualization | Data Wrangling and Visualization Guide" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This book is meant to provide a guide to those who have little to no experience in R and R studio to conceptions dealing with data and statistics. R is a powerful tool allowing highly customizable data visualization and offers many different formats and applications to users." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Data Vizualization | Data Wrangling and Visualization Guide" />
  
  <meta name="twitter:description" content="This book is meant to provide a guide to those who have little to no experience in R and R studio to conceptions dealing with data and statistics. R is a powerful tool allowing highly customizable data visualization and offers many different formats and applications to users." />
  

<meta name="author" content="Max Ricciardelli" />


<meta name="date" content="2023-07-25" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data.html"/>
<link rel="next" href="add_res.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="programming_basics.html"><a href="programming_basics.html"><i class="fa fa-check"></i><b>2</b> R and Programming Basics</a>
<ul>
<li class="chapter" data-level="2.1" data-path="programming_basics.html"><a href="programming_basics.html#projects"><i class="fa fa-check"></i><b>2.1</b> Projects</a></li>
<li class="chapter" data-level="2.2" data-path="programming_basics.html"><a href="programming_basics.html#code-chunks"><i class="fa fa-check"></i><b>2.2</b> Code Chunks</a></li>
<li class="chapter" data-level="2.3" data-path="programming_basics.html"><a href="programming_basics.html#packages_functions_files"><i class="fa fa-check"></i><b>2.3</b> Packages, Functions, File Structure, and File Paths</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="programming_basics.html"><a href="programming_basics.html#packages_functions"><i class="fa fa-check"></i><b>2.3.1</b> Packages and Functions</a></li>
<li class="chapter" data-level="2.3.2" data-path="programming_basics.html"><a href="programming_basics.html#installing_packages"><i class="fa fa-check"></i><b>2.3.2</b> Installing and Referencing Packages</a></li>
<li class="chapter" data-level="2.3.3" data-path="programming_basics.html"><a href="programming_basics.html#functions"><i class="fa fa-check"></i><b>2.3.3</b> Calling Functions</a></li>
<li class="chapter" data-level="2.3.4" data-path="programming_basics.html"><a href="programming_basics.html#working_directory"><i class="fa fa-check"></i><b>2.3.4</b> Changing the Working Directory</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="programming_basics.html"><a href="programming_basics.html#data_types"><i class="fa fa-check"></i><b>2.4</b> Objects, data, and types</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="programming_basics.html"><a href="programming_basics.html#math"><i class="fa fa-check"></i><b>2.4.1</b> Mathematical Operators</a></li>
<li class="chapter" data-level="2.4.2" data-path="programming_basics.html"><a href="programming_basics.html#objects"><i class="fa fa-check"></i><b>2.4.2</b> Objects</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="programming_basics.html"><a href="programming_basics.html#logical_operators"><i class="fa fa-check"></i><b>2.5</b> Logical Operators</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="programming_basics.html"><a href="programming_basics.html#boolean_operators"><i class="fa fa-check"></i><b>2.5.1</b> Boolean Operators</a></li>
<li class="chapter" data-level="2.5.2" data-path="programming_basics.html"><a href="programming_basics.html#numeric_operators"><i class="fa fa-check"></i><b>2.5.2</b> Numeric Operators</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="programming_basics.html"><a href="programming_basics.html#if_else"><i class="fa fa-check"></i><b>2.6</b> If Else Statements</a></li>
<li class="chapter" data-level="2.7" data-path="programming_basics.html"><a href="programming_basics.html#for_while"><i class="fa fa-check"></i><b>2.7</b> For and While loops</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="programming_basics.html"><a href="programming_basics.html#for_loops"><i class="fa fa-check"></i><b>2.7.1</b> For Loops</a></li>
<li class="chapter" data-level="2.7.2" data-path="programming_basics.html"><a href="programming_basics.html#while_loops"><i class="fa fa-check"></i><b>2.7.2</b> While Loops</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="programming_basics.html"><a href="programming_basics.html#original_functions"><i class="fa fa-check"></i><b>2.8</b> Writing your own functions</a></li>
<li class="chapter" data-level="2.9" data-path="programming_basics.html"><a href="programming_basics.html#learnr"><i class="fa fa-check"></i><b>2.9</b> Tutorials</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>3</b> Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data.html"><a href="data.html#data_frames"><i class="fa fa-check"></i><b>3.1</b> Data Frames</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="data.html"><a href="data.html#date_time"><i class="fa fa-check"></i><b>3.1.1</b> Date Time Objects</a></li>
<li class="chapter" data-level="3.1.2" data-path="data.html"><a href="data.html#factors"><i class="fa fa-check"></i><b>3.1.2</b> Factors</a></li>
<li class="chapter" data-level="3.1.3" data-path="data.html"><a href="data.html#subsetting-data-frames"><i class="fa fa-check"></i><b>3.1.3</b> Subsetting Data Frames</a></li>
<li class="chapter" data-level="3.1.4" data-path="data.html"><a href="data.html#displaying-data-frames-in-markdown"><i class="fa fa-check"></i><b>3.1.4</b> Displaying Data Frames in Markdown</a></li>
<li class="chapter" data-level="3.1.5" data-path="data.html"><a href="data.html#reference-saved-values-in-markdown"><i class="fa fa-check"></i><b>3.1.5</b> Reference Saved Values in Markdown</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="data.html"><a href="data.html#importing"><i class="fa fa-check"></i><b>3.2</b> Importing Data</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="data.html"><a href="data.html#csv"><i class="fa fa-check"></i><b>3.2.1</b> .csv Files</a></li>
<li class="chapter" data-level="3.2.2" data-path="data.html"><a href="data.html#excel_import"><i class="fa fa-check"></i><b>3.2.2</b> Microsoft Excel Files</a></li>
<li class="chapter" data-level="3.2.3" data-path="data.html"><a href="data.html#rds"><i class="fa fa-check"></i><b>3.2.3</b> RDS Files</a></li>
<li class="chapter" data-level="3.2.4" data-path="data.html"><a href="data.html#import_conclusion"><i class="fa fa-check"></i><b>3.2.4</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="data.html"><a href="data.html#saving"><i class="fa fa-check"></i><b>3.3</b> Saving Files</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="data.html"><a href="data.html#save_data_frames"><i class="fa fa-check"></i><b>3.3.1</b> Saving Data Frames</a></li>
<li class="chapter" data-level="3.3.2" data-path="data.html"><a href="data.html#save_misc"><i class="fa fa-check"></i><b>3.3.2</b> Saving Other File Types</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="data.html"><a href="data.html#cleaning_data"><i class="fa fa-check"></i><b>3.4</b> Cleaning Data and the Tidyverse</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="data.html"><a href="data.html#pivoting"><i class="fa fa-check"></i><b>3.4.1</b> Pivoting Data</a></li>
<li class="chapter" data-level="3.4.2" data-path="data.html"><a href="data.html#new_vars"><i class="fa fa-check"></i><b>3.4.2</b> Creating New Variables</a></li>
<li class="chapter" data-level="3.4.3" data-path="data.html"><a href="data.html#select"><i class="fa fa-check"></i><b>3.4.3</b> Selecting Columns</a></li>
<li class="chapter" data-level="3.4.4" data-path="data.html"><a href="data.html#rename"><i class="fa fa-check"></i><b>3.4.4</b> Renaming Variables and Piping</a></li>
<li class="chapter" data-level="3.4.5" data-path="data.html"><a href="data.html#filtering"><i class="fa fa-check"></i><b>3.4.5</b> Filtering Data</a></li>
<li class="chapter" data-level="3.4.6" data-path="data.html"><a href="data.html#summarize"><i class="fa fa-check"></i><b>3.4.6</b> Summarizing Data</a></li>
<li class="chapter" data-level="3.4.7" data-path="data.html"><a href="data.html#group_by"><i class="fa fa-check"></i><b>3.4.7</b> Grouping Data</a></li>
<li class="chapter" data-level="3.4.8" data-path="data.html"><a href="data.html#merge"><i class="fa fa-check"></i><b>3.4.8</b> Merging Data</a></li>
<li class="chapter" data-level="3.4.9" data-path="data.html"><a href="data.html#b.22"><i class="fa fa-check"></i><b>3.4.9</b> Working Example</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="data.html"><a href="data.html#data_sources"><i class="fa fa-check"></i><b>3.5</b> Data Sources</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="data.html"><a href="data.html#tidycensus"><i class="fa fa-check"></i><b>3.5.1</b> Tidycensus</a></li>
<li class="chapter" data-level="3.5.2" data-path="data.html"><a href="data.html#ipums"><i class="fa fa-check"></i><b>3.5.2</b> IPUMS</a></li>
<li class="chapter" data-level="3.5.3" data-path="data.html"><a href="data.html#gtrends"><i class="fa fa-check"></i><b>3.5.3</b> Google Trends</a></li>
<li class="chapter" data-level="3.5.4" data-path="data.html"><a href="data.html#scraping"><i class="fa fa-check"></i><b>3.5.4</b> Scraping</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="data.html"><a href="data.html#data_conclusion"><i class="fa fa-check"></i><b>3.6</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data_viz.html"><a href="data_viz.html"><i class="fa fa-check"></i><b>4</b> Data Vizualization</a>
<ul>
<li class="chapter" data-level="4.1" data-path="data_viz.html"><a href="data_viz.html#graphics_grammar"><i class="fa fa-check"></i><b>4.1</b> The Grammar of Graphics</a></li>
<li class="chapter" data-level="4.2" data-path="data_viz.html"><a href="data_viz.html#aes"><i class="fa fa-check"></i><b>4.2</b> Aesthetics</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="data_viz.html"><a href="data_viz.html#color"><i class="fa fa-check"></i><b>4.2.1</b> Color</a></li>
<li class="chapter" data-level="4.2.2" data-path="data_viz.html"><a href="data_viz.html#shape"><i class="fa fa-check"></i><b>4.2.2</b> Shape</a></li>
<li class="chapter" data-level="4.2.3" data-path="data_viz.html"><a href="data_viz.html#size"><i class="fa fa-check"></i><b>4.2.3</b> Size</a></li>
<li class="chapter" data-level="4.2.4" data-path="data_viz.html"><a href="data_viz.html#shade"><i class="fa fa-check"></i><b>4.2.4</b> Shading</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="data_viz.html"><a href="data_viz.html#faceting"><i class="fa fa-check"></i><b>4.3</b> Faceting</a></li>
<li class="chapter" data-level="4.4" data-path="data_viz.html"><a href="data_viz.html#geoms"><i class="fa fa-check"></i><b>4.4</b> Geoms: Types of Plots</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="data_viz.html"><a href="data_viz.html#scatter"><i class="fa fa-check"></i><b>4.4.1</b> Scatter Plots</a></li>
<li class="chapter" data-level="4.4.2" data-path="data_viz.html"><a href="data_viz.html#line"><i class="fa fa-check"></i><b>4.4.2</b> Line Graphs</a></li>
<li class="chapter" data-level="4.4.3" data-path="data_viz.html"><a href="data_viz.html#histograms"><i class="fa fa-check"></i><b>4.4.3</b> Histograms and Frequency Polygons</a></li>
<li class="chapter" data-level="4.4.4" data-path="data_viz.html"><a href="data_viz.html#box_plots"><i class="fa fa-check"></i><b>4.4.4</b> Box Plots</a></li>
<li class="chapter" data-level="4.4.5" data-path="data_viz.html"><a href="data_viz.html#bar_charts"><i class="fa fa-check"></i><b>4.4.5</b> Bar Charts</a></li>
<li class="chapter" data-level="4.4.6" data-path="data_viz.html"><a href="data_viz.html#other_layers"><i class="fa fa-check"></i><b>4.4.6</b> Additional Geom Layers</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="data_viz.html"><a href="data_viz.html#custom_axes"><i class="fa fa-check"></i><b>4.5</b> Modifying Data and Axes</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="data_viz.html"><a href="data_viz.html#filter_plot"><i class="fa fa-check"></i><b>4.5.1</b> Filtering</a></li>
<li class="chapter" data-level="4.5.2" data-path="data_viz.html"><a href="data_viz.html#x_and_y_lim"><i class="fa fa-check"></i><b>4.5.2</b> <code>xlim()</code> and <code>ylim()</code></a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="data_viz.html"><a href="data_viz.html#titles"><i class="fa fa-check"></i><b>4.6</b> Titles</a></li>
<li class="chapter" data-level="4.7" data-path="data_viz.html"><a href="data_viz.html#time_series_plot"><i class="fa fa-check"></i><b>4.7</b> Plotting Time Series</a></li>
<li class="chapter" data-level="4.8" data-path="data_viz.html"><a href="data_viz.html#save_viz"><i class="fa fa-check"></i><b>4.8</b> Saving and Showing Graphics</a></li>
<li class="chapter" data-level="4.9" data-path="data_viz.html"><a href="data_viz.html#data_viz_conclusion"><i class="fa fa-check"></i><b>4.9</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="add_res.html"><a href="add_res.html"><i class="fa fa-check"></i><b>5</b> Overview of Additional Resources</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Wrangling and Visualization Guide</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data_viz" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">4</span> Data Vizualization<a href="data_viz.html#data_viz" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In this chapter I will cover how to visualize data using <code>ggplot2</code>, a package included in the tidyverse. <code>ggplot2</code> provides a few distinct advantages. It is integrated into the tidyverse, allowing it to interact with data frames (tibbles) in meaningful ways to produce better looking and more customizable graphs using less code. It also uses a layered format, allowing multiple visualizations of the same type to be combined and allowing for easy modification of different aspects of visualization. This will be discussed in greater detail in <a href="data_viz.html#graphics_grammar">Section 4.1: The Grammar of Graphics</a>.</p>
<p>For work in this chapter we will be using a couple different packages. As always, we will use the <code>tidyverse</code>, which contains <code>ggplot2</code>, the focus of this chapter.<span class="citation"><a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></span><span class="citation"><a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a></span> Additionally we will use <code>nycflights13</code>, a package that provides sample data to work with as we learn the tools available through <code>ggplot2</code>.<span class="citation"><a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a></span></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="data_viz.html#cb1-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<pre><code>## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
## ✔ dplyr     1.1.1     ✔ readr     2.1.4
## ✔ forcats   1.0.0     ✔ stringr   1.5.0
## ✔ ggplot2   3.4.2     ✔ tibble    3.2.1
## ✔ lubridate 1.9.2     ✔ tidyr     1.3.0
## ✔ purrr     1.0.1     
## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()
## ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="data_viz.html#cb3-1" tabindex="-1"></a><span class="fu">library</span>(nycflights13)</span></code></pre></div>
<p><code>nycflights13</code> contains a variety of data sets pertaining to flights departing New York City in 2013.<span class="citation"><a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a></span> The code chunk below shows the three most prominent ones.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="data_viz.html#cb4-1" tabindex="-1"></a>flights</span></code></pre></div>
<pre><code>## # A tibble: 336,776 × 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
##  1  2013     1     1      517            515         2      830            819
##  2  2013     1     1      533            529         4      850            830
##  3  2013     1     1      542            540         2      923            850
##  4  2013     1     1      544            545        -1     1004           1022
##  5  2013     1     1      554            600        -6      812            837
##  6  2013     1     1      554            558        -4      740            728
##  7  2013     1     1      555            600        -5      913            854
##  8  2013     1     1      557            600        -3      709            723
##  9  2013     1     1      557            600        -3      838            846
## 10  2013     1     1      558            600        -2      753            745
## # ℹ 336,766 more rows
## # ℹ 11 more variables: arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="data_viz.html#cb6-1" tabindex="-1"></a>weather</span></code></pre></div>
<pre><code>## # A tibble: 26,115 × 15
##    origin  year month   day  hour  temp  dewp humid wind_dir wind_speed
##    &lt;chr&gt;  &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt;
##  1 EWR     2013     1     1     1  39.0  26.1  59.4      270      10.4 
##  2 EWR     2013     1     1     2  39.0  27.0  61.6      250       8.06
##  3 EWR     2013     1     1     3  39.0  28.0  64.4      240      11.5 
##  4 EWR     2013     1     1     4  39.9  28.0  62.2      250      12.7 
##  5 EWR     2013     1     1     5  39.0  28.0  64.4      260      12.7 
##  6 EWR     2013     1     1     6  37.9  28.0  67.2      240      11.5 
##  7 EWR     2013     1     1     7  39.0  28.0  64.4      240      15.0 
##  8 EWR     2013     1     1     8  39.9  28.0  62.2      250      10.4 
##  9 EWR     2013     1     1     9  39.9  28.0  62.2      260      15.0 
## 10 EWR     2013     1     1    10  41    28.0  59.6      260      13.8 
## # ℹ 26,105 more rows
## # ℹ 5 more variables: wind_gust &lt;dbl&gt;, precip &lt;dbl&gt;, pressure &lt;dbl&gt;,
## #   visib &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="data_viz.html#cb8-1" tabindex="-1"></a>planes</span></code></pre></div>
<pre><code>## # A tibble: 3,322 × 9
##    tailnum  year type              manufacturer model engines seats speed engine
##    &lt;chr&gt;   &lt;int&gt; &lt;chr&gt;             &lt;chr&gt;        &lt;chr&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; 
##  1 N10156   2004 Fixed wing multi… EMBRAER      EMB-…       2    55    NA Turbo…
##  2 N102UW   1998 Fixed wing multi… AIRBUS INDU… A320…       2   182    NA Turbo…
##  3 N103US   1999 Fixed wing multi… AIRBUS INDU… A320…       2   182    NA Turbo…
##  4 N104UW   1999 Fixed wing multi… AIRBUS INDU… A320…       2   182    NA Turbo…
##  5 N10575   2002 Fixed wing multi… EMBRAER      EMB-…       2    55    NA Turbo…
##  6 N105UW   1999 Fixed wing multi… AIRBUS INDU… A320…       2   182    NA Turbo…
##  7 N107US   1999 Fixed wing multi… AIRBUS INDU… A320…       2   182    NA Turbo…
##  8 N108UW   1999 Fixed wing multi… AIRBUS INDU… A320…       2   182    NA Turbo…
##  9 N109UW   1999 Fixed wing multi… AIRBUS INDU… A320…       2   182    NA Turbo…
## 10 N110UW   1999 Fixed wing multi… AIRBUS INDU… A320…       2   182    NA Turbo…
## # ℹ 3,312 more rows</code></pre>
<p><code>ggplot2</code> includes sample data sets provided within the package as well. These data sets are displayed in the code chunk below.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="data_viz.html#cb10-1" tabindex="-1"></a>diamonds</span></code></pre></div>
<pre><code>## # A tibble: 53,940 × 10
##    carat cut       color clarity depth table price     x     y     z
##    &lt;dbl&gt; &lt;ord&gt;     &lt;ord&gt; &lt;ord&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1  0.23 Ideal     E     SI2      61.5    55   326  3.95  3.98  2.43
##  2  0.21 Premium   E     SI1      59.8    61   326  3.89  3.84  2.31
##  3  0.23 Good      E     VS1      56.9    65   327  4.05  4.07  2.31
##  4  0.29 Premium   I     VS2      62.4    58   334  4.2   4.23  2.63
##  5  0.31 Good      J     SI2      63.3    58   335  4.34  4.35  2.75
##  6  0.24 Very Good J     VVS2     62.8    57   336  3.94  3.96  2.48
##  7  0.24 Very Good I     VVS1     62.3    57   336  3.95  3.98  2.47
##  8  0.26 Very Good H     SI1      61.9    55   337  4.07  4.11  2.53
##  9  0.22 Fair      E     VS2      65.1    61   337  3.87  3.78  2.49
## 10  0.23 Very Good H     VS1      59.4    61   338  4     4.05  2.39
## # ℹ 53,930 more rows</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="data_viz.html#cb12-1" tabindex="-1"></a>mpg</span></code></pre></div>
<pre><code>## # A tibble: 234 × 11
##    manufacturer model      displ  year   cyl trans drv     cty   hwy fl    class
##    &lt;chr&gt;        &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;
##  1 audi         a4           1.8  1999     4 auto… f        18    29 p     comp…
##  2 audi         a4           1.8  1999     4 manu… f        21    29 p     comp…
##  3 audi         a4           2    2008     4 manu… f        20    31 p     comp…
##  4 audi         a4           2    2008     4 auto… f        21    30 p     comp…
##  5 audi         a4           2.8  1999     6 auto… f        16    26 p     comp…
##  6 audi         a4           2.8  1999     6 manu… f        18    26 p     comp…
##  7 audi         a4           3.1  2008     6 auto… f        18    27 p     comp…
##  8 audi         a4 quattro   1.8  1999     4 manu… 4        18    26 p     comp…
##  9 audi         a4 quattro   1.8  1999     4 auto… 4        16    25 p     comp…
## 10 audi         a4 quattro   2    2008     4 manu… 4        20    28 p     comp…
## # ℹ 224 more rows</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="data_viz.html#cb14-1" tabindex="-1"></a>economics</span></code></pre></div>
<pre><code>## # A tibble: 574 × 6
##    date         pce    pop psavert uempmed unemploy
##    &lt;date&gt;     &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;
##  1 1967-07-01  507. 198712    12.6     4.5     2944
##  2 1967-08-01  510. 198911    12.6     4.7     2945
##  3 1967-09-01  516. 199113    11.9     4.6     2958
##  4 1967-10-01  512. 199311    12.9     4.9     3143
##  5 1967-11-01  517. 199498    12.8     4.7     3066
##  6 1967-12-01  525. 199657    11.8     4.8     3018
##  7 1968-01-01  531. 199808    11.7     5.1     2878
##  8 1968-02-01  534. 199920    12.3     4.5     3001
##  9 1968-03-01  544. 200056    11.7     4.1     2877
## 10 1968-04-01  544  200208    12.3     4.6     2709
## # ℹ 564 more rows</code></pre>
<p>This chapter is meant to serve as a guide on how to produce effective graphics using tidy data. Throughout the chapter, I will link more comprehensive resources that go into further depth about the grammar of graphics and the intricacies of ggplot2. This chapter provides an outline of the steps required to produce visualizations, as well as a cursory introduction to the foundational theory of effective graphics.</p>
<div id="graphics_grammar" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> The Grammar of Graphics<a href="data_viz.html#graphics_grammar" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><code>ggplot2</code> uses the theoretical framework called the grammar of graphics as the basis for its organization. There are three essential components to a graphic:<span class="citation"><a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a></span></p>
<ul>
<li><code>data</code>: the clean data containing the variable(s) of interest</li>
<li><code>geom</code>: the type of geometric object in the plot
<ul>
<li>e.g. line, point, bar, box</li>
</ul></li>
<li><code>aes</code>: aesthetic attributes of the geometric object
<ul>
<li>e.g. x/y variables, color, shape, size</li>
<li>can be mapped (coordinated) to variables</li>
</ul></li>
</ul>
<p>For our first plot, we will plot the <code>displ</code> and <code>hwy</code> variables from the <code>mpg</code> data set. The code chunk below demonstrates the most basic syntax for producing a graphic using ggplot.<span class="citation"><a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a></span></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="data_viz.html#cb16-1" tabindex="-1"></a>(example1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy)) <span class="sc">+</span> <span class="co"># data =, x =, and y = are not required</span></span>
<span id="cb16-2"><a href="data_viz.html#cb16-2" tabindex="-1"></a>  <span class="fu">geom_point</span>())</span></code></pre></div>
<p><img src="_main_files/figure-html/Example%201-1.png" width="672" /></p>
<p>In this plot, <code>displ</code> refers to engine displacement (in liters) and <code>hwy</code> refers to highway miles per gallon. It is always crucial to know what each variable you are working with refers to. If you are unsure, check the code book for your data set. For the data sets we are working with in this chapter, their code books can be found in their documentation. <a href="https://ggplot2.tidyverse.org/reference/mpg.html">This link</a> provides the code book for <code>mpg</code>. In terms of the grammar discussed above, the <code>data</code> is <code>mpg</code>, the <code>geom</code> is a scatter plot (designated by adding the <code>+ geom_point()</code>), and the <code>aes</code> refers to the variables assigned to each axis within <code>aes()</code> in the first line. I saved this plot as <code>example1</code> and put parentheses around the whole statement so it would print.</p>
<p>Below, I break <code>example1</code> into its different components. In the first line, the <code>data =</code> parameter tells <code>ggplot2</code> the relevant data frame. The x and y parameters within <code>aes()</code> tell ggplot which variables are assigned to each axis. This covers the most basic components of each visualization, taking care of the <code>data</code> and <code>aes</code> features of the visualization. There is no geom in the example below, so only a blank graph with assigned axes is outputted.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="data_viz.html#cb17-1" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy))</span></code></pre></div>
<p><img src="_main_files/figure-html/Blank%20ggplot-1.png" width="672" /></p>
<p>After establishing the basic grid where the data will be visualized, the next step is to add geoms. Our first example graph used the geom <code>geom_point()</code> to create a scatter plot. One of the most powerful features of <code>ggplot2</code> is its ability to layer multiple geoms over the same visualization. Only certain geoms are able to be layered together. The code chunk below demonstrates how to use multiple geoms. Each one can be added using the following code template: <code>+ geom_function()</code>. Different types of geoms will be covered in detail later in <a href="data_viz.html#geoms">Section 4.4: Geoms</a>.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="data_viz.html#cb18-1" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy)) <span class="sc">+</span> </span>
<span id="cb18-2"><a href="data_viz.html#cb18-2" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb18-3"><a href="data_viz.html#cb18-3" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="co"># the geom_smooth function adds a line of best fit with a confidence interval</span></span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula = &#39;y ~ x&#39;</code></pre>
<p><img src="_main_files/figure-html/Add%20Geoms-1.png" width="672" /></p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="data_viz.html#cb20-1" tabindex="-1"></a><span class="co"># look at the documentation of geom_smooth to determine the method it uses to smooth</span></span></code></pre></div>
<p>If you would like to vary the parameters in <code>ggplot()</code> between geoms, specify them differently within each geom function instead of within <code>ggplot()</code>. It is important to note that everything written within <code>ggplot()</code> applies to all geoms. The code chunk below demonstrates how to layer two geoms using different variables. To differentiate between the two different variables, you must assign each one a different color. To assign an attribute that is not mapped to an aesthetic (within <code>aes()</code>) place it after <code>aes()</code> as demonstrated below. The two different variables on the same axis (the y-axis in this example) must share a unit for this to make sense (both <code>cty</code> and <code>hwy</code> are in miles per gallon).</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="data_viz.html#cb21-1" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg) <span class="sc">+</span> </span>
<span id="cb21-2"><a href="data_viz.html#cb21-2" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy), <span class="at">color =</span> <span class="st">&quot;black&quot;</span>) <span class="sc">+</span> </span>
<span id="cb21-3"><a href="data_viz.html#cb21-3" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> cty), <span class="at">color =</span> <span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/Unmapped%20Attributes-1.png" width="672" /></p>
<p>The issue with the plot above is that it does not automatically generate a legend. While this demonstrates how geoms can be layered, there is a better way to make this graph covered in <a href="data_viz.html#color">Section 4.2.1: Color</a>.</p>
</div>
<div id="aes" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> Aesthetics<a href="data_viz.html#aes" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The most basic aesthetic attributes included in just about every type of plot are the assignment of the axes. Some types of plots (e.g histogram) only require the x-axis. Other types of aesthetic attributes can be used to differentiate between observations based on categorical or numeric variables.</p>
<p>The first important differentiation about aesthetics, alluded to earlier, is the difference between putting something within <code>aes()</code> and putting something behind it. When an attribute is within <code>aes()</code>, the computer assumes that you are referring to a variable within the data. When an attribute is after the aesthetics (e.g.<code>aes(), color = "blue"</code>), then it applies the aesthetic change to the whole geom without mapping it to a variable. The difference is demonstrated in the code chunk below using the <code>example1</code> scatter plot and in the examples dealing with different types of aesthetics.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="data_viz.html#cb22-1" tabindex="-1"></a><span class="co"># when color is within aes(), the computer thinks &quot;red&quot; is a categorical variable and incorrectly makes a legend</span></span>
<span id="cb22-2"><a href="data_viz.html#cb22-2" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg) <span class="sc">+</span> </span>
<span id="cb22-3"><a href="data_viz.html#cb22-3" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy, <span class="at">color =</span> <span class="st">&quot;red&quot;</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/Unmapped%20vs%20Mapped-1.png" width="672" /></p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="data_viz.html#cb23-1" tabindex="-1"></a><span class="co"># when the color is after aes(), all points are colored red</span></span>
<span id="cb23-2"><a href="data_viz.html#cb23-2" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg) <span class="sc">+</span> </span>
<span id="cb23-3"><a href="data_viz.html#cb23-3" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy), <span class="at">color =</span> <span class="st">&quot;red&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/Unmapped%20vs%20Mapped-2.png" width="672" /></p>
<p>The important point here is that everything within <code>aes()</code> corresponds to a variable, when everything afterwards modifies an attribute of the visualization in a fixed manner.</p>
<p>This section will cover the basic attributes of a scatter plot, through a variety of examples using the data sets mentioned at the beginning of the chapter. Each of these attributes has different visual aspects that make them better or worse for categorical or continuous variables. Replicating and modifying these examples is the best way to practice getting comfortable making visualizations. All examples in this section will modify the <code>example1</code> plot, which uses the <code>mpg</code> data set.</p>
<div id="color" class="section level3 hasAnchor" number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> Color<a href="data_viz.html#color" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Color is a powerful attribute that lends itself well to both categorical variables and continuous ones. When used outside of aesthetic mapping purposes, it can be used to create graphics that are more visually appealing. When trying to communicate information through color, make sure that the uninformed reader is able to easily differentiate between categories or read the scale if the variable is continuous. Experimentation using different attributes to represent a variable is how to find the clearest way to communicate meaning through aesthetics.</p>
<p>In the plot below, color is used to differentiates between different classes of car, a categorical variable. Importantly, each class of car is identifiable through the legend.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="data_viz.html#cb24-1" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg) <span class="sc">+</span> </span>
<span id="cb24-2"><a href="data_viz.html#cb24-2" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy, <span class="at">color =</span> class))</span></code></pre></div>
<p><img src="_main_files/figure-html/Color%20Mapped%20to%20Categorical-1.png" width="672" /></p>
<p>The next example uses scaled color to represent the continuous variable <code>cty</code>, referring to the city miles per gallon. Often, when there are many points in a scatter plot or a wide range of values represented by color, the visualization can become unclear to the observer. Each visualization is unique and must be individually assessed in this respect.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="data_viz.html#cb25-1" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg) <span class="sc">+</span> </span>
<span id="cb25-2"><a href="data_viz.html#cb25-2" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy, <span class="at">color =</span> cty))</span></code></pre></div>
<p><img src="_main_files/figure-html/Color%20Mapped%20to%20Continuous-1.png" width="672" /></p>
<p>Using the color aesthetic addresses the problem of layering geoms to manually set different colors above. Unfortunately, the <code>mpg</code> data set does not come in a format where this can be done without wrangling the data. The code chunk below demonstrates how to modify the data using <code>pivot_longer()</code>, creating a single mpg variable where a new categorical variable designates if the mpg variable refers to highway or city. That new cateogrical variable is then mapped to color.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="data_viz.html#cb26-1" tabindex="-1"></a>mpg <span class="sc">|&gt;</span></span>
<span id="cb26-2"><a href="data_viz.html#cb26-2" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">c</span>(hwy, cty), <span class="at">names_to =</span> <span class="st">&quot;mpg_type&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;mpg&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb26-3"><a href="data_viz.html#cb26-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>displ, <span class="at">y=</span>mpg, <span class="at">color=</span>mpg_type)) <span class="sc">+</span></span>
<span id="cb26-4"><a href="data_viz.html#cb26-4" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/Pivot%20and%20Map%20Type%20of%20Value%20to%20Color-1.png" width="672" /></p>
</div>
<div id="shape" class="section level3 hasAnchor" number="4.2.2">
<h3><span class="header-section-number">4.2.2</span> Shape<a href="data_viz.html#shape" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Shape is only used to represent categorical variables. It can be used to represent a continuous variable, but only if that variable is simplified into a categorical variable that designates a level or range for the continuous variable (e.g. low, medium, high).</p>
<p>The code chunk below shows an example of mapping shape to the drive train variable (<code>drv</code>) and changing the shape for look without mapping to a variable.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="data_viz.html#cb27-1" tabindex="-1"></a><span class="co"># mapping shape to the class variable </span></span>
<span id="cb27-2"><a href="data_viz.html#cb27-2" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg) <span class="sc">+</span> </span>
<span id="cb27-3"><a href="data_viz.html#cb27-3" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy, <span class="at">shape =</span> drv))</span></code></pre></div>
<p><img src="_main_files/figure-html/Mapped%20vs%20Unmapped%20Shape-1.png" width="672" /></p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="data_viz.html#cb28-1" tabindex="-1"></a><span class="co"># changing shape for look only</span></span>
<span id="cb28-2"><a href="data_viz.html#cb28-2" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg) <span class="sc">+</span> </span>
<span id="cb28-3"><a href="data_viz.html#cb28-3" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy), <span class="at">shape =</span> <span class="dv">17</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/Mapped%20vs%20Unmapped%20Shape-2.png" width="672" /></p>
<p>For information of which shape corresponds to which number, when not using mapping, look at <a href="https://r4ds.had.co.nz/data-visualisation.html#aesthetic-mappings">the aesthetics mapping section</a> of <em>R for Data Science</em>.<span class="citation"><a href="#fn7" class="footnote-ref" id="fnref7"><sup>7</sup></a></span></p>
</div>
<div id="size" class="section level3 hasAnchor" number="4.2.3">
<h3><span class="header-section-number">4.2.3</span> Size<a href="data_viz.html#size" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Size can be used to designate categorical variables, but often it can be hard to differentiate between levels and it makes the graph less legible. I would recommend only using size with a continuous variable, as it lends itself well to meaningful visual comparisons on a continuous scale. The example below maps size to the city miles per gallon variable (cty) from mpg.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="data_viz.html#cb29-1" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg) <span class="sc">+</span> </span>
<span id="cb29-2"><a href="data_viz.html#cb29-2" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy, <span class="at">size =</span> cty))</span></code></pre></div>
<p><img src="_main_files/figure-html/Size-1.png" width="672" /></p>
<p>As demonstrated above using color, the size parameter can also be used outside of <code>aes()</code> to uniformly change all points. Often, when a graph is hard to read, reducing the size of points can make it more legible. This can be observed in the faceting example below.</p>
</div>
<div id="shade" class="section level3 hasAnchor" number="4.2.4">
<h3><span class="header-section-number">4.2.4</span> Shading<a href="data_viz.html#shade" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Shading can be changed through the <code>alpha =</code> parameter. The first example below reproduces a plot using the same variables as the size example, except <code>cty</code> is mapped to alpha instead of size. The second examples uses the same variables as the first example from the color section, except it maps class to alpha instead of color.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="data_viz.html#cb30-1" tabindex="-1"></a><span class="co"># using alpha to map a continuous variable</span></span>
<span id="cb30-2"><a href="data_viz.html#cb30-2" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg) <span class="sc">+</span> </span>
<span id="cb30-3"><a href="data_viz.html#cb30-3" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy, <span class="at">alpha =</span> cty))</span></code></pre></div>
<p><img src="_main_files/figure-html/Alpha-1.png" width="672" /></p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="data_viz.html#cb31-1" tabindex="-1"></a><span class="co"># using alpha to map a categorical variable</span></span>
<span id="cb31-2"><a href="data_viz.html#cb31-2" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg) <span class="sc">+</span> </span>
<span id="cb31-3"><a href="data_viz.html#cb31-3" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy, <span class="at">alpha =</span> class))</span></code></pre></div>
<pre><code>## Warning: Using alpha for a discrete variable is not advised.</code></pre>
<p><img src="_main_files/figure-html/Alpha-2.png" width="672" /></p>
<p>While shading can be mapped to a categorical variable, it is not recommended as it is better suited for continuous distinctions.</p>
</div>
</div>
<div id="faceting" class="section level2 hasAnchor" number="4.3">
<h2><span class="header-section-number">4.3</span> Faceting<a href="data_viz.html#faceting" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Faceting tells the computer to create separate graphs around a categorical variable using the specified geoms. This cannot be used with continuous variables. Faceting can be a powerful tool for observing differences between observations belonging to different categories and for creating effective time series graphs (covered in <a href="data_viz.html#time_series_plot">Section 4.7: Plotting Time Series</a>). There are two function used to create facets: <code>facet_wrap()</code> and <code>facet_grid()</code>. <code>facet_wrap()</code> is used for faceting by a single variable, while <code>facet_grid()</code> is used to facet using two variables.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="data_viz.html#cb33-1" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg) <span class="sc">+</span> </span>
<span id="cb33-2"><a href="data_viz.html#cb33-2" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy)) <span class="sc">+</span></span>
<span id="cb33-3"><a href="data_viz.html#cb33-3" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> class) <span class="co"># &#39;~ variable&#39; is crucial to the syntax of faceting </span></span></code></pre></div>
<p><img src="_main_files/figure-html/Faceting-1.png" width="672" /></p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="data_viz.html#cb34-1" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg) <span class="sc">+</span> </span>
<span id="cb34-2"><a href="data_viz.html#cb34-2" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy), <span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span> <span class="co"># size is changed for legibility</span></span>
<span id="cb34-3"><a href="data_viz.html#cb34-3" tabindex="-1"></a>  <span class="fu">facet_grid</span>(drv <span class="sc">~</span> class)  <span class="co"># in this case &#39;~&#39; separates the two variables you want to facet</span></span></code></pre></div>
<p><img src="_main_files/figure-html/Faceting-2.png" width="672" /></p>
<p>This feature of <code>ggplot2</code> is very powerful as it allows a clear comparison of <code>hwy</code> and <code>displ</code> between different classes of cars. Trends within and between categories are able to be observed much more easily. This can be combined with other aesthetics to create visualizations that provide a great deal of information. Be cautious that you are not including too much information in one visualization. Sometimes it is best to produce individual facets manually for more in-depth analysis.</p>
</div>
<div id="geoms" class="section level2 hasAnchor" number="4.4">
<h2><span class="header-section-number">4.4</span> Geoms: Types of Plots<a href="data_viz.html#geoms" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This section will cover different types of geoms and how to use them in <code>ggplot2</code>. First, I will go over the five named graphs covered in <em>Statistical Inference in Data Science: A Modern Dive into R and the Tidyverse</em>: scatter plots, line graphs, histograms, box plots, and bar charts.<span class="citation"><a href="#fn8" class="footnote-ref" id="fnref8"><sup>8</sup></a></span> Within each of these sections I will cover more unorthodox approaches to producing similar types of graphics. Many of these geoms can be combined to provide more information in each visualization as well. Each of these graphics has data which they are useful for; the best way to determine which one is best for your data is experimentation.</p>
<div id="scatter" class="section level3 hasAnchor" number="4.4.1">
<h3><span class="header-section-number">4.4.1</span> Scatter Plots<a href="data_viz.html#scatter" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>So far we have extensively covered scatter plots in the earlier examples. To create a scatter plot, we use the <code>geom_point()</code> function demonstrated in examples above. Scatter plots are useful for visualizing the relationship between two continuous variables. They can be used for categorical variables as well, but convey much less information. For the examples in this section, I use the <code>carat</code> and <code>price</code> variables from the <code>diamonds</code> data set.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="data_viz.html#cb35-1" tabindex="-1"></a>diamonds <span class="sc">|&gt;</span> </span>
<span id="cb35-2"><a href="data_viz.html#cb35-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price)) <span class="sc">+</span></span>
<span id="cb35-3"><a href="data_viz.html#cb35-3" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="fl">0.25</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/Overplotted%20Scatter-1.png" width="672" /></p>
<p>I choose this example because it is a classic example of over-plotting.<span class="citation"><a href="#fn9" class="footnote-ref" id="fnref9"><sup>9</sup></a></span> This means that there are too many points close together. In the plot above, this is so extreme there appear to be large black masses in much of the graph. I adjusted the size to try and mitigate this, but it only provided a slight improvement.</p>
<p>One possible solutions is to use the <code>alpha =</code> parameter to adjust the transparency of the points. This is demonstrated in the code chunk below. This helps slightly but there is still a large amount of congestion.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="data_viz.html#cb36-1" tabindex="-1"></a>diamonds <span class="sc">|&gt;</span> </span>
<span id="cb36-2"><a href="data_viz.html#cb36-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price)) <span class="sc">+</span></span>
<span id="cb36-3"><a href="data_viz.html#cb36-3" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.1</span>, <span class="at">size =</span> <span class="fl">0.25</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/Alpha%20Scatter-1.png" width="672" /></p>
<p>The other method for mitigating the overlap of our data points is to jitter them. This means that each point is slightly randomly moved. This should be done with caution. While it does not modify the data itself, randomly jittering the points can produce a misleading visualization. This can be done through using <code>geom_jitter()</code> instead of <code>geom_point()</code>.<span class="citation"><a href="#fn10" class="footnote-ref" id="fnref10"><sup>10</sup></a></span> To specify how much jitter to add, you can use the <code>width =</code> and <code>height =</code> arguments.<span class="citation"><a href="#fn11" class="footnote-ref" id="fnref11"><sup>11</sup></a></span> I do not recommend using this; it is never a light decision to modify data. If you do, make sure you note that they are jittered in the visualization.</p>
<p>An alternative way to deal with over-plotting is to use an alternative geom that visualizes the density through color. These geoms, <code>geom_bin2d()</code> and <code>geom_hex()</code> mitigate the overlap of points through binning the observations. The code chunk below demonstrates how to use these two examples using the carat and price variables in the previous examples.<span class="citation"><a href="#fn12" class="footnote-ref" id="fnref12"><sup>12</sup></a></span></p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="data_viz.html#cb37-1" tabindex="-1"></a>diamonds <span class="sc">|&gt;</span></span>
<span id="cb37-2"><a href="data_viz.html#cb37-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price)) <span class="sc">+</span> </span>
<span id="cb37-3"><a href="data_viz.html#cb37-3" tabindex="-1"></a>  <span class="fu">geom_bin2d</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/Geom%20Hex%20and%20Bin2d-1.png" width="672" /></p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="data_viz.html#cb38-1" tabindex="-1"></a>diamonds <span class="sc">|&gt;</span></span>
<span id="cb38-2"><a href="data_viz.html#cb38-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> carat, <span class="at">y =</span> price)) <span class="sc">+</span> </span>
<span id="cb38-3"><a href="data_viz.html#cb38-3" tabindex="-1"></a>  <span class="fu">geom_hex</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/Geom%20Hex%20and%20Bin2d-2.png" width="672" /></p>
</div>
<div id="line" class="section level3 hasAnchor" number="4.4.2">
<h3><span class="header-section-number">4.4.2</span> Line Graphs<a href="data_viz.html#line" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When producing a visualization, the variable on the x-axis is usually called the explanatory variable and the variable on the y-axis is usually called the dependent variable. Line graphs inherently imply that the points are sequential because they are connected visually. Therefore, line graphs are usually used when the explanatory variable (x-axis) is some unit of time.</p>
<p>To create a line graph, instead of <code>geom_point()</code> use <code>geom_line()</code>. In the example below, I use the <code>time_hour</code> and <code>temp</code> variables in the weather data frame from <code>nycflights13</code>. To restrict the number of observations, I only use the weather from January 2013.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="data_viz.html#cb39-1" tabindex="-1"></a>weather <span class="sc">|&gt;</span> </span>
<span id="cb39-2"><a href="data_viz.html#cb39-2" tabindex="-1"></a>  <span class="fu">filter</span>(month <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb39-3"><a href="data_viz.html#cb39-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> time_hour, <span class="at">y =</span> temp)) <span class="sc">+</span> </span>
<span id="cb39-4"><a href="data_viz.html#cb39-4" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/Basic%20Line%20Graph-1.png" width="672" /></p>
<p>This produces a line graph that appears to have too many observations for the scale of the x-axis (by day). There are a few ways to mitigate this. You could only use the temperature from a certain time each day. This reduces the number of observations included in the graph making it much more legible. Another possible solutions would be to calculate an average for each day and use that instead. Both solutions are demonstrated in the code chunk below. The graph of the average temperatures produces a much better looking graph. This is where the data wrangling skills from the previous chapter really come in handy.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="data_viz.html#cb40-1" tabindex="-1"></a>weather <span class="sc">|&gt;</span> </span>
<span id="cb40-2"><a href="data_viz.html#cb40-2" tabindex="-1"></a>  <span class="fu">filter</span>(month <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> hour <span class="sc">==</span> <span class="dv">12</span>) <span class="sc">|&gt;</span></span>
<span id="cb40-3"><a href="data_viz.html#cb40-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> time_hour, <span class="at">y =</span> temp)) <span class="sc">+</span> </span>
<span id="cb40-4"><a href="data_viz.html#cb40-4" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/Clean%20Line%20Graphs-1.png" width="672" /></p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="data_viz.html#cb41-1" tabindex="-1"></a>weather <span class="sc">|&gt;</span></span>
<span id="cb41-2"><a href="data_viz.html#cb41-2" tabindex="-1"></a>  <span class="fu">filter</span>(month <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb41-3"><a href="data_viz.html#cb41-3" tabindex="-1"></a>  <span class="fu">group_by</span>(day) <span class="sc">|&gt;</span></span>
<span id="cb41-4"><a href="data_viz.html#cb41-4" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">avg_temp =</span> <span class="fu">mean</span>(temp)) <span class="sc">|&gt;</span> <span class="co"># need to rename mean temp to a proper name for coding</span></span>
<span id="cb41-5"><a href="data_viz.html#cb41-5" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> day, <span class="at">y =</span> avg_temp)) <span class="sc">+</span></span>
<span id="cb41-6"><a href="data_viz.html#cb41-6" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/Clean%20Line%20Graphs-2.png" width="672" /></p>
</div>
<div id="histograms" class="section level3 hasAnchor" number="4.4.3">
<h3><span class="header-section-number">4.4.3</span> Histograms and Frequency Polygons<a href="data_viz.html#histograms" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A histogram is useful for visualizing the distribution of a variable. In a histogram, only the x-axis is assigned a variable. That variable is sectioned into bins. This means that all the observations are broken up into a number of groups, specified through the parameter <code>bins =</code>. When <code>bins =</code> is not specified, <code>ggplot2</code> defaults to 30 bins. The more bins you use, the greater the level of detail in the histogram. The other way to set bins is to use the <code>binwidth =</code> argument. This specifies the range of each bin and makes the appropriate number of bins based on the specified size.</p>
<p>In a histogram, the y-axis is usually the count of the observations that fit into each bin. The other option for the y-axis is the density of observations in each bin. This is a number between 0 and 1 that shows the percentage of observations within each bin. In the code chunk below, I use the price variable from the <code>diamonds</code> data set to demonstrate the <code>geom_histogram()</code> function. The first example shows a histogram using the default count stat with 100 bins. The second example shows a histogram using density instead of count and a bin width of 100. The <code>geom_density()</code> function, in the second example, adds the red line indicating the continuous density in addition to the bars.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="data_viz.html#cb42-1" tabindex="-1"></a><span class="co"># histogram using the default count stat and bins = argument</span></span>
<span id="cb42-2"><a href="data_viz.html#cb42-2" tabindex="-1"></a>diamonds <span class="sc">|&gt;</span></span>
<span id="cb42-3"><a href="data_viz.html#cb42-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> price)) <span class="sc">+</span></span>
<span id="cb42-4"><a href="data_viz.html#cb42-4" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">bins =</span> <span class="dv">100</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/Count%20and%20Density%20Histograms-1.png" width="672" /></p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="data_viz.html#cb43-1" tabindex="-1"></a><span class="co"># histogram using density instead of count and the bidwidth = argument</span></span>
<span id="cb43-2"><a href="data_viz.html#cb43-2" tabindex="-1"></a>diamonds <span class="sc">|&gt;</span></span>
<span id="cb43-3"><a href="data_viz.html#cb43-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> price, <span class="at">y =</span> <span class="fu">after_stat</span>(density))) <span class="sc">+</span></span>
<span id="cb43-4"><a href="data_viz.html#cb43-4" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">100</span>) <span class="sc">+</span> </span>
<span id="cb43-5"><a href="data_viz.html#cb43-5" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">color =</span> <span class="st">&quot;red&quot;</span>) <span class="co"># adds the red line indicating the density</span></span></code></pre></div>
<p><img src="_main_files/figure-html/Count%20and%20Density%20Histograms-2.png" width="672" /></p>
<p>Frequency polygons are another useful way to show the distribution of a single variable. To create a frequency polygon in <code>ggplot2</code>, use the <code>geom_freqpoly()</code> function. When trying to observe the difference in the distribution of a variable between categories, frequency polygons offer a much better direct visual comparison. In the code chunk below, I demonstrate how to make a simple frequency polygon using the same variable as above and then use the cut variable to demonstrate how to use it to compare distributions between categories.<span class="citation"><a href="#fn13" class="footnote-ref" id="fnref13"><sup>13</sup></a></span></p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="data_viz.html#cb44-1" tabindex="-1"></a>diamonds <span class="sc">|&gt;</span></span>
<span id="cb44-2"><a href="data_viz.html#cb44-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> price)) <span class="sc">+</span></span>
<span id="cb44-3"><a href="data_viz.html#cb44-3" tabindex="-1"></a>  <span class="fu">geom_freqpoly</span>(<span class="at">bins =</span> <span class="dv">100</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/Geom%20Freqpoly-1.png" width="672" /></p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="data_viz.html#cb45-1" tabindex="-1"></a>diamonds <span class="sc">|&gt;</span></span>
<span id="cb45-2"><a href="data_viz.html#cb45-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> price, <span class="at">color =</span> cut)) <span class="sc">+</span></span>
<span id="cb45-3"><a href="data_viz.html#cb45-3" tabindex="-1"></a>  <span class="fu">geom_freqpoly</span>(<span class="at">bins =</span> <span class="dv">100</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/Geom%20Freqpoly-2.png" width="672" /></p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="data_viz.html#cb46-1" tabindex="-1"></a><span class="co"># this is an example from R for Data Science</span></span></code></pre></div>
<p><span class="citation"><a href="#fn14" class="footnote-ref" id="fnref14"><sup>14</sup></a></span></p>
</div>
<div id="box_plots" class="section level3 hasAnchor" number="4.4.4">
<h3><span class="header-section-number">4.4.4</span> Box Plots<a href="data_viz.html#box_plots" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Box plots are another type of visualization that lends itself well to analyzing the distribution of observations across different categories. They are very useful for large data sets because each box plot looks the same regardless of the number of observations plotted. This feature is because box plots are all based off the five number summary: minimum, first quartile (25th percentile), median, third quartile (75th percentile), and maximum.<span class="citation"><a href="#fn15" class="footnote-ref" id="fnref15"><sup>15</sup></a></span> To create a box plot, we use the <code>geom_boxplot()</code> function and usually two different variables, one continuous and one categorical. Typically, the continuous variable is mapped to the y-axis and the categorical one is mapped to the x-axis, though this can be reversed. The code chunk below demonstrates the syntax for making a box plot using the same variables as the histogram examples.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="data_viz.html#cb47-1" tabindex="-1"></a>diamonds <span class="sc">|&gt;</span></span>
<span id="cb47-2"><a href="data_viz.html#cb47-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> cut, <span class="at">y =</span> price)) <span class="sc">+</span> </span>
<span id="cb47-3"><a href="data_viz.html#cb47-3" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/Box%20Plot-1.png" width="672" /></p>
<p>While the uniform look of box plots regardless of the number of observations can be an advantage, some analysis may require a visualization that is more sensitive to the intricacies of the distribution. <code>geom_violin()</code> is a similar type of visualization that sacrifices the identification of outliers for a focus on where the observations fall. The code chunk below demonstrates <code>geom_violin()</code> using the same variables as the example above.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="data_viz.html#cb48-1" tabindex="-1"></a>diamonds <span class="sc">|&gt;</span></span>
<span id="cb48-2"><a href="data_viz.html#cb48-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> cut, <span class="at">y =</span> price)) <span class="sc">+</span> </span>
<span id="cb48-3"><a href="data_viz.html#cb48-3" tabindex="-1"></a>  <span class="fu">geom_violin</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/Geom%20Violin-1.png" width="672" /></p>
</div>
<div id="bar_charts" class="section level3 hasAnchor" number="4.4.5">
<h3><span class="header-section-number">4.4.5</span> Bar Charts<a href="data_viz.html#bar_charts" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Bar charts are most useful for visualizing the distribution of a categorical variable.<span class="citation"><a href="#fn16" class="footnote-ref" id="fnref16"><sup>16</sup></a></span> In <code>ggplot2</code>, the function for creating bar charts is <code>geom_bar()</code>. Notably, this function summarizes the data, automatically counting the number of observations in each category. If the data is summarized using the skills learned in <a href="data.html#summarize">Chapter 2</a>, you should use the <code>geom_col()</code> function and specify both a <code>x =</code> and <code>y =</code> parameter. The code chunk below demonstrates both how to use the <code>geom_bar()</code> function, and how to generate the correct summary table and then use the <code>geom_col()</code> function. Both methods produce the same output and use the cut variable from the <code>diamonds</code> data set.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="data_viz.html#cb49-1" tabindex="-1"></a>diamonds <span class="sc">|&gt;</span></span>
<span id="cb49-2"><a href="data_viz.html#cb49-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> cut)) <span class="sc">+</span></span>
<span id="cb49-3"><a href="data_viz.html#cb49-3" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/Basic%20Bar%20Chart-1.png" width="672" /></p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="data_viz.html#cb50-1" tabindex="-1"></a>diamonds <span class="sc">|&gt;</span></span>
<span id="cb50-2"><a href="data_viz.html#cb50-2" tabindex="-1"></a>  <span class="fu">group_by</span>(cut) <span class="sc">|&gt;</span></span>
<span id="cb50-3"><a href="data_viz.html#cb50-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">count =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span> <span class="co"># run this code without the plotting to see the summary table</span></span>
<span id="cb50-4"><a href="data_viz.html#cb50-4" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> cut, <span class="at">y =</span> count)) <span class="sc">+</span></span>
<span id="cb50-5"><a href="data_viz.html#cb50-5" tabindex="-1"></a>  <span class="fu">geom_col</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/Basic%20Bar%20Chart-2.png" width="672" /></p>
<p>The aesthetics of bar charts are also very useful for analyzing the relationship between two categorical variables.<span class="citation"><a href="#fn17" class="footnote-ref" id="fnref17"><sup>17</sup></a></span> In the code chunk below, I generate the same graph using <code>geom_bar()</code> and map the <code>color =</code> and <code>fill =</code> aesthetics to the color variable in the <code>diamonds</code> data set. This allows for visual comparison of the number of observations that have a certain color between the different categories of cuts.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="data_viz.html#cb51-1" tabindex="-1"></a>diamonds <span class="sc">|&gt;</span></span>
<span id="cb51-2"><a href="data_viz.html#cb51-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> cut, <span class="at">color =</span> color, <span class="at">fill =</span> color)) <span class="sc">+</span></span>
<span id="cb51-3"><a href="data_viz.html#cb51-3" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/Colored%20Bar%20Chart-1.png" width="672" /></p>
<p>Bar charts have an argument called <code>position =</code> that allows you to change the layout of how each bar is arranged in the context of mapping another variable to color. The default position argument, shown in the previous example, is <code>position = "stack"</code>. This means the different categories of color are stacked on top of each other. When <code>position = stack</code>, it can be hard to visually compare the number of observations of the color categories between cut categories. The first example below, using <code>position = "fill"</code>, standardizes the size of each bar, allowing for direct comparison between categories. The second example, using <code>position = "dodge"</code>, unstacks the bars so the exact level of each colored bar can be directly compared.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="data_viz.html#cb52-1" tabindex="-1"></a>diamonds <span class="sc">|&gt;</span></span>
<span id="cb52-2"><a href="data_viz.html#cb52-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> cut, <span class="at">color =</span> color, <span class="at">fill =</span> color)) <span class="sc">+</span></span>
<span id="cb52-3"><a href="data_viz.html#cb52-3" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">&quot;fill&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/Bar%20Chart%20Position-1.png" width="672" /></p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="data_viz.html#cb53-1" tabindex="-1"></a>diamonds <span class="sc">|&gt;</span></span>
<span id="cb53-2"><a href="data_viz.html#cb53-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> cut, <span class="at">color =</span> color, <span class="at">fill =</span> color)) <span class="sc">+</span></span>
<span id="cb53-3"><a href="data_viz.html#cb53-3" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">position =</span> <span class="st">&quot;dodge&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/Bar%20Chart%20Position-2.png" width="672" /></p>
</div>
<div id="other_layers" class="section level3 hasAnchor" number="4.4.6">
<h3><span class="header-section-number">4.4.6</span> Additional Geom Layers<a href="data_viz.html#other_layers" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For reference below I have included images of the <code>ggplot2</code> cheat sheet. This reference includes almost any possible geom you could want to use in creating a visualization. This resource is available online <a href="https://github.com/rstudio/cheatsheets/blob/main/data-visualization.pdf">here</a>.</p>
<p><img src="figures/R_ggplot2_cheatsheet-1.png" />
<img src="figures/R_ggplot2_cheatsheet-2.png" /></p>
<p>One important note is to avoid pie charts! Research has shown that they often lead to misinterpretations of data.<span class="citation"><a href="#fn18" class="footnote-ref" id="fnref18"><sup>18</sup></a></span> Visually it is very hard to compare one piece of the pie to another due to the arrangement. Often, bar charts are a much better tool for these types of visualizations.</p>
</div>
</div>
<div id="custom_axes" class="section level2 hasAnchor" number="4.5">
<h2><span class="header-section-number">4.5</span> Modifying Data and Axes<a href="data_viz.html#custom_axes" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>As discussed above, over-plotting is a common issue that can make well though-out graphs illegible. Faceting is one solution, but can lead to the individual facet graphs being to small to be of much use. In this section I will discuss other possible solutions to common over-plotting issues.</p>
<div id="filter_plot" class="section level3 hasAnchor" number="4.5.1">
<h3><span class="header-section-number">4.5.1</span> Filtering<a href="data_viz.html#filter_plot" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This may seem a little obvious, but a common and useful solution is to simply plot less data through filtering. Filtering data is covered in <a href="data.html#filtering">this section</a>. In the <a href="data_viz.html#line">Line Graphs section</a> example, I use filtering to select only flights in January 2013. Piping is an important tool with these types of problems. Piping allows you to take a data frame, pipe it through any modifiers to wrangle it into the desired form, and then pipe the result straight into <code>ggplot()</code>. This removes the intermediary step of saving a modified version of your data before you create a new graph. If you are using the modified data multiple times, it is worth it to save it so you do not have to repeat code. An important part of data science is having a focused question. While looking at a very large data set in a meaningful way can be very important, when working with large data always ask yourself if you need all the data you have to answer your question.</p>
</div>
<div id="x_and_y_lim" class="section level3 hasAnchor" number="4.5.2">
<h3><span class="header-section-number">4.5.2</span> <code>xlim()</code> and <code>ylim()</code><a href="data_viz.html#x_and_y_lim" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Another way to limit the scope of a visualization is to modify the axes. This can be useful when talking about a specific feature of the data and can also be done through filtering.</p>
<p>For this example, I will use data from <code>nycflights13</code>. The code chunk below demonstrates the process of combining the seats variable from the planes data frame with the flights data frame. Refer to the <a href="data.html#merge">chapter 2</a> for more information on the specifics of this.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="data_viz.html#cb54-1" tabindex="-1"></a>(flight_size <span class="ot">&lt;-</span> flights <span class="sc">|&gt;</span> <span class="co"># notice I selected the key (tailnum) and desired var (seats) from planes to join</span></span>
<span id="cb54-2"><a href="data_viz.html#cb54-2" tabindex="-1"></a>  <span class="fu">left_join</span>(planes <span class="sc">|&gt;</span> <span class="fu">select</span>(tailnum, seats), <span class="at">by =</span> <span class="st">&quot;tailnum&quot;</span>)) <span class="sc">|&gt;</span> <span class="co"># this prevents unwanted data in the new data frame</span></span>
<span id="cb54-3"><a href="data_viz.html#cb54-3" tabindex="-1"></a>  <span class="fu">select</span>(month, day, distance, dep_delay, seats) <span class="co"># select only variable I will use in visualization</span></span></code></pre></div>
<pre><code>## # A tibble: 336,776 × 5
##    month   day distance dep_delay seats
##    &lt;int&gt; &lt;int&gt;    &lt;dbl&gt;     &lt;dbl&gt; &lt;int&gt;
##  1     1     1     1400         2   149
##  2     1     1     1416         4   149
##  3     1     1     1089         2   178
##  4     1     1     1576        -1   200
##  5     1     1      762        -6   178
##  6     1     1      719        -4   191
##  7     1     1     1065        -5   200
##  8     1     1      229        -3    55
##  9     1     1      944        -3   200
## 10     1     1      733        -2    NA
## # ℹ 336,766 more rows</code></pre>
<p>After combining the data frame, I created below a scatter plot of the departure delay (dep_delay) and flight distance (distance) of all the planes that left NYC in January of 2013. In this scatter plot, I mapped the size aesthetic to the number of seats on the plane. The most obvious issue with this visualization is over-plotting. All of the points are clustered in the bottom left corner of the graph and leave a massive sections of blank space.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="data_viz.html#cb56-1" tabindex="-1"></a>(axes_example <span class="ot">&lt;-</span> flight_size <span class="sc">|&gt;</span></span>
<span id="cb56-2"><a href="data_viz.html#cb56-2" tabindex="-1"></a>  <span class="fu">filter</span>(month <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> day <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb56-3"><a href="data_viz.html#cb56-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> distance, <span class="at">y =</span> dep_delay, <span class="at">size =</span> seats)) <span class="sc">+</span></span>
<span id="cb56-4"><a href="data_viz.html#cb56-4" tabindex="-1"></a>  <span class="fu">geom_point</span>())</span></code></pre></div>
<pre><code>## Warning: Removed 148 rows containing missing values (`geom_point()`).</code></pre>
<p><img src="_main_files/figure-html/Overplotted%20Scatter%20for%20Axes%20Mod-1.png" width="672" /></p>
<p>To mitigate this issue, I first modify the y-axis. I use the <code>ylim(min, max)</code> function for this. There does not appear to be any flights where dep_delay is greater than 400, so I limit the y axis from 0 to 400. The scale of the x-axis still appears to be causing over-plotting issues.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="data_viz.html#cb58-1" tabindex="-1"></a>axes_example <span class="sc">+</span> <span class="fu">ylim</span>(<span class="dv">0</span>,<span class="dv">400</span>)</span></code></pre></div>
<pre><code>## Warning: Removed 488 rows containing missing values (`geom_point()`).</code></pre>
<p><img src="_main_files/figure-html/Set%20Y-axis-1.png" width="672" /></p>
<p>To limit the x-axis, I use the <code>xlim(min, max)</code> function. I choose to limit the x-axis to 3000, excluding one observation with a distance of 5000. The exclusion of data must always be noted, otherwise your visualization is misleading. In this case, it is such an extreme outlier and is only one observation so it has little effect on the visualization and is worth the added clarity.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="data_viz.html#cb60-1" tabindex="-1"></a>axes_example <span class="sc">+</span> <span class="fu">ylim</span>(<span class="dv">0</span>,<span class="dv">400</span>) <span class="sc">+</span> <span class="fu">xlim</span>(<span class="dv">0</span>,<span class="dv">3000</span>)</span></code></pre></div>
<pre><code>## Warning: Removed 489 rows containing missing values (`geom_point()`).</code></pre>
<p><img src="_main_files/figure-html/Set%20X-axis-1.png" width="672" /></p>
<p>This graph still suffers from a lack of clarity due to over-plotting but serves as a good example of how to experiment to find the best way to visualize data, while introducing these important functions.</p>
</div>
</div>
<div id="titles" class="section level2 hasAnchor" number="4.6">
<h2><span class="header-section-number">4.6</span> Titles<a href="data_viz.html#titles" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>One of the wonderful features of <code>ggplot2</code> is that it allows for complete customization of the titles. The variable names displayed on axes, while clear and concise for coding purposes, often do not provide enough information for academic work. It is important that axes titles are clear to the uninformed reader. Always provide units for axes titles and specify the time frame of your data in the header if applicable. Ideally you indicate the source on the graph as well. The titles are added through <code>+ labs()</code>. This is demonstrated in the code chunk below. Look up the <code>labs()</code> function documentation for further options.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="data_viz.html#cb62-1" tabindex="-1"></a>example1 <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Scatter Plot of Highway Miles Per Gallon and Engine Size&quot;</span>, <span class="at">subtitle =</span> <span class="st">&quot;source: ggplot2&quot;</span>, <span class="at">x =</span> <span class="st">&quot;Engine Displacement (Liters)&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Highway Miles Per Gallon&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/Change%20Titles-1.png" width="672" /></p>
<p>This example also demonstrates how to modify visualizations after they are saved within R. In this example, I call <code>example1</code> above and use <code>+ labs()</code> to modify titles.</p>
</div>
<div id="time_series_plot" class="section level2 hasAnchor" number="4.7">
<h2><span class="header-section-number">4.7</span> Plotting Time Series<a href="data_viz.html#time_series_plot" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This section covers the unique difficulties of properly plotting time series data. Time series data is any data that has a sequence through time. For this section we will use the <code>economics</code> data set included with <code>ggplot2</code>. This data set is presented in the code chunk below. When dealing with time series data the first important feature of the data set to identify is the time interval between observations. In our example, observations are taken on a monthly basis. The second important feature of a time series to identify is the span of the data in question. These data span from January of 1967 to April of 2015.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="data_viz.html#cb63-1" tabindex="-1"></a>economics</span></code></pre></div>
<pre><code>## # A tibble: 574 × 6
##    date         pce    pop psavert uempmed unemploy
##    &lt;date&gt;     &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;
##  1 1967-07-01  507. 198712    12.6     4.5     2944
##  2 1967-08-01  510. 198911    12.6     4.7     2945
##  3 1967-09-01  516. 199113    11.9     4.6     2958
##  4 1967-10-01  512. 199311    12.9     4.9     3143
##  5 1967-11-01  517. 199498    12.8     4.7     3066
##  6 1967-12-01  525. 199657    11.8     4.8     3018
##  7 1968-01-01  531. 199808    11.7     5.1     2878
##  8 1968-02-01  534. 199920    12.3     4.5     3001
##  9 1968-03-01  544. 200056    11.7     4.1     2877
## 10 1968-04-01  544  200208    12.3     4.6     2709
## # ℹ 564 more rows</code></pre>
<p>It is crucially important that the variable indicating time is stored in a date object. Looking at the data frame above you can see that the <code>date</code> variable has the type <code>&lt;date&gt;</code>. This ensures that <code>ggplot2</code> correctly recognizes that each value stands for a point in time and treats them properly. It also allows you to reference different components of the date_time object using function available through the <code>lubridate</code> package (included in the tidyverse).</p>
<p>In the code chunk below I plot the median duration of unemployment in weeks (<code>uempmed</code>) over time (<code>date</code>). When plotting time series, I prefer to use <code>geom_line()</code>, to visually show the connected nature of the points, with <code>geom_point()</code> to indicate where each individual observation falls.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="data_viz.html#cb65-1" tabindex="-1"></a>economics <span class="sc">|&gt;</span></span>
<span id="cb65-2"><a href="data_viz.html#cb65-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> uempmed)) <span class="sc">+</span></span>
<span id="cb65-3"><a href="data_viz.html#cb65-3" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb65-4"><a href="data_viz.html#cb65-4" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/Unemployment%20Graph-1.png" width="672" /></p>
<p>The span of this data set causes the observations to be slightly too closely clustered together. In the code chunk below, I restricted the observations to be from 1980 to 1989 to demonstrate the effectiveness of this method on a smaller time frame. Notice how I used the <code>year()</code> function on the date object, allowing me to filter by year.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="data_viz.html#cb66-1" tabindex="-1"></a>economics <span class="sc">|&gt;</span></span>
<span id="cb66-2"><a href="data_viz.html#cb66-2" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">year</span>(date) <span class="sc">&lt;</span> <span class="dv">1990</span> <span class="sc">&amp;</span> <span class="fu">year</span>(date) <span class="sc">&gt;=</span> <span class="dv">1980</span>) <span class="sc">|&gt;</span></span>
<span id="cb66-3"><a href="data_viz.html#cb66-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> uempmed)) <span class="sc">+</span></span>
<span id="cb66-4"><a href="data_viz.html#cb66-4" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb66-5"><a href="data_viz.html#cb66-5" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/Unemployment%20Plotted%20in%2080s-1.png" width="672" /></p>
<p>Returning to the original example in this section, faceting is the best method to use to improve the clarity of the plot of the complete time series without restricting the observations plotted. This also allows the trend within each year to be easily visually compared as each year has its own plot.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="data_viz.html#cb67-1" tabindex="-1"></a>economics <span class="sc">|&gt;</span></span>
<span id="cb67-2"><a href="data_viz.html#cb67-2" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">month</span>(date), <span class="at">y =</span> uempmed)) <span class="sc">+</span></span>
<span id="cb67-3"><a href="data_viz.html#cb67-3" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb67-4"><a href="data_viz.html#cb67-4" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb67-5"><a href="data_viz.html#cb67-5" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span><span class="fu">year</span>(date))</span></code></pre></div>
<p><img src="_main_files/figure-html/Time%20Series%20Facet-1.png" width="672" /></p>
</div>
<div id="save_viz" class="section level2 hasAnchor" number="4.8">
<h2><span class="header-section-number">4.8</span> Saving and Showing Graphics<a href="data_viz.html#save_viz" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>For display, visualizations should be saved in the format of a .png. This format allows them to be easily references in a separate document if desired. To save a visualization, you should use the <code>ggsave("filename", plot = )</code> function. In the code chunk below, I save the first plot I made in this chapter by referencing its name in the <code>plot =</code> parameter. Crucially, the <code>filename =</code> parameter must have quotation marks around it and end with the proper file type. If the <code>plot =</code> parameter is not specified, then the function will automatically save the last plot you made.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="data_viz.html#cb68-1" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;example1.png&quot;</span>, <span class="at">plot =</span> example1)</span></code></pre></div>
<pre><code>## Saving 7 x 5 in image</code></pre>
<p><code>ggsave()</code> can be used to save other file formats as well. Refer to the <code>ggsave()</code> documentation for more information and working examples.</p>
</div>
<div id="data_viz_conclusion" class="section level2 hasAnchor" number="4.9">
<h2><span class="header-section-number">4.9</span> Conclusion<a href="data_viz.html#data_viz_conclusion" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>After reading this section, you should have a functional understanding of the grammar of graphics, the syntax of <code>ggplot2</code>, and how to make informative and functional data visualizations for basic statistics. Throughout this chapter, I combined resources from a variety of free, online resources. These resources go into greater detail on the technical side of these topics, and provide more working examples. The purpose of this chapter is to quickly give a foundation in the basics of these topics. If something does not make sense, or your you would like to know more do not hesitate to refer to these resources (available in references).</p>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-modern_dive" class="csl-entry">
Ismay, Chester, and Albert Y. Kim. <em>Statistical Inference via Data Science: A ModernDive into r and the Tidyverse</em>, 2023.
</div>
<div id="ref-R-nycflights13" class="csl-entry">
Wickham, Hadley. <em>Nycflights13: Flights That Departed NYC in 2013</em>, 2021. <a href="https://github.com/hadley/nycflights13">https://github.com/hadley/nycflights13</a>.
</div>
<div id="ref-R-tidyverse" class="csl-entry">
———. <em>Tidyverse: Easily Install and Load the Tidyverse</em>, 2023. <a href="https://CRAN.R-project.org/package=tidyverse">https://CRAN.R-project.org/package=tidyverse</a>.
</div>
<div id="ref-r4ds" class="csl-entry">
Wickham, Hadley, Mine Çetinkaya-Rundel, and Garett Grolemund. <em>R for Data Science</em>. 2nd ed., 2023.
</div>
<div id="ref-R-ggplot2" class="csl-entry">
Wickham, Hadley, Winston Chang, Lionel Henry, Thomas Lin Pedersen, Kohske Takahashi, Claus Wilke, Kara Woo, Hiroaki Yutani, and Dewey Dunnington. <em>Ggplot2: Create Elegant Data Visualisations Using the Grammar of Graphics</em>, 2023. <a href="https://CRAN.R-project.org/package=ggplot2">https://CRAN.R-project.org/package=ggplot2</a>.
</div>
<div id="ref-ggplot2" class="csl-entry">
Wickham, Hadley, Danielle Navarro, and Thomas Lin. <em>Ggplot2: Elegant Graphics for Data Analysis</em>. 3rd ed. Springer, 2023.
</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p><a href="#ref-R-tidyverse">Wickham, <em>Tidyverse</em></a>.<a href="data_viz.html#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p><a href="#ref-R-ggplot2">Wickham et al., <em>Ggplot2</em></a>.<a href="data_viz.html#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p><a href="#ref-R-nycflights13">Wickham, <em>Nycflights13</em></a>.<a href="data_viz.html#fnref3" class="footnote-back">↩︎</a></p></li>
<li id="fn4"><p><a href="#ref-R-nycflights13">Wickham</a>.<a href="data_viz.html#fnref4" class="footnote-back">↩︎</a></p></li>
<li id="fn5"><p><a href="#ref-modern_dive">Ismay and Kim, <em>Statistical Inference via Data Science</em></a>.<a href="data_viz.html#fnref5" class="footnote-back">↩︎</a></p></li>
<li id="fn6"><p><a href="#ref-ggplot2">Wickham, Navarro, and Lin, <em>Ggplot2</em></a>.<a href="data_viz.html#fnref6" class="footnote-back">↩︎</a></p></li>
<li id="fn7"><p><a href="#ref-r4ds">Wickham, Çetinkaya-Rundel, and Grolemund, <em>R for Data Science</em></a>.<a href="data_viz.html#fnref7" class="footnote-back">↩︎</a></p></li>
<li id="fn8"><p><a href="#ref-modern_dive">Ismay and Kim, <em>Statistical Inference via Data Science</em></a>.<a href="data_viz.html#fnref8" class="footnote-back">↩︎</a></p></li>
<li id="fn9"><p><a href="#ref-modern_dive">Ismay and Kim</a>.<a href="data_viz.html#fnref9" class="footnote-back">↩︎</a></p></li>
<li id="fn10"><p><a href="#ref-modern_dive">Ismay and Kim</a>.<a href="data_viz.html#fnref10" class="footnote-back">↩︎</a></p></li>
<li id="fn11"><p><a href="#ref-modern_dive">Ismay and Kim</a>.<a href="data_viz.html#fnref11" class="footnote-back">↩︎</a></p></li>
<li id="fn12"><p><a href="#ref-r4ds">Wickham, Çetinkaya-Rundel, and Grolemund, <em>R for Data Science</em></a>.<a href="data_viz.html#fnref12" class="footnote-back">↩︎</a></p></li>
<li id="fn13"><p><a href="#ref-r4ds">Wickham, Çetinkaya-Rundel, and Grolemund</a>.<a href="data_viz.html#fnref13" class="footnote-back">↩︎</a></p></li>
<li id="fn14"><p><a href="#ref-r4ds">Wickham, Çetinkaya-Rundel, and Grolemund</a>.<a href="data_viz.html#fnref14" class="footnote-back">↩︎</a></p></li>
<li id="fn15"><p><a href="#ref-modern_dive">Ismay and Kim, <em>Statistical Inference via Data Science</em></a>.<a href="data_viz.html#fnref15" class="footnote-back">↩︎</a></p></li>
<li id="fn16"><p><a href="#ref-modern_dive">Ismay and Kim</a>.<a href="data_viz.html#fnref16" class="footnote-back">↩︎</a></p></li>
<li id="fn17"><p><a href="#ref-r4ds">Wickham, Çetinkaya-Rundel, and Grolemund, <em>R for Data Science</em></a>.<a href="data_viz.html#fnref17" class="footnote-back">↩︎</a></p></li>
<li id="fn18"><p><a href="#ref-modern_dive">Ismay and Kim, <em>Statistical Inference via Data Science</em></a>.<a href="data_viz.html#fnref18" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="add_res.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
